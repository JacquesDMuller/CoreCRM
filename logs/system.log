[2025-07-12 01:03:53][info] ThemeHandler initialized. Active theme: default
[2025-07-12 01:03:53][info] Database connection established successfully with driver: mysql.
[2025-07-12 01:03:53][info] DatabaseHandler initialized.
[2025-07-12 01:03:53][info] AuthHandler initialized. Session started.
[2025-07-12 01:03:53][info] Route added: [GET] /
[2025-07-12 01:03:53][info] RoutesHandler initialized.
[2025-07-12 01:03:53][info] PluginHandler initialized. Loading plugins...
[2025-07-12 01:03:53][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-12 01:03:53][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-12 01:03:53][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-12 01:03:53][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-12 01:03:53][info] Route added: [GET] /clientes
[2025-07-12 01:03:53][info] Route added: [GET] /clientes/novo
[2025-07-12 01:03:53][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-12 01:03:53][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-12 01:03:53][info] Database table created/verified successfully.
[2025-07-12 01:03:53][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-12 01:03:53][info] Database table created/verified successfully.
[2025-07-12 01:03:53][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-12 01:03:53][info] Database table created/verified successfully.
[2025-07-12 01:03:53][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-12 01:03:53][info] Database table created/verified successfully.
[2025-07-12 01:03:53][info] Route added: [GET] /inventory
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/products
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/products/new
[2025-07-12 01:03:53][info] Route added: [POST] /inventory/products/new
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/products/edit
[2025-07-12 01:03:53][info] Route added: [POST] /inventory/products/edit
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/categories
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/stock
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/movements
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/reports
[2025-07-12 01:03:53][info] Hook registered: after_product_created (after, priority 10)
[2025-07-12 01:03:53][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-12 01:03:53][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-12 01:03:53][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-12 01:03:53][info] InventoryCore plugin initialized successfully.
[2025-07-12 01:03:53][info] InventoryCore plugin loaded successfully.
[2025-07-12 01:03:53][info] Route added: [GET] /inventory
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/products
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/products/new
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/products/edit
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/categories
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/stock
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/movements
[2025-07-12 01:03:53][info] Route added: [GET] /inventory/reports
[2025-07-12 01:03:53][info] Loading plugin: System Manager (system_manager)
[2025-07-12 01:03:53][info] Route added: [GET] /login
[2025-07-12 01:03:53][info] Route added: [POST] /login
[2025-07-12 01:03:53][info] Route added: [GET] /admin
[2025-07-12 01:03:53][info] Route added: [GET] /admin/usuarios
[2025-07-12 01:03:53][info] Route added: [GET] /logout
[2025-07-12 01:03:53][info] Route added: [GET] /admin/plugins
[2025-07-12 01:03:53][info] Route added: [POST] /admin/plugins
[2025-07-12 01:03:53][info] Route added: [POST] /api/token
[2025-07-12 01:03:53][info] Route added: [GET] /api/users
[2025-07-12 01:03:53][info] Route added: [POST] /api/users
[2025-07-12 01:03:53][info] Route added: [GET] /api/users/{id}
[2025-07-12 01:03:53][info] Route added: [PUT] /api/users/{id}
[2025-07-12 01:03:53][info] Route added: [DELETE] /api/users/{id}
[2025-07-12 01:03:53][info] Route added: [GET] /usuarios
[2025-07-12 01:03:53][info] Route added: [GET] /usuarios/novo
[2025-07-12 01:03:53][info] Route added: [POST] /usuarios/novo
[2025-07-12 01:03:53][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-12 01:03:53][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-12 01:03:53][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-12 01:03:53][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-12 01:03:53][info] Plugin system_manager carregado com sucesso.
[2025-07-12 01:03:53][info] Route added: [GET] /admin
[2025-07-12 01:03:53][info] Route added: [GET] /login
[2025-07-12 01:03:53][info] Route added: [GET] /logout
[2025-07-12 01:03:53][info] Route added: [GET] /admin/usuarios
[2025-07-12 01:03:53][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-12 01:03:53][info] Route added: [POST] /whatsapp/webhook
[2025-07-12 01:03:53][info] Route added: [GET] /whatsapp/webhook
[2025-07-12 01:03:53][info] Route added: [GET] /webhook
[2025-07-12 01:03:53][info] Finished loading plugins.
HEADERS: {"authorization":"Basic YWRtaW46YWRtaW4xMjM=","user-agent":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; pt-BR) WindowsPowerShell\/5.1.22621.4391","content-type":"application\/x-www-form-urlencoded","host":"localhost","content-length":"0"}
[2025-07-12 01:03:53][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at) VALUES (?, ?, ?) Params: [1,"8a7e59c80ff21419679983a6843fc19d0a174d599c76b6b6478b14055725ab9a","2025-07-12 01:03:53"]
[2025-07-14 05:36:27][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:36:27][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:36:27][info] DatabaseHandler initialized.
[2025-07-14 05:36:27][info] AuthHandler initialized. Session started.
[2025-07-14 05:36:27][info] Route added: [GET] /
[2025-07-14 05:36:27][info] RoutesHandler initialized.
[2025-07-14 05:36:27][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:36:27][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:36:27][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:36:27][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:36:27][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:36:27][info] Route added: [GET] /clientes
[2025-07-14 05:36:27][info] Route added: [GET] /clientes/novo
[2025-07-14 05:36:27][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:36:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:36:27][info] Database table created/verified successfully.
[2025-07-14 05:36:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:36:27][info] Database table created/verified successfully.
[2025-07-14 05:36:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:36:27][info] Database table created/verified successfully.
[2025-07-14 05:36:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:36:27][info] Database table created/verified successfully.
[2025-07-14 05:36:27][info] Route added: [GET] /inventory
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/products
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:36:27][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:36:27][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/categories
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/stock
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/movements
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/reports
[2025-07-14 05:36:27][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:36:27][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:36:27][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:36:27][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:36:27][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:36:27][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:36:27][info] Route added: [GET] /inventory
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/products
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/categories
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/stock
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/movements
[2025-07-14 05:36:27][info] Route added: [GET] /inventory/reports
[2025-07-14 05:36:27][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:36:27][info] Route added: [GET] /login
[2025-07-14 05:36:27][info] Route added: [POST] /login
[2025-07-14 05:36:27][info] Route added: [GET] /admin
[2025-07-14 05:36:27][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:36:27][info] Route added: [GET] /logout
[2025-07-14 05:36:27][info] Route added: [GET] /admin/plugins
[2025-07-14 05:36:27][info] Route added: [POST] /admin/plugins
[2025-07-14 05:36:27][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:36:27][info] Route added: [GET] /admin/logs
[2025-07-14 05:36:27][info] Route added: [GET] /usuarios
[2025-07-14 05:36:27][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:36:27][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:36:27][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:36:27][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:36:27][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:36:27][info] Route added: [POST] /api/token
[2025-07-14 05:36:27][info] Route added: [GET] /api/users
[2025-07-14 05:36:27][info] Route added: [POST] /api/users
[2025-07-14 05:36:27][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:36:27][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:36:27][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:36:42][error] Erro ao executar migration de plugins: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away
[2025-07-14 05:36:42][error] Erro ao executar migration de usuários: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away
[2025-07-14 05:36:42][error] Erro ao executar migrations do system_manager: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away
[2025-07-14 05:36:42][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:36:42][info] Route added: [GET] /admin
[2025-07-14 05:36:42][info] Route added: [GET] /login
[2025-07-14 05:36:42][info] Route added: [GET] /logout
[2025-07-14 05:36:42][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:36:42][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:36:42][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:36:42][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:36:42][info] Route added: [GET] /webhook
[2025-07-14 05:36:42][info] Finished loading plugins.
[2025-07-14 05:36:42][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:36:46][error] Database connection failed: SQLSTATE[HY000] [2002] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente
[2025-07-14 05:36:53][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:36:57][error] Database connection failed: SQLSTATE[HY000] [2002] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente
[2025-07-14 05:36:57][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:37:01][error] Database connection failed: SQLSTATE[HY000] [2002] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente
[2025-07-14 05:37:10][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:37:14][error] Database connection failed: SQLSTATE[HY000] [2002] Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente
[2025-07-14 05:37:57][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:37:57][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:37:57][info] DatabaseHandler initialized.
[2025-07-14 05:37:57][info] AuthHandler initialized. Session started.
[2025-07-14 05:37:57][info] Route added: [GET] /
[2025-07-14 05:37:57][info] RoutesHandler initialized.
[2025-07-14 05:37:57][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:37:57][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:37:57][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:37:57][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:37:57][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:37:57][info] Route added: [GET] /clientes
[2025-07-14 05:37:57][info] Route added: [GET] /clientes/novo
[2025-07-14 05:37:57][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:37:57][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:37:57][info] Database table created/verified successfully.
[2025-07-14 05:37:57][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:37:57][info] Database table created/verified successfully.
[2025-07-14 05:37:57][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:37:57][info] Database table created/verified successfully.
[2025-07-14 05:37:57][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:37:57][info] Database table created/verified successfully.
[2025-07-14 05:37:57][info] Route added: [GET] /inventory
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/products
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:37:57][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:37:57][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/categories
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/stock
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/movements
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/reports
[2025-07-14 05:37:57][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:37:57][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:37:57][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:37:57][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:37:57][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:37:57][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:37:57][info] Route added: [GET] /inventory
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/products
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/categories
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/stock
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/movements
[2025-07-14 05:37:57][info] Route added: [GET] /inventory/reports
[2025-07-14 05:37:57][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:37:57][info] Route added: [GET] /login
[2025-07-14 05:37:57][info] Route added: [POST] /login
[2025-07-14 05:37:57][info] Route added: [GET] /admin
[2025-07-14 05:37:57][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:37:57][info] Route added: [GET] /logout
[2025-07-14 05:37:57][info] Route added: [GET] /admin/plugins
[2025-07-14 05:37:57][info] Route added: [POST] /admin/plugins
[2025-07-14 05:37:57][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:37:57][info] Route added: [GET] /admin/logs
[2025-07-14 05:37:57][info] Route added: [GET] /usuarios
[2025-07-14 05:37:57][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:37:57][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:37:57][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:37:57][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:37:57][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:37:57][info] Route added: [POST] /api/token
[2025-07-14 05:37:57][info] Route added: [GET] /api/users
[2025-07-14 05:37:57][info] Route added: [POST] /api/users
[2025-07-14 05:37:57][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:37:57][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:37:57][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:37:58][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:37:58][info] Route added: [GET] /admin
[2025-07-14 05:37:58][info] Route added: [GET] /login
[2025-07-14 05:37:58][info] Route added: [GET] /logout
[2025-07-14 05:37:58][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:37:58][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:37:58][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:37:58][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:37:58][info] Route added: [GET] /webhook
[2025-07-14 05:37:58][info] Finished loading plugins.
[2025-07-14 05:37:59][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:37:59][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:37:59][info] DatabaseHandler initialized.
[2025-07-14 05:37:59][info] AuthHandler initialized. Session started.
[2025-07-14 05:37:59][info] Route added: [GET] /
[2025-07-14 05:37:59][info] RoutesHandler initialized.
[2025-07-14 05:37:59][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:37:59][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:37:59][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:37:59][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:37:59][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:37:59][info] Route added: [GET] /clientes
[2025-07-14 05:37:59][info] Route added: [GET] /clientes/novo
[2025-07-14 05:37:59][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:37:59][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:37:59][info] Database table created/verified successfully.
[2025-07-14 05:37:59][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:37:59][info] Database table created/verified successfully.
[2025-07-14 05:37:59][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:37:59][info] Database table created/verified successfully.
[2025-07-14 05:37:59][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:37:59][info] Database table created/verified successfully.
[2025-07-14 05:37:59][info] Route added: [GET] /inventory
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/products
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:37:59][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:37:59][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/categories
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/stock
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/movements
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/reports
[2025-07-14 05:37:59][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:37:59][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:37:59][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:37:59][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:37:59][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:37:59][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:37:59][info] Route added: [GET] /inventory
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/products
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/categories
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/stock
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/movements
[2025-07-14 05:37:59][info] Route added: [GET] /inventory/reports
[2025-07-14 05:37:59][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:37:59][info] Route added: [GET] /login
[2025-07-14 05:37:59][info] Route added: [POST] /login
[2025-07-14 05:37:59][info] Route added: [GET] /admin
[2025-07-14 05:37:59][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:37:59][info] Route added: [GET] /logout
[2025-07-14 05:37:59][info] Route added: [GET] /admin/plugins
[2025-07-14 05:37:59][info] Route added: [POST] /admin/plugins
[2025-07-14 05:37:59][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:37:59][info] Route added: [GET] /admin/logs
[2025-07-14 05:37:59][info] Route added: [GET] /usuarios
[2025-07-14 05:37:59][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:37:59][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:37:59][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:37:59][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:37:59][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:37:59][info] Route added: [POST] /api/token
[2025-07-14 05:37:59][info] Route added: [GET] /api/users
[2025-07-14 05:37:59][info] Route added: [POST] /api/users
[2025-07-14 05:37:59][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:37:59][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:37:59][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:37:59][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:37:59][info] Route added: [GET] /admin
[2025-07-14 05:37:59][info] Route added: [GET] /login
[2025-07-14 05:37:59][info] Route added: [GET] /logout
[2025-07-14 05:37:59][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:37:59][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:37:59][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:37:59][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:37:59][info] Route added: [GET] /webhook
[2025-07-14 05:37:59][info] Finished loading plugins.
[2025-07-14 05:38:58][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:38:58][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:38:58][info] DatabaseHandler initialized.
[2025-07-14 05:38:58][info] AuthHandler initialized. Session started.
[2025-07-14 05:38:58][info] Route added: [GET] /
[2025-07-14 05:38:58][info] RoutesHandler initialized.
[2025-07-14 05:38:58][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:38:58][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:38:58][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:38:58][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:38:58][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:38:58][info] Route added: [GET] /clientes
[2025-07-14 05:38:58][info] Route added: [GET] /clientes/novo
[2025-07-14 05:38:58][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:38:58][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:38:58][info] Database table created/verified successfully.
[2025-07-14 05:38:58][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:38:58][info] Database table created/verified successfully.
[2025-07-14 05:38:58][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:38:58][info] Database table created/verified successfully.
[2025-07-14 05:38:58][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:38:58][info] Database table created/verified successfully.
[2025-07-14 05:38:58][info] Route added: [GET] /inventory
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:38:58][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:38:58][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/categories
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/stock
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/movements
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/reports
[2025-07-14 05:38:58][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:38:58][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:38:58][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:38:58][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:38:58][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:38:58][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:38:58][info] Route added: [GET] /inventory
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/categories
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/stock
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/movements
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/reports
[2025-07-14 05:38:58][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:38:58][info] Route added: [GET] /login
[2025-07-14 05:38:58][info] Route added: [POST] /login
[2025-07-14 05:38:58][info] Route added: [GET] /admin
[2025-07-14 05:38:58][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:38:58][info] Route added: [GET] /logout
[2025-07-14 05:38:58][info] Route added: [GET] /admin/plugins
[2025-07-14 05:38:58][info] Route added: [POST] /admin/plugins
[2025-07-14 05:38:58][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:38:58][info] Route added: [GET] /admin/logs
[2025-07-14 05:38:58][info] Route added: [GET] /usuarios
[2025-07-14 05:38:58][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:38:58][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:38:58][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:38:58][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:38:58][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:38:58][info] Route added: [POST] /api/token
[2025-07-14 05:38:58][info] Route added: [GET] /api/users
[2025-07-14 05:38:58][info] Route added: [POST] /api/users
[2025-07-14 05:38:58][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:38:58][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:38:58][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:38:58][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:38:58][info] Route added: [GET] /admin
[2025-07-14 05:38:58][info] Route added: [GET] /login
[2025-07-14 05:38:58][info] Route added: [GET] /logout
[2025-07-14 05:38:58][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:38:58][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:38:58][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:38:58][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:38:58][info] Route added: [GET] /webhook
[2025-07-14 05:38:58][info] Finished loading plugins.
[2025-07-14 05:38:58][info] User admin logged in with role admin.
[2025-07-14 05:38:58][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:38:58][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:38:58][info] DatabaseHandler initialized.
[2025-07-14 05:38:58][info] AuthHandler initialized. Session started.
[2025-07-14 05:38:58][info] Route added: [GET] /
[2025-07-14 05:38:58][info] RoutesHandler initialized.
[2025-07-14 05:38:58][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:38:58][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:38:58][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:38:58][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:38:58][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:38:58][info] Route added: [GET] /clientes
[2025-07-14 05:38:58][info] Route added: [GET] /clientes/novo
[2025-07-14 05:38:58][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:38:58][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:38:58][info] Database table created/verified successfully.
[2025-07-14 05:38:58][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:38:58][info] Database table created/verified successfully.
[2025-07-14 05:38:58][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:38:58][info] Database table created/verified successfully.
[2025-07-14 05:38:58][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:38:58][info] Database table created/verified successfully.
[2025-07-14 05:38:58][info] Route added: [GET] /inventory
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:38:58][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:38:58][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/categories
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/stock
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/movements
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/reports
[2025-07-14 05:38:58][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:38:58][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:38:58][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:38:58][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:38:58][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:38:58][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:38:58][info] Route added: [GET] /inventory
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/categories
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/stock
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/movements
[2025-07-14 05:38:58][info] Route added: [GET] /inventory/reports
[2025-07-14 05:38:58][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:38:58][info] Route added: [GET] /login
[2025-07-14 05:38:58][info] Route added: [POST] /login
[2025-07-14 05:38:58][info] Route added: [GET] /admin
[2025-07-14 05:38:58][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:38:58][info] Route added: [GET] /logout
[2025-07-14 05:38:58][info] Route added: [GET] /admin/plugins
[2025-07-14 05:38:58][info] Route added: [POST] /admin/plugins
[2025-07-14 05:38:58][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:38:58][info] Route added: [GET] /admin/logs
[2025-07-14 05:38:58][info] Route added: [GET] /usuarios
[2025-07-14 05:38:58][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:38:58][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:38:58][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:38:58][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:38:58][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:38:58][info] Route added: [POST] /api/token
[2025-07-14 05:38:58][info] Route added: [GET] /api/users
[2025-07-14 05:38:58][info] Route added: [POST] /api/users
[2025-07-14 05:38:58][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:38:58][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:38:58][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:38:58][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:38:58][info] Route added: [GET] /admin
[2025-07-14 05:38:58][info] Route added: [GET] /login
[2025-07-14 05:38:58][info] Route added: [GET] /logout
[2025-07-14 05:38:58][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:38:58][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:38:58][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:38:58][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:38:58][info] Route added: [GET] /webhook
[2025-07-14 05:38:58][info] Finished loading plugins.
[2025-07-14 05:38:58][debug] Checking permission: admin
[2025-07-14 05:38:58][debug] Checking permission: admin
[2025-07-14 05:39:16][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:39:16][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:39:16][info] DatabaseHandler initialized.
[2025-07-14 05:39:16][info] AuthHandler initialized. Session started.
[2025-07-14 05:39:16][info] Route added: [GET] /
[2025-07-14 05:39:16][info] RoutesHandler initialized.
[2025-07-14 05:39:16][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:39:16][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:39:16][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:39:16][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:39:16][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:39:16][info] Route added: [GET] /clientes
[2025-07-14 05:39:16][info] Route added: [GET] /clientes/novo
[2025-07-14 05:39:16][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:39:16][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:39:16][info] Database table created/verified successfully.
[2025-07-14 05:39:16][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:39:16][info] Database table created/verified successfully.
[2025-07-14 05:39:16][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:39:16][info] Database table created/verified successfully.
[2025-07-14 05:39:16][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:39:16][info] Database table created/verified successfully.
[2025-07-14 05:39:16][info] Route added: [GET] /inventory
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/products
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:39:16][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:39:16][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/categories
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/stock
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/movements
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/reports
[2025-07-14 05:39:16][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:39:16][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:39:16][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:39:16][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:39:16][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:39:16][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:39:16][info] Route added: [GET] /inventory
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/products
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/categories
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/stock
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/movements
[2025-07-14 05:39:16][info] Route added: [GET] /inventory/reports
[2025-07-14 05:39:16][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:39:16][info] Route added: [GET] /login
[2025-07-14 05:39:16][info] Route added: [POST] /login
[2025-07-14 05:39:16][info] Route added: [GET] /admin
[2025-07-14 05:39:16][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:39:16][info] Route added: [GET] /logout
[2025-07-14 05:39:16][info] Route added: [GET] /admin/plugins
[2025-07-14 05:39:16][info] Route added: [POST] /admin/plugins
[2025-07-14 05:39:16][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:39:16][info] Route added: [GET] /admin/logs
[2025-07-14 05:39:16][info] Route added: [GET] /usuarios
[2025-07-14 05:39:16][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:39:16][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:39:16][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:39:16][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:39:16][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:39:16][info] Route added: [POST] /api/token
[2025-07-14 05:39:16][info] Route added: [GET] /api/users
[2025-07-14 05:39:16][info] Route added: [POST] /api/users
[2025-07-14 05:39:16][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:39:16][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:39:16][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:39:16][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:39:16][info] Route added: [GET] /admin
[2025-07-14 05:39:16][info] Route added: [GET] /login
[2025-07-14 05:39:16][info] Route added: [GET] /logout
[2025-07-14 05:39:16][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:39:16][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:39:16][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:39:16][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:39:16][info] Route added: [GET] /webhook
[2025-07-14 05:39:16][info] Finished loading plugins.
[2025-07-14 05:39:16][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTP_HOST":"localhost","HTTP_CONNECTION":"keep-alive","HTTP_SEC_CH_UA":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\", \"Google Chrome\";v=\"138\"","HTTP_SEC_CH_UA_MOBILE":"?0","HTTP_SEC_CH_UA_PLATFORM":"\"Windows\"","HTTP_UPGRADE_INSECURE_REQUESTS":"1","HTTP_USER_AGENT":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/138.0.0.0 Safari\/537.36","HTTP_ACCEPT":"text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/avif,image\/webp,image\/apng,*\/*;q=0.8,application\/signed-exchange;v=b3;q=0.7","HTTP_SEC_FETCH_SITE":"none","HTTP_SEC_FETCH_MODE":"navigate","HTTP_SEC_FETCH_USER":"?1","HTTP_SEC_FETCH_DEST":"document","HTTP_ACCEPT_ENCODING":"gzip, deflate, br, zstd","HTTP_ACCEPT_LANGUAGE":"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7","HTTP_COOKIE":"PHPSESSID=tohtcpu4ltgh1u0dp661im08ir","PATH":"C:\\Users\\luizg\\Downloads\\WINDOWS.X64_213000_db_home\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Git\\cmd;c:\\Users\\luizg\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\php842;C:\\Program Files\\dotnet\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\Scripts\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\;C:\\Users\\luizg\\AppData\\Local\\Microsoft\\WindowsApps;C:\\msys64\\ucrt64\\bin;C:\\msys64\\mingw32\\bin;C:\\msys64\\mingw64\\bin;C:\\Users\\luizg\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\luizg\\.dotnet\\tools","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 80<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"80","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"http","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"postmaster@localhost","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51181","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752464356.553265,"REQUEST_TIME":1752464356}
[2025-07-14 05:40:02][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:40:02][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:40:02][info] DatabaseHandler initialized.
[2025-07-14 05:40:02][info] AuthHandler initialized. Session started.
[2025-07-14 05:40:02][info] Route added: [GET] /
[2025-07-14 05:40:02][info] RoutesHandler initialized.
[2025-07-14 05:40:02][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:40:02][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:40:02][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:40:02][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:40:02][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:40:02][info] Route added: [GET] /clientes
[2025-07-14 05:40:02][info] Route added: [GET] /clientes/novo
[2025-07-14 05:40:02][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:40:02][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:40:02][info] Database table created/verified successfully.
[2025-07-14 05:40:02][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:40:02][info] Database table created/verified successfully.
[2025-07-14 05:40:02][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:40:02][info] Database table created/verified successfully.
[2025-07-14 05:40:02][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:40:02][info] Database table created/verified successfully.
[2025-07-14 05:40:02][info] Route added: [GET] /inventory
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/products
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:40:02][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:40:02][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/categories
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/stock
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/movements
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/reports
[2025-07-14 05:40:02][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:40:02][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:40:02][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:40:02][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:40:02][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:40:02][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:40:02][info] Route added: [GET] /inventory
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/products
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/categories
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/stock
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/movements
[2025-07-14 05:40:02][info] Route added: [GET] /inventory/reports
[2025-07-14 05:40:02][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:40:02][info] Route added: [GET] /login
[2025-07-14 05:40:02][info] Route added: [POST] /login
[2025-07-14 05:40:02][info] Route added: [GET] /admin
[2025-07-14 05:40:02][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:40:02][info] Route added: [GET] /logout
[2025-07-14 05:40:02][info] Route added: [GET] /admin/plugins
[2025-07-14 05:40:02][info] Route added: [POST] /admin/plugins
[2025-07-14 05:40:02][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:40:02][info] Route added: [GET] /admin/logs
[2025-07-14 05:40:02][info] Route added: [GET] /usuarios
[2025-07-14 05:40:02][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:40:02][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:40:02][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:40:02][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:40:02][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:40:02][info] Route added: [POST] /api/token
[2025-07-14 05:40:02][info] Route added: [GET] /api/users
[2025-07-14 05:40:02][info] Route added: [POST] /api/users
[2025-07-14 05:40:02][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:40:02][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:40:02][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:40:02][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:40:02][info] Route added: [GET] /admin
[2025-07-14 05:40:02][info] Route added: [GET] /login
[2025-07-14 05:40:02][info] Route added: [GET] /logout
[2025-07-14 05:40:02][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:40:02][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:40:02][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:40:02][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:40:02][info] Route added: [GET] /webhook
[2025-07-14 05:40:02][info] Finished loading plugins.
[2025-07-14 05:40:02][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTP_HOST":"localhost","HTTP_CONNECTION":"keep-alive","HTTP_SEC_CH_UA":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\", \"Google Chrome\";v=\"138\"","HTTP_SEC_CH_UA_MOBILE":"?0","HTTP_SEC_CH_UA_PLATFORM":"\"Windows\"","HTTP_UPGRADE_INSECURE_REQUESTS":"1","HTTP_USER_AGENT":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/138.0.0.0 Safari\/537.36","HTTP_ACCEPT":"text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/avif,image\/webp,image\/apng,*\/*;q=0.8,application\/signed-exchange;v=b3;q=0.7","HTTP_SEC_FETCH_SITE":"none","HTTP_SEC_FETCH_MODE":"navigate","HTTP_SEC_FETCH_USER":"?1","HTTP_SEC_FETCH_DEST":"document","HTTP_ACCEPT_ENCODING":"gzip, deflate, br, zstd","HTTP_ACCEPT_LANGUAGE":"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7","HTTP_COOKIE":"PHPSESSID=tohtcpu4ltgh1u0dp661im08ir","PATH":"C:\\Users\\luizg\\Downloads\\WINDOWS.X64_213000_db_home\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Git\\cmd;c:\\Users\\luizg\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\php842;C:\\Program Files\\dotnet\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\Scripts\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\;C:\\Users\\luizg\\AppData\\Local\\Microsoft\\WindowsApps;C:\\msys64\\ucrt64\\bin;C:\\msys64\\mingw32\\bin;C:\\msys64\\mingw64\\bin;C:\\Users\\luizg\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\luizg\\.dotnet\\tools","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 80<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"80","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"http","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"postmaster@localhost","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51203","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752464402.53066,"REQUEST_TIME":1752464402}
[2025-07-14 05:46:29][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:46:29][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:46:29][info] DatabaseHandler initialized.
[2025-07-14 05:46:29][info] AuthHandler initialized. Session started.
[2025-07-14 05:46:29][info] Route added: [GET] /
[2025-07-14 05:46:29][info] RoutesHandler initialized.
[2025-07-14 05:46:29][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:46:29][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:46:29][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:46:29][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:46:29][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:46:29][info] Route added: [GET] /clientes
[2025-07-14 05:46:29][info] Route added: [GET] /clientes/novo
[2025-07-14 05:46:29][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:46:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:46:29][info] Database table created/verified successfully.
[2025-07-14 05:46:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:46:29][info] Database table created/verified successfully.
[2025-07-14 05:46:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:46:29][info] Database table created/verified successfully.
[2025-07-14 05:46:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:46:29][info] Database table created/verified successfully.
[2025-07-14 05:46:29][info] Route added: [GET] /inventory
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/products
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:46:29][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:46:29][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/categories
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/stock
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/movements
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/reports
[2025-07-14 05:46:29][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:46:29][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:46:29][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:46:29][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:46:29][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:46:29][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:46:29][info] Route added: [GET] /inventory
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/products
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/categories
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/stock
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/movements
[2025-07-14 05:46:29][info] Route added: [GET] /inventory/reports
[2025-07-14 05:46:29][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:46:29][info] Route added: [GET] /login
[2025-07-14 05:46:29][info] Route added: [POST] /login
[2025-07-14 05:46:29][info] Route added: [GET] /admin
[2025-07-14 05:46:29][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:46:29][info] Route added: [GET] /logout
[2025-07-14 05:46:29][info] Route added: [GET] /admin/plugins
[2025-07-14 05:46:29][info] Route added: [POST] /admin/plugins
[2025-07-14 05:46:29][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:46:29][info] Route added: [GET] /admin/logs
[2025-07-14 05:46:29][info] Route added: [GET] /usuarios
[2025-07-14 05:46:29][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:46:29][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:46:29][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:46:29][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:46:29][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:46:29][info] Route added: [POST] /api/token
[2025-07-14 05:46:29][info] Route added: [GET] /api/users
[2025-07-14 05:46:29][info] Route added: [POST] /api/users
[2025-07-14 05:46:29][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:46:29][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:46:29][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:46:29][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:46:29][info] Route added: [GET] /admin
[2025-07-14 05:46:29][info] Route added: [GET] /login
[2025-07-14 05:46:29][info] Route added: [GET] /logout
[2025-07-14 05:46:29][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:46:29][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:46:29][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:46:29][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:46:29][info] Route added: [GET] /webhook
[2025-07-14 05:46:29][info] Finished loading plugins.
[2025-07-14 05:46:29][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTP_USER_AGENT":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; pt-BR) WindowsPowerShell\/5.1.26100.4652","CONTENT_TYPE":"application\/json","HTTP_HOST":"localhost","CONTENT_LENGTH":"2","HTTP_EXPECT":"100-continue","HTTP_CONNECTION":"Keep-Alive","PATH":"C:\\Users\\luizg\\Downloads\\WINDOWS.X64_213000_db_home\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Git\\cmd;c:\\Users\\luizg\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\php842;C:\\Program Files\\dotnet\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\Scripts\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\;C:\\Users\\luizg\\AppData\\Local\\Microsoft\\WindowsApps;C:\\msys64\\ucrt64\\bin;C:\\msys64\\mingw32\\bin;C:\\msys64\\mingw64\\bin;C:\\Users\\luizg\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\luizg\\.dotnet\\tools","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 80<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"80","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"http","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"postmaster@localhost","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51389","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752464789.304086,"REQUEST_TIME":1752464789}
[2025-07-14 05:46:29][debug] SQL Query: SELECT id, username, senha, tipo, ativo FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 05:46:29][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at) VALUES (?, ?, ?) Params: [1,"2dd8419009b4a949c309e49225cf98b3ccb302977426411b408007b77a87caf0","2025-07-14 05:46:29"]
[2025-07-14 05:58:18][info] ThemeHandler initialized. Active theme: default
[2025-07-14 05:58:18][info] Database connection established successfully with driver: mysql.
[2025-07-14 05:58:18][info] DatabaseHandler initialized.
[2025-07-14 05:58:18][info] AuthHandler initialized. Session started.
[2025-07-14 05:58:18][info] Route added: [GET] /
[2025-07-14 05:58:18][info] RoutesHandler initialized.
[2025-07-14 05:58:18][info] PluginHandler initialized. Loading plugins...
[2025-07-14 05:58:18][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 05:58:18][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 05:58:18][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 05:58:18][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 05:58:18][info] Route added: [GET] /clientes
[2025-07-14 05:58:18][info] Route added: [GET] /clientes/novo
[2025-07-14 05:58:18][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 05:58:18][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:58:18][info] Database table created/verified successfully.
[2025-07-14 05:58:18][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 05:58:18][info] Database table created/verified successfully.
[2025-07-14 05:58:18][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 05:58:18][info] Database table created/verified successfully.
[2025-07-14 05:58:18][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 05:58:18][info] Database table created/verified successfully.
[2025-07-14 05:58:18][info] Route added: [GET] /inventory
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/products
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:58:18][info] Route added: [POST] /inventory/products/new
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:58:18][info] Route added: [POST] /inventory/products/edit
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/categories
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/stock
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/movements
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/reports
[2025-07-14 05:58:18][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 05:58:18][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 05:58:18][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 05:58:18][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 05:58:18][info] InventoryCore plugin initialized successfully.
[2025-07-14 05:58:18][info] InventoryCore plugin loaded successfully.
[2025-07-14 05:58:18][info] Route added: [GET] /inventory
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/products
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/products/new
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/products/edit
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/categories
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/stock
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/movements
[2025-07-14 05:58:18][info] Route added: [GET] /inventory/reports
[2025-07-14 05:58:18][info] Loading plugin: System Manager (system_manager)
[2025-07-14 05:58:18][info] Route added: [GET] /login
[2025-07-14 05:58:18][info] Route added: [POST] /login
[2025-07-14 05:58:18][info] Route added: [GET] /admin
[2025-07-14 05:58:18][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:58:18][info] Route added: [GET] /logout
[2025-07-14 05:58:18][info] Route added: [GET] /admin/plugins
[2025-07-14 05:58:18][info] Route added: [POST] /admin/plugins
[2025-07-14 05:58:18][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 05:58:18][info] Route added: [GET] /admin/logs
[2025-07-14 05:58:18][info] Route added: [GET] /usuarios
[2025-07-14 05:58:18][info] Route added: [GET] /usuarios/novo
[2025-07-14 05:58:18][info] Route added: [POST] /usuarios/novo
[2025-07-14 05:58:18][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 05:58:18][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 05:58:18][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 05:58:18][info] Route added: [POST] /api/token
[2025-07-14 05:58:18][info] Route added: [GET] /api/users
[2025-07-14 05:58:18][info] Route added: [POST] /api/users
[2025-07-14 05:58:18][info] Route added: [GET] /api/users/{id}
[2025-07-14 05:58:18][info] Route added: [PUT] /api/users/{id}
[2025-07-14 05:58:18][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 05:58:18][info] Plugin system_manager carregado com sucesso.
[2025-07-14 05:58:18][info] Route added: [GET] /admin
[2025-07-14 05:58:18][info] Route added: [GET] /login
[2025-07-14 05:58:18][info] Route added: [GET] /logout
[2025-07-14 05:58:18][info] Route added: [GET] /admin/usuarios
[2025-07-14 05:58:18][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 05:58:18][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 05:58:18][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 05:58:18][info] Route added: [GET] /webhook
[2025-07-14 05:58:18][info] Finished loading plugins.
[2025-07-14 05:58:18][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 2dd8419009b4a949c309e49225cf98b3ccb302977426411b408007b77a87caf0","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 2dd8419009b4a949c309e49225cf98b3ccb302977426411b408007b77a87caf0","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTP_USER_AGENT":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; pt-BR) WindowsPowerShell\/5.1.26100.4652","HTTP_HOST":"localhost","HTTP_CONNECTION":"Keep-Alive","PATH":"C:\\Users\\luizg\\Downloads\\WINDOWS.X64_213000_db_home\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Git\\cmd;c:\\Users\\luizg\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\php842;C:\\Program Files\\dotnet\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\Scripts\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\;C:\\Users\\luizg\\AppData\\Local\\Microsoft\\WindowsApps;C:\\msys64\\ucrt64\\bin;C:\\msys64\\mingw32\\bin;C:\\msys64\\mingw64\\bin;C:\\Users\\luizg\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\luizg\\.dotnet\\tools","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 80<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"80","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"http","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"postmaster@localhost","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51771","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752465498.703133,"REQUEST_TIME":1752465498}
[2025-07-14 06:01:11][info] ThemeHandler initialized. Active theme: default
[2025-07-14 06:01:11][info] Database connection established successfully with driver: mysql.
[2025-07-14 06:01:11][info] DatabaseHandler initialized.
[2025-07-14 06:01:11][info] AuthHandler initialized. Session started.
[2025-07-14 06:01:11][info] Route added: [GET] /
[2025-07-14 06:01:11][info] RoutesHandler initialized.
[2025-07-14 06:01:11][info] PluginHandler initialized. Loading plugins...
[2025-07-14 06:01:11][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 06:01:11][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 06:01:11][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 06:01:11][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 06:01:11][info] Route added: [GET] /clientes
[2025-07-14 06:01:11][info] Route added: [GET] /clientes/novo
[2025-07-14 06:01:11][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 06:01:11][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 06:01:11][info] Database table created/verified successfully.
[2025-07-14 06:01:11][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 06:01:11][info] Database table created/verified successfully.
[2025-07-14 06:01:11][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 06:01:11][info] Database table created/verified successfully.
[2025-07-14 06:01:11][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 06:01:11][info] Database table created/verified successfully.
[2025-07-14 06:01:11][info] Route added: [GET] /inventory
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/products
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/products/new
[2025-07-14 06:01:11][info] Route added: [POST] /inventory/products/new
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/products/edit
[2025-07-14 06:01:11][info] Route added: [POST] /inventory/products/edit
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/categories
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/stock
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/movements
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/reports
[2025-07-14 06:01:11][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 06:01:11][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 06:01:11][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 06:01:11][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 06:01:11][info] InventoryCore plugin initialized successfully.
[2025-07-14 06:01:11][info] InventoryCore plugin loaded successfully.
[2025-07-14 06:01:11][info] Route added: [GET] /inventory
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/products
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/products/new
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/products/edit
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/categories
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/stock
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/movements
[2025-07-14 06:01:11][info] Route added: [GET] /inventory/reports
[2025-07-14 06:01:11][info] Loading plugin: System Manager (system_manager)
[2025-07-14 06:01:11][info] Route added: [GET] /login
[2025-07-14 06:01:11][info] Route added: [POST] /login
[2025-07-14 06:01:11][info] Route added: [GET] /admin
[2025-07-14 06:01:11][info] Route added: [GET] /admin/usuarios
[2025-07-14 06:01:11][info] Route added: [GET] /logout
[2025-07-14 06:01:11][info] Route added: [GET] /admin/plugins
[2025-07-14 06:01:11][info] Route added: [POST] /admin/plugins
[2025-07-14 06:01:11][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 06:01:11][info] Route added: [GET] /admin/logs
[2025-07-14 06:01:11][info] Route added: [GET] /usuarios
[2025-07-14 06:01:11][info] Route added: [GET] /usuarios/novo
[2025-07-14 06:01:11][info] Route added: [POST] /usuarios/novo
[2025-07-14 06:01:11][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 06:01:11][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 06:01:11][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 06:01:11][info] Route added: [POST] /api/token
[2025-07-14 06:01:11][info] Route added: [GET] /api/users
[2025-07-14 06:01:11][info] Route added: [POST] /api/users
[2025-07-14 06:01:11][info] Route added: [GET] /api/users/{id}
[2025-07-14 06:01:11][info] Route added: [PUT] /api/users/{id}
[2025-07-14 06:01:11][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 06:01:11][info] Plugin system_manager carregado com sucesso.
[2025-07-14 06:01:11][info] Route added: [GET] /admin
[2025-07-14 06:01:11][info] Route added: [GET] /login
[2025-07-14 06:01:11][info] Route added: [GET] /logout
[2025-07-14 06:01:11][info] Route added: [GET] /admin/usuarios
[2025-07-14 06:01:11][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 06:01:11][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 06:01:11][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 06:01:11][info] Route added: [GET] /webhook
[2025-07-14 06:01:11][info] Finished loading plugins.
[2025-07-14 06:01:11][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 2dd8419009b4a949c309e49225cf98b3ccb302977426411b408007b77a87caf0","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 2dd8419009b4a949c309e49225cf98b3ccb302977426411b408007b77a87caf0","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTP_USER_AGENT":"Mozilla\/5.0 (Windows NT; Windows NT 10.0; pt-BR) WindowsPowerShell\/5.1.26100.4652","HTTP_HOST":"localhost","HTTP_CONNECTION":"Keep-Alive","PATH":"C:\\Users\\luizg\\Downloads\\WINDOWS.X64_213000_db_home\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Git\\cmd;c:\\Users\\luizg\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\php842;C:\\Program Files\\dotnet\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\Scripts\\;C:\\Users\\luizg\\AppData\\Local\\Programs\\Python\\Python312\\;C:\\Users\\luizg\\AppData\\Local\\Microsoft\\WindowsApps;C:\\msys64\\ucrt64\\bin;C:\\msys64\\mingw32\\bin;C:\\msys64\\mingw64\\bin;C:\\Users\\luizg\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\luizg\\.dotnet\\tools","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 80<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"80","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"http","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"postmaster@localhost","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51835","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752465671.032153,"REQUEST_TIME":1752465671}
[2025-07-14 06:01:11][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["2dd8419009b4a949c309e49225cf98b3ccb302977426411b408007b77a87caf0"]
[2025-07-14 06:01:11][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 14:47:33][info] ThemeHandler initialized. Active theme: default
[2025-07-14 14:47:33][info] Database connection established successfully with driver: mysql.
[2025-07-14 14:47:33][info] DatabaseHandler initialized.
[2025-07-14 14:47:33][info] AuthHandler initialized. Session started.
[2025-07-14 14:47:33][info] Route added: [GET] /
[2025-07-14 14:47:33][info] RoutesHandler initialized.
[2025-07-14 14:47:33][info] PluginHandler initialized. Loading plugins...
[2025-07-14 14:47:33][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 14:47:33][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 14:47:33][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 14:47:33][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 14:47:33][info] Route added: [GET] /clientes
[2025-07-14 14:47:33][info] Route added: [GET] /clientes/novo
[2025-07-14 14:47:33][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][info] Route added: [GET] /inventory
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products/new
[2025-07-14 14:47:33][info] Route added: [POST] /inventory/products/new
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products/edit
[2025-07-14 14:47:33][info] Route added: [POST] /inventory/products/edit
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/categories
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/stock
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/movements
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/reports
[2025-07-14 14:47:33][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 14:47:33][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 14:47:33][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 14:47:33][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 14:47:33][info] InventoryCore plugin initialized successfully.
[2025-07-14 14:47:33][info] InventoryCore plugin loaded successfully.
[2025-07-14 14:47:33][info] Route added: [GET] /inventory
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products/new
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products/edit
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/categories
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/stock
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/movements
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/reports
[2025-07-14 14:47:33][info] Loading plugin: System Manager (system_manager)
[2025-07-14 14:47:33][info] Route added: [GET] /login
[2025-07-14 14:47:33][info] Route added: [POST] /login
[2025-07-14 14:47:33][info] Route added: [GET] /admin
[2025-07-14 14:47:33][info] Route added: [GET] /admin/usuarios
[2025-07-14 14:47:33][info] Route added: [GET] /logout
[2025-07-14 14:47:33][info] Route added: [GET] /admin/plugins
[2025-07-14 14:47:33][info] Route added: [POST] /admin/plugins
[2025-07-14 14:47:33][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 14:47:33][info] Route added: [GET] /admin/logs
[2025-07-14 14:47:33][info] Route added: [GET] /usuarios
[2025-07-14 14:47:33][info] Route added: [GET] /usuarios/novo
[2025-07-14 14:47:33][info] Route added: [POST] /usuarios/novo
[2025-07-14 14:47:33][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 14:47:33][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 14:47:33][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 14:47:33][info] Route added: [POST] /api/token
[2025-07-14 14:47:33][info] Route added: [GET] /api/users
[2025-07-14 14:47:33][info] Route added: [POST] /api/users
[2025-07-14 14:47:33][info] Route added: [GET] /api/users/{id}
[2025-07-14 14:47:33][info] Route added: [PUT] /api/users/{id}
[2025-07-14 14:47:33][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 14:47:33][info] Plugin system_manager carregado com sucesso.
[2025-07-14 14:47:33][info] Route added: [GET] /admin
[2025-07-14 14:47:33][info] Route added: [GET] /login
[2025-07-14 14:47:33][info] Route added: [GET] /logout
[2025-07-14 14:47:33][info] Route added: [GET] /admin/usuarios
[2025-07-14 14:47:33][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 14:47:33][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 14:47:33][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 14:47:33][info] Route added: [GET] /webhook
[2025-07-14 14:47:33][info] Finished loading plugins.
[2025-07-14 14:47:33][info] ThemeHandler initialized. Active theme: default
[2025-07-14 14:47:33][info] Database connection established successfully with driver: mysql.
[2025-07-14 14:47:33][info] DatabaseHandler initialized.
[2025-07-14 14:47:33][info] AuthHandler initialized. Session started.
[2025-07-14 14:47:33][info] Route added: [GET] /
[2025-07-14 14:47:33][info] RoutesHandler initialized.
[2025-07-14 14:47:33][info] PluginHandler initialized. Loading plugins...
[2025-07-14 14:47:33][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 14:47:33][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 14:47:33][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 14:47:33][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 14:47:33][info] Route added: [GET] /clientes
[2025-07-14 14:47:33][info] Route added: [GET] /clientes/novo
[2025-07-14 14:47:33][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][info] Route added: [GET] /inventory
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products/new
[2025-07-14 14:47:33][info] Route added: [POST] /inventory/products/new
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products/edit
[2025-07-14 14:47:33][info] Route added: [POST] /inventory/products/edit
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/categories
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/stock
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/movements
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/reports
[2025-07-14 14:47:33][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 14:47:33][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 14:47:33][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 14:47:33][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 14:47:33][info] InventoryCore plugin initialized successfully.
[2025-07-14 14:47:33][info] InventoryCore plugin loaded successfully.
[2025-07-14 14:47:33][info] Route added: [GET] /inventory
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products/new
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/products/edit
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/categories
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/stock
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/movements
[2025-07-14 14:47:33][info] Route added: [GET] /inventory/reports
[2025-07-14 14:47:33][info] Loading plugin: System Manager (system_manager)
[2025-07-14 14:47:33][info] Route added: [GET] /login
[2025-07-14 14:47:33][info] Route added: [POST] /login
[2025-07-14 14:47:33][info] Route added: [GET] /admin
[2025-07-14 14:47:33][info] Route added: [GET] /admin/usuarios
[2025-07-14 14:47:33][info] Route added: [GET] /logout
[2025-07-14 14:47:33][info] Route added: [GET] /admin/plugins
[2025-07-14 14:47:33][info] Route added: [POST] /admin/plugins
[2025-07-14 14:47:33][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 14:47:33][info] Route added: [GET] /admin/logs
[2025-07-14 14:47:33][info] Route added: [GET] /usuarios
[2025-07-14 14:47:33][info] Route added: [GET] /usuarios/novo
[2025-07-14 14:47:33][info] Route added: [POST] /usuarios/novo
[2025-07-14 14:47:33][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 14:47:33][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 14:47:33][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 14:47:33][info] Route added: [POST] /api/token
[2025-07-14 14:47:33][info] Route added: [GET] /api/users
[2025-07-14 14:47:33][info] Route added: [POST] /api/users
[2025-07-14 14:47:33][info] Route added: [GET] /api/users/{id}
[2025-07-14 14:47:33][info] Route added: [PUT] /api/users/{id}
[2025-07-14 14:47:33][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 14:47:33][info] Plugin system_manager carregado com sucesso.
[2025-07-14 14:47:33][info] Route added: [GET] /admin
[2025-07-14 14:47:33][info] Route added: [GET] /login
[2025-07-14 14:47:33][info] Route added: [GET] /logout
[2025-07-14 14:47:33][info] Route added: [GET] /admin/usuarios
[2025-07-14 14:47:33][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 14:47:33][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 14:47:33][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 14:47:33][info] Route added: [GET] /webhook
[2025-07-14 14:47:33][info] Finished loading plugins.
[2025-07-14 14:47:33][info] ThemeHandler initialized. Active theme: default
[2025-07-14 14:47:33][info] Database connection established successfully with driver: mysql.
[2025-07-14 14:47:33][info] DatabaseHandler initialized.
[2025-07-14 14:47:33][info] AuthHandler initialized. Session started.
[2025-07-14 14:47:33][info] Route added: [GET] /
[2025-07-14 14:47:33][info] RoutesHandler initialized.
[2025-07-14 14:47:33][info] PluginHandler initialized. Loading plugins...
[2025-07-14 14:47:33][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 14:47:33][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 14:47:33][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 14:47:33][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 14:47:33][info] Route added: [GET] /clientes
[2025-07-14 14:47:33][info] Route added: [GET] /clientes/novo
[2025-07-14 14:47:33][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 14:47:33][info] Database table created/verified successfully.
[2025-07-14 14:47:33][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 14:47:34][info] Database table created/verified successfully.
[2025-07-14 14:47:34][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 14:47:34][info] Database table created/verified successfully.
[2025-07-14 14:47:34][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 14:47:34][info] Database table created/verified successfully.
[2025-07-14 14:47:34][info] Route added: [GET] /inventory
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/products
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/products/new
[2025-07-14 14:47:34][info] Route added: [POST] /inventory/products/new
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/products/edit
[2025-07-14 14:47:34][info] Route added: [POST] /inventory/products/edit
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/categories
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/stock
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/movements
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/reports
[2025-07-14 14:47:34][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 14:47:34][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 14:47:34][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 14:47:34][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 14:47:34][info] InventoryCore plugin initialized successfully.
[2025-07-14 14:47:34][info] InventoryCore plugin loaded successfully.
[2025-07-14 14:47:34][info] Route added: [GET] /inventory
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/products
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/products/new
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/products/edit
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/categories
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/stock
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/movements
[2025-07-14 14:47:34][info] Route added: [GET] /inventory/reports
[2025-07-14 14:47:34][info] Loading plugin: System Manager (system_manager)
[2025-07-14 14:47:34][info] Route added: [GET] /login
[2025-07-14 14:47:34][info] Route added: [POST] /login
[2025-07-14 14:47:34][info] Route added: [GET] /admin
[2025-07-14 14:47:34][info] Route added: [GET] /admin/usuarios
[2025-07-14 14:47:34][info] Route added: [GET] /logout
[2025-07-14 14:47:34][info] Route added: [GET] /admin/plugins
[2025-07-14 14:47:34][info] Route added: [POST] /admin/plugins
[2025-07-14 14:47:34][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 14:47:34][info] Route added: [GET] /admin/logs
[2025-07-14 14:47:34][info] Route added: [GET] /usuarios
[2025-07-14 14:47:34][info] Route added: [GET] /usuarios/novo
[2025-07-14 14:47:34][info] Route added: [POST] /usuarios/novo
[2025-07-14 14:47:34][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 14:47:34][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 14:47:34][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 14:47:34][info] Route added: [POST] /api/token
[2025-07-14 14:47:34][info] Route added: [GET] /api/users
[2025-07-14 14:47:34][info] Route added: [POST] /api/users
[2025-07-14 14:47:34][info] Route added: [GET] /api/users/{id}
[2025-07-14 14:47:34][info] Route added: [PUT] /api/users/{id}
[2025-07-14 14:47:34][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 14:47:34][info] Plugin system_manager carregado com sucesso.
[2025-07-14 14:47:34][info] Route added: [GET] /admin
[2025-07-14 14:47:34][info] Route added: [GET] /login
[2025-07-14 14:47:34][info] Route added: [GET] /logout
[2025-07-14 14:47:34][info] Route added: [GET] /admin/usuarios
[2025-07-14 14:47:34][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 14:47:34][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 14:47:34][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 14:47:34][info] Route added: [GET] /webhook
[2025-07-14 14:47:34][info] Finished loading plugins.
[2025-07-14 14:47:43][info] ThemeHandler initialized. Active theme: default
[2025-07-14 14:47:43][info] Database connection established successfully with driver: mysql.
[2025-07-14 14:47:43][info] DatabaseHandler initialized.
[2025-07-14 14:47:43][info] AuthHandler initialized. Session started.
[2025-07-14 14:47:43][info] Route added: [GET] /
[2025-07-14 14:47:43][info] RoutesHandler initialized.
[2025-07-14 14:47:43][info] PluginHandler initialized. Loading plugins...
[2025-07-14 14:47:43][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 14:47:43][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 14:47:43][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 14:47:43][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 14:47:43][info] Route added: [GET] /clientes
[2025-07-14 14:47:43][info] Route added: [GET] /clientes/novo
[2025-07-14 14:47:43][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 14:47:43][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 14:47:43][info] Database table created/verified successfully.
[2025-07-14 14:47:43][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 14:47:43][info] Database table created/verified successfully.
[2025-07-14 14:47:43][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 14:47:43][info] Database table created/verified successfully.
[2025-07-14 14:47:43][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 14:47:43][info] Database table created/verified successfully.
[2025-07-14 14:47:43][info] Route added: [GET] /inventory
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/products
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/products/new
[2025-07-14 14:47:43][info] Route added: [POST] /inventory/products/new
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/products/edit
[2025-07-14 14:47:43][info] Route added: [POST] /inventory/products/edit
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/categories
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/stock
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/movements
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/reports
[2025-07-14 14:47:43][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 14:47:43][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 14:47:43][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 14:47:43][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 14:47:43][info] InventoryCore plugin initialized successfully.
[2025-07-14 14:47:43][info] InventoryCore plugin loaded successfully.
[2025-07-14 14:47:43][info] Route added: [GET] /inventory
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/products
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/products/new
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/products/edit
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/categories
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/stock
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/movements
[2025-07-14 14:47:43][info] Route added: [GET] /inventory/reports
[2025-07-14 14:47:43][info] Loading plugin: System Manager (system_manager)
[2025-07-14 14:47:43][info] Route added: [GET] /login
[2025-07-14 14:47:43][info] Route added: [POST] /login
[2025-07-14 14:47:43][info] Route added: [GET] /admin
[2025-07-14 14:47:43][info] Route added: [GET] /admin/usuarios
[2025-07-14 14:47:43][info] Route added: [GET] /logout
[2025-07-14 14:47:43][info] Route added: [GET] /admin/plugins
[2025-07-14 14:47:43][info] Route added: [POST] /admin/plugins
[2025-07-14 14:47:43][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 14:47:43][info] Route added: [GET] /admin/logs
[2025-07-14 14:47:43][info] Route added: [GET] /usuarios
[2025-07-14 14:47:43][info] Route added: [GET] /usuarios/novo
[2025-07-14 14:47:43][info] Route added: [POST] /usuarios/novo
[2025-07-14 14:47:43][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 14:47:43][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 14:47:43][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 14:47:43][info] Route added: [POST] /api/token
[2025-07-14 14:47:43][info] Route added: [GET] /api/users
[2025-07-14 14:47:43][info] Route added: [POST] /api/users
[2025-07-14 14:47:43][info] Route added: [GET] /api/users/{id}
[2025-07-14 14:47:43][info] Route added: [PUT] /api/users/{id}
[2025-07-14 14:47:43][info] Route added: [DELETE] /api/users/{id}
[2025-07-14 14:47:43][info] Plugin system_manager carregado com sucesso.
[2025-07-14 14:47:43][info] Route added: [GET] /admin
[2025-07-14 14:47:43][info] Route added: [GET] /login
[2025-07-14 14:47:43][info] Route added: [GET] /logout
[2025-07-14 14:47:43][info] Route added: [GET] /admin/usuarios
[2025-07-14 14:47:43][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 14:47:43][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 14:47:43][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 14:47:43][info] Route added: [GET] /webhook
[2025-07-14 14:47:43][info] Finished loading plugins.
[2025-07-14 14:47:43][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"9d05f929343cc761a69accbf6bc86f0e2c5c1ec393e1dfa7d51c6039050e5721","SSL_SESSION_RESUMED":"Initial","HTTP_HOST":"localhost","HTTP_CONNECTION":"keep-alive","HTTP_SEC_CH_UA":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\", \"Google Chrome\";v=\"138\"","HTTP_SEC_CH_UA_MOBILE":"?0","HTTP_SEC_CH_UA_PLATFORM":"\"Windows\"","HTTP_UPGRADE_INSECURE_REQUESTS":"1","HTTP_USER_AGENT":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/138.0.0.0 Safari\/537.36","HTTP_ACCEPT":"text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/avif,image\/webp,image\/apng,*\/*;q=0.8,application\/signed-exchange;v=b3;q=0.7","HTTP_SEC_FETCH_SITE":"none","HTTP_SEC_FETCH_MODE":"navigate","HTTP_SEC_FETCH_USER":"?1","HTTP_SEC_FETCH_DEST":"document","HTTP_ACCEPT_ENCODING":"gzip, deflate, br, zstd","HTTP_ACCEPT_LANGUAGE":"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7","HTTP_COOKIE":"httpOnlyToken=14a816e2-ed0c-4bff-86c8-4033a9155148; accessToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjQwYTMwMmUwLTgxNzctNDBlYS05NTFjLTdlNzExMTE4N2FhYiJ9.eyJpYXQiOjE3NTA5NTgzNjQsImV4cCI6MTc4MjQ5NDM2NCwic3ViIjoiMTU0MTU0NjQ3MjA0NTAyMDE2MSJ9.EX3QSsrAjoDoK5oyYU-z0JSfAZY33gAXZN2oNR7CQno; accessTokenVersion=1; PHPSESSID=nd7edkhladefta3h9ndrm6kpuq","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"60462","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752497263.674467,"REQUEST_TIME":1752497263}
[2025-07-14 16:47:05][info] ThemeHandler initialized. Active theme: default
[2025-07-14 16:47:05][info] Database connection established successfully with driver: mysql.
[2025-07-14 16:47:05][info] DatabaseHandler initialized.
[2025-07-14 16:47:05][info] AuthHandler initialized. Session started.
[2025-07-14 16:47:05][info] Route added: [GET] /
[2025-07-14 16:47:05][info] RoutesHandler initialized.
[2025-07-14 16:47:05][info] PluginHandler initialized. Loading plugins...
[2025-07-14 16:47:05][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 16:47:05][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 16:47:05][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 16:47:05][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 16:47:05][info] Route added: [GET] /clientes
[2025-07-14 16:47:05][info] Route added: [GET] /clientes/novo
[2025-07-14 16:47:05][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 16:47:05][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 16:47:05][info] Database table created/verified successfully.
[2025-07-14 16:47:05][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 16:47:05][info] Database table created/verified successfully.
[2025-07-14 16:47:05][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 16:47:05][info] Database table created/verified successfully.
[2025-07-14 16:47:05][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 16:47:05][info] Database table created/verified successfully.
[2025-07-14 16:47:05][info] Route added: [GET] /inventory
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/products
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/products/new
[2025-07-14 16:47:05][info] Route added: [POST] /inventory/products/new
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/products/edit
[2025-07-14 16:47:05][info] Route added: [POST] /inventory/products/edit
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/categories
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/stock
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/movements
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/reports
[2025-07-14 16:47:05][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 16:47:05][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 16:47:05][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 16:47:05][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 16:47:05][info] InventoryCore plugin initialized successfully.
[2025-07-14 16:47:05][info] InventoryCore plugin loaded successfully.
[2025-07-14 16:47:05][info] Route added: [GET] /inventory
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/products
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/products/new
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/products/edit
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/categories
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/stock
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/movements
[2025-07-14 16:47:05][info] Route added: [GET] /inventory/reports
[2025-07-14 16:47:05][info] Loading plugin: System Manager (system_manager)
[2025-07-14 16:47:05][info] Route added: [GET] /login
[2025-07-14 16:47:05][info] Route added: [POST] /login
[2025-07-14 16:47:05][info] Route added: [GET] /admin
[2025-07-14 16:47:05][info] Route added: [GET] /admin/usuarios
[2025-07-14 16:47:05][info] Route added: [GET] /logout
[2025-07-14 16:47:05][info] Route added: [GET] /admin/plugins
[2025-07-14 16:47:05][info] Route added: [POST] /admin/plugins
[2025-07-14 16:47:05][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 16:47:05][info] Route added: [GET] /admin/logs
[2025-07-14 16:47:05][info] Route added: [GET] /usuarios
[2025-07-14 16:47:05][info] Route added: [GET] /usuarios/novo
[2025-07-14 16:47:05][info] Route added: [POST] /usuarios/novo
[2025-07-14 16:47:05][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 16:47:05][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 16:47:05][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 16:47:05][info] Route added: [POST] /api/token
[2025-07-14 16:47:05][info] Route added: [GET] /api/users
[2025-07-14 16:47:05][info] Route added: [POST] /api/users
[2025-07-14 16:47:05][info] Route added: [PUT] /api/users
[2025-07-14 16:47:05][info] Route added: [DELETE] /api/users
[2025-07-14 16:47:05][info] Plugin system_manager carregado com sucesso.
[2025-07-14 16:47:05][info] Route added: [GET] /admin
[2025-07-14 16:47:05][info] Route added: [GET] /login
[2025-07-14 16:47:05][info] Route added: [GET] /logout
[2025-07-14 16:47:05][info] Route added: [GET] /admin/usuarios
[2025-07-14 16:47:05][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 16:47:05][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 16:47:05][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 16:47:05][info] Route added: [GET] /webhook
[2025-07-14 16:47:05][info] Finished loading plugins.
[2025-07-14 16:47:05][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"b39a0f22d62ad4350f81ea2dbbc10c629fa2311e4c5b71007aa874de47e023ea","SSL_SESSION_RESUMED":"Initial","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"33c03b89-c2cd-41f5-81f3-ae3069a8b2d8","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","CONTENT_LENGTH":"0","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51138","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752504425.130747,"REQUEST_TIME":1752504425}
[2025-07-14 16:47:05][debug] SQL Query: SELECT id, username, senha, tipo, ativo FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 16:47:05][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at) VALUES (?, ?, ?) Params: [1,"3dd14672794cc89fcc1238e4532626d039ac150e9b8af78c41d41a1e3b93260d","2025-07-14 16:47:05"]
[2025-07-14 16:51:15][info] ThemeHandler initialized. Active theme: default
[2025-07-14 16:51:15][info] Database connection established successfully with driver: mysql.
[2025-07-14 16:51:15][info] DatabaseHandler initialized.
[2025-07-14 16:51:15][info] AuthHandler initialized. Session started.
[2025-07-14 16:51:15][info] Route added: [GET] /
[2025-07-14 16:51:15][info] RoutesHandler initialized.
[2025-07-14 16:51:15][info] PluginHandler initialized. Loading plugins...
[2025-07-14 16:51:15][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 16:51:15][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 16:51:15][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 16:51:15][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 16:51:15][info] Route added: [GET] /clientes
[2025-07-14 16:51:15][info] Route added: [GET] /clientes/novo
[2025-07-14 16:51:15][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 16:51:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 16:51:15][info] Database table created/verified successfully.
[2025-07-14 16:51:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 16:51:15][info] Database table created/verified successfully.
[2025-07-14 16:51:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 16:51:15][info] Database table created/verified successfully.
[2025-07-14 16:51:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 16:51:15][info] Database table created/verified successfully.
[2025-07-14 16:51:15][info] Route added: [GET] /inventory
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/products
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/products/new
[2025-07-14 16:51:15][info] Route added: [POST] /inventory/products/new
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/products/edit
[2025-07-14 16:51:15][info] Route added: [POST] /inventory/products/edit
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/categories
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/stock
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/movements
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/reports
[2025-07-14 16:51:15][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 16:51:15][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 16:51:15][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 16:51:15][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 16:51:15][info] InventoryCore plugin initialized successfully.
[2025-07-14 16:51:15][info] InventoryCore plugin loaded successfully.
[2025-07-14 16:51:15][info] Route added: [GET] /inventory
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/products
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/products/new
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/products/edit
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/categories
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/stock
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/movements
[2025-07-14 16:51:15][info] Route added: [GET] /inventory/reports
[2025-07-14 16:51:15][info] Loading plugin: System Manager (system_manager)
[2025-07-14 16:51:15][info] Route added: [GET] /login
[2025-07-14 16:51:15][info] Route added: [POST] /login
[2025-07-14 16:51:15][info] Route added: [GET] /admin
[2025-07-14 16:51:15][info] Route added: [GET] /admin/usuarios
[2025-07-14 16:51:15][info] Route added: [GET] /logout
[2025-07-14 16:51:15][info] Route added: [GET] /admin/plugins
[2025-07-14 16:51:15][info] Route added: [POST] /admin/plugins
[2025-07-14 16:51:15][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 16:51:15][info] Route added: [GET] /admin/logs
[2025-07-14 16:51:15][info] Route added: [GET] /usuarios
[2025-07-14 16:51:15][info] Route added: [GET] /usuarios/novo
[2025-07-14 16:51:15][info] Route added: [POST] /usuarios/novo
[2025-07-14 16:51:15][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 16:51:15][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 16:51:15][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 16:51:15][info] Route added: [POST] /api/token
[2025-07-14 16:51:15][info] Route added: [GET] /api/users
[2025-07-14 16:51:15][info] Route added: [POST] /api/users
[2025-07-14 16:51:15][info] Route added: [PUT] /api/users
[2025-07-14 16:51:15][info] Route added: [DELETE] /api/users
[2025-07-14 16:51:15][info] Plugin system_manager carregado com sucesso.
[2025-07-14 16:51:15][info] Route added: [GET] /admin
[2025-07-14 16:51:15][info] Route added: [GET] /login
[2025-07-14 16:51:15][info] Route added: [GET] /logout
[2025-07-14 16:51:15][info] Route added: [GET] /admin/usuarios
[2025-07-14 16:51:15][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 16:51:15][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 16:51:15][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 16:51:15][info] Route added: [GET] /webhook
[2025-07-14 16:51:15][info] Finished loading plugins.
[2025-07-14 16:51:15][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"f590eb209ec8cedfbec41a00a99ad08dca70b889b4ea262fd8586948a8e469ca","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"d1a19052-2782-47a0-84ac-cfa940e38d20","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51387","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752504675.80115,"REQUEST_TIME":1752504675}
[2025-07-14 16:53:01][info] ThemeHandler initialized. Active theme: default
[2025-07-14 16:53:01][info] Database connection established successfully with driver: mysql.
[2025-07-14 16:53:01][info] DatabaseHandler initialized.
[2025-07-14 16:53:01][info] AuthHandler initialized. Session started.
[2025-07-14 16:53:01][info] Route added: [GET] /
[2025-07-14 16:53:01][info] RoutesHandler initialized.
[2025-07-14 16:53:01][info] PluginHandler initialized. Loading plugins...
[2025-07-14 16:53:01][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 16:53:01][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 16:53:01][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 16:53:01][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 16:53:01][info] Route added: [GET] /clientes
[2025-07-14 16:53:01][info] Route added: [GET] /clientes/novo
[2025-07-14 16:53:01][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 16:53:01][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 16:53:01][info] Database table created/verified successfully.
[2025-07-14 16:53:01][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 16:53:01][info] Database table created/verified successfully.
[2025-07-14 16:53:01][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 16:53:01][info] Database table created/verified successfully.
[2025-07-14 16:53:01][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 16:53:01][info] Database table created/verified successfully.
[2025-07-14 16:53:01][info] Route added: [GET] /inventory
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/products
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/products/new
[2025-07-14 16:53:01][info] Route added: [POST] /inventory/products/new
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/products/edit
[2025-07-14 16:53:01][info] Route added: [POST] /inventory/products/edit
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/categories
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/stock
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/movements
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/reports
[2025-07-14 16:53:01][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 16:53:01][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 16:53:01][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 16:53:01][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 16:53:01][info] InventoryCore plugin initialized successfully.
[2025-07-14 16:53:01][info] InventoryCore plugin loaded successfully.
[2025-07-14 16:53:01][info] Route added: [GET] /inventory
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/products
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/products/new
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/products/edit
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/categories
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/stock
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/movements
[2025-07-14 16:53:01][info] Route added: [GET] /inventory/reports
[2025-07-14 16:53:01][info] Loading plugin: System Manager (system_manager)
[2025-07-14 16:53:01][info] Route added: [GET] /login
[2025-07-14 16:53:01][info] Route added: [POST] /login
[2025-07-14 16:53:01][info] Route added: [GET] /admin
[2025-07-14 16:53:01][info] Route added: [GET] /admin/usuarios
[2025-07-14 16:53:01][info] Route added: [GET] /logout
[2025-07-14 16:53:01][info] Route added: [GET] /admin/plugins
[2025-07-14 16:53:01][info] Route added: [POST] /admin/plugins
[2025-07-14 16:53:01][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 16:53:01][info] Route added: [GET] /admin/logs
[2025-07-14 16:53:01][info] Route added: [GET] /usuarios
[2025-07-14 16:53:01][info] Route added: [GET] /usuarios/novo
[2025-07-14 16:53:01][info] Route added: [POST] /usuarios/novo
[2025-07-14 16:53:01][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 16:53:01][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 16:53:01][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 16:53:01][info] Route added: [POST] /api/token
[2025-07-14 16:53:01][info] Route added: [GET] /api/users
[2025-07-14 16:53:01][info] Route added: [POST] /api/users
[2025-07-14 16:53:01][info] Route added: [PUT] /api/users
[2025-07-14 16:53:01][info] Route added: [DELETE] /api/users
[2025-07-14 16:53:01][info] Plugin system_manager carregado com sucesso.
[2025-07-14 16:53:01][info] Route added: [GET] /admin
[2025-07-14 16:53:01][info] Route added: [GET] /login
[2025-07-14 16:53:01][info] Route added: [GET] /logout
[2025-07-14 16:53:01][info] Route added: [GET] /admin/usuarios
[2025-07-14 16:53:01][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 16:53:01][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 16:53:01][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 16:53:01][info] Route added: [GET] /webhook
[2025-07-14 16:53:01][info] Finished loading plugins.
[2025-07-14 16:53:01][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"cbcc64bc780c59dafdb31e62e9280e4066d03b4e8ef8669a63ba1d49b588ad24","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"c9261ee2-2214-4af8-b406-597e8b338db8","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","CONTENT_LENGTH":"0","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51473","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752504781.646017,"REQUEST_TIME":1752504781}
[2025-07-14 16:53:01][debug] SQL Query: SELECT id, username, senha, tipo, ativo FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 16:53:02][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at) VALUES (?, ?, ?) Params: [1,"0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","2025-07-14 16:53:02"]
[2025-07-14 16:53:49][info] ThemeHandler initialized. Active theme: default
[2025-07-14 16:53:49][info] Database connection established successfully with driver: mysql.
[2025-07-14 16:53:49][info] DatabaseHandler initialized.
[2025-07-14 16:53:49][info] AuthHandler initialized. Session started.
[2025-07-14 16:53:49][info] Route added: [GET] /
[2025-07-14 16:53:49][info] RoutesHandler initialized.
[2025-07-14 16:53:49][info] PluginHandler initialized. Loading plugins...
[2025-07-14 16:53:49][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 16:53:49][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 16:53:49][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 16:53:49][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 16:53:49][info] Route added: [GET] /clientes
[2025-07-14 16:53:49][info] Route added: [GET] /clientes/novo
[2025-07-14 16:53:49][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 16:53:49][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 16:53:49][info] Database table created/verified successfully.
[2025-07-14 16:53:49][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 16:53:49][info] Database table created/verified successfully.
[2025-07-14 16:53:49][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 16:53:49][info] Database table created/verified successfully.
[2025-07-14 16:53:49][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 16:53:49][info] Database table created/verified successfully.
[2025-07-14 16:53:49][info] Route added: [GET] /inventory
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/products
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/products/new
[2025-07-14 16:53:49][info] Route added: [POST] /inventory/products/new
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/products/edit
[2025-07-14 16:53:49][info] Route added: [POST] /inventory/products/edit
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/categories
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/stock
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/movements
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/reports
[2025-07-14 16:53:49][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 16:53:49][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 16:53:49][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 16:53:49][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 16:53:49][info] InventoryCore plugin initialized successfully.
[2025-07-14 16:53:49][info] InventoryCore plugin loaded successfully.
[2025-07-14 16:53:49][info] Route added: [GET] /inventory
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/products
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/products/new
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/products/edit
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/categories
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/stock
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/movements
[2025-07-14 16:53:49][info] Route added: [GET] /inventory/reports
[2025-07-14 16:53:49][info] Loading plugin: System Manager (system_manager)
[2025-07-14 16:53:49][info] Route added: [GET] /login
[2025-07-14 16:53:49][info] Route added: [POST] /login
[2025-07-14 16:53:49][info] Route added: [GET] /admin
[2025-07-14 16:53:49][info] Route added: [GET] /admin/usuarios
[2025-07-14 16:53:49][info] Route added: [GET] /logout
[2025-07-14 16:53:49][info] Route added: [GET] /admin/plugins
[2025-07-14 16:53:49][info] Route added: [POST] /admin/plugins
[2025-07-14 16:53:49][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 16:53:49][info] Route added: [GET] /admin/logs
[2025-07-14 16:53:49][info] Route added: [GET] /usuarios
[2025-07-14 16:53:49][info] Route added: [GET] /usuarios/novo
[2025-07-14 16:53:49][info] Route added: [POST] /usuarios/novo
[2025-07-14 16:53:49][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 16:53:49][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 16:53:49][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 16:53:49][info] Route added: [POST] /api/token
[2025-07-14 16:53:49][info] Route added: [GET] /api/users
[2025-07-14 16:53:49][info] Route added: [POST] /api/users
[2025-07-14 16:53:49][info] Route added: [PUT] /api/users
[2025-07-14 16:53:49][info] Route added: [DELETE] /api/users
[2025-07-14 16:53:49][info] Plugin system_manager carregado com sucesso.
[2025-07-14 16:53:49][info] Route added: [GET] /admin
[2025-07-14 16:53:49][info] Route added: [GET] /login
[2025-07-14 16:53:49][info] Route added: [GET] /logout
[2025-07-14 16:53:49][info] Route added: [GET] /admin/usuarios
[2025-07-14 16:53:49][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 16:53:49][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 16:53:49][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 16:53:49][info] Route added: [GET] /webhook
[2025-07-14 16:53:49][info] Finished loading plugins.
[2025-07-14 16:53:49][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"448529e38ca2c64bc89862e0fbb4ae6dbcfa6de81b8fdf1084139dcc1965fc21","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"ac848a40-5308-4768-a38c-6e9eb78b8cc3","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51519","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752504829.340919,"REQUEST_TIME":1752504829}
[2025-07-14 16:53:49][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 16:53:49][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:10:02][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:10:02][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:10:02][info] DatabaseHandler initialized.
[2025-07-14 18:10:03][info] AuthHandler initialized. Session started.
[2025-07-14 18:10:03][info] Route added: [GET] /
[2025-07-14 18:10:03][info] RoutesHandler initialized.
[2025-07-14 18:10:03][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:10:03][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:10:03][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:10:03][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:10:03][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:10:03][info] Route added: [GET] /clientes
[2025-07-14 18:10:03][info] Route added: [GET] /clientes/novo
[2025-07-14 18:10:03][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:10:03][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:10:03][info] Database table created/verified successfully.
[2025-07-14 18:10:03][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:10:03][info] Database table created/verified successfully.
[2025-07-14 18:10:03][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:10:03][info] Database table created/verified successfully.
[2025-07-14 18:10:03][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:10:03][info] Database table created/verified successfully.
[2025-07-14 18:10:03][info] Route added: [GET] /inventory
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/products
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:10:03][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:10:03][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/categories
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/stock
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/movements
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/reports
[2025-07-14 18:10:03][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:10:03][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:10:03][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:10:03][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:10:03][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:10:03][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:10:03][info] Route added: [GET] /inventory
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/products
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/categories
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/stock
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/movements
[2025-07-14 18:10:03][info] Route added: [GET] /inventory/reports
[2025-07-14 18:10:03][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:10:03][info] Route added: [GET] /login
[2025-07-14 18:10:03][info] Route added: [POST] /login
[2025-07-14 18:10:03][info] Route added: [GET] /admin
[2025-07-14 18:10:03][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:10:03][info] Route added: [GET] /logout
[2025-07-14 18:10:03][info] Route added: [GET] /admin/plugins
[2025-07-14 18:10:03][info] Route added: [POST] /admin/plugins
[2025-07-14 18:10:03][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:10:03][info] Route added: [GET] /admin/logs
[2025-07-14 18:10:03][info] Route added: [GET] /usuarios
[2025-07-14 18:10:03][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:10:03][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:10:03][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:10:03][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:10:03][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:10:03][info] Route added: [POST] /api/token
[2025-07-14 18:10:03][info] Route added: [GET] /api/users
[2025-07-14 18:10:03][info] Route added: [POST] /api/users
[2025-07-14 18:10:03][info] Route added: [PUT] /api/users
[2025-07-14 18:10:03][info] Route added: [DELETE] /api/users
[2025-07-14 18:10:03][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:10:03][info] Route added: [GET] /admin
[2025-07-14 18:10:03][info] Route added: [GET] /login
[2025-07-14 18:10:03][info] Route added: [GET] /logout
[2025-07-14 18:10:03][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:10:03][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:10:03][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:10:03][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:10:03][info] Route added: [GET] /webhook
[2025-07-14 18:10:03][info] Finished loading plugins.
[2025-07-14 18:10:03][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"2bba19d78d11677a8419e37032c5ced75eb31ecb0d1b7afd998abfa6a0a4f8a4","SSL_SESSION_RESUMED":"Initial","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"fedff58c-61f3-4d1e-a0a3-7c3b8b2bb343","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"53921","REDIRECT_URL":"\/api\/users","REDIRECT_QUERY_STRING":"id=1","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"id=1","REQUEST_URI":"\/api\/users?id=1","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509402.971049,"REQUEST_TIME":1752509402}
[2025-07-14 18:10:03][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:12:07][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:12:07][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:12:07][info] DatabaseHandler initialized.
[2025-07-14 18:12:07][info] AuthHandler initialized. Session started.
[2025-07-14 18:12:07][info] Route added: [GET] /
[2025-07-14 18:12:07][info] RoutesHandler initialized.
[2025-07-14 18:12:07][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:12:07][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:12:07][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:12:07][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:12:07][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:12:07][info] Route added: [GET] /clientes
[2025-07-14 18:12:07][info] Route added: [GET] /clientes/novo
[2025-07-14 18:12:07][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:12:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:12:07][info] Database table created/verified successfully.
[2025-07-14 18:12:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:12:07][info] Database table created/verified successfully.
[2025-07-14 18:12:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:12:07][info] Database table created/verified successfully.
[2025-07-14 18:12:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:12:07][info] Database table created/verified successfully.
[2025-07-14 18:12:07][info] Route added: [GET] /inventory
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/products
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:12:07][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:12:07][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/categories
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/stock
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/movements
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/reports
[2025-07-14 18:12:07][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:12:07][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:12:07][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:12:07][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:12:07][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:12:07][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:12:07][info] Route added: [GET] /inventory
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/products
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/categories
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/stock
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/movements
[2025-07-14 18:12:07][info] Route added: [GET] /inventory/reports
[2025-07-14 18:12:07][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:12:07][info] Route added: [GET] /login
[2025-07-14 18:12:07][info] Route added: [POST] /login
[2025-07-14 18:12:07][info] Route added: [GET] /admin
[2025-07-14 18:12:07][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:12:07][info] Route added: [GET] /logout
[2025-07-14 18:12:07][info] Route added: [GET] /admin/plugins
[2025-07-14 18:12:07][info] Route added: [POST] /admin/plugins
[2025-07-14 18:12:07][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:12:07][info] Route added: [GET] /admin/logs
[2025-07-14 18:12:07][info] Route added: [GET] /usuarios
[2025-07-14 18:12:07][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:12:07][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:12:07][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:12:07][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:12:07][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:12:07][info] Route added: [POST] /api/token
[2025-07-14 18:12:07][info] Route added: [GET] /api/users
[2025-07-14 18:12:07][info] Route added: [POST] /api/users
[2025-07-14 18:12:07][info] Route added: [PUT] /api/users
[2025-07-14 18:12:07][info] Route added: [DELETE] /api/users
[2025-07-14 18:12:07][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:12:07][info] Route added: [GET] /admin
[2025-07-14 18:12:07][info] Route added: [GET] /login
[2025-07-14 18:12:07][info] Route added: [GET] /logout
[2025-07-14 18:12:07][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:12:07][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:12:07][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:12:07][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:12:07][info] Route added: [GET] /webhook
[2025-07-14 18:12:07][info] Finished loading plugins.
[2025-07-14 18:12:07][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"b63dee4b0d523bce5a680b3cc7bf2ea9a1893d5293b0d8ef3c7217b039ff2a1b","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"b661dcef-b06f-488c-9d06-b53704ee6b4a","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54040","REDIRECT_URL":"\/api\/users","REDIRECT_QUERY_STRING":"id=1","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"id=1","REQUEST_URI":"\/api\/users?id=1","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509527.238524,"REQUEST_TIME":1752509527}
[2025-07-14 18:12:07][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:12:07][debug] SQL Query: SELECT * FROM users WHERE id = ? Params: ["1"]
[2025-07-14 18:15:46][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:15:46][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:15:46][info] DatabaseHandler initialized.
[2025-07-14 18:15:46][info] AuthHandler initialized. Session started.
[2025-07-14 18:15:46][info] Route added: [GET] /
[2025-07-14 18:15:46][info] RoutesHandler initialized.
[2025-07-14 18:15:46][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:15:46][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:15:46][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:15:46][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:15:46][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:15:46][info] Route added: [GET] /clientes
[2025-07-14 18:15:46][info] Route added: [GET] /clientes/novo
[2025-07-14 18:15:46][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:15:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:15:46][info] Database table created/verified successfully.
[2025-07-14 18:15:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:15:46][info] Database table created/verified successfully.
[2025-07-14 18:15:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:15:46][info] Database table created/verified successfully.
[2025-07-14 18:15:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:15:46][info] Database table created/verified successfully.
[2025-07-14 18:15:46][info] Route added: [GET] /inventory
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/products
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:15:46][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:15:46][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/categories
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/stock
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/movements
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/reports
[2025-07-14 18:15:46][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:15:46][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:15:46][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:15:46][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:15:46][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:15:46][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:15:46][info] Route added: [GET] /inventory
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/products
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/categories
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/stock
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/movements
[2025-07-14 18:15:46][info] Route added: [GET] /inventory/reports
[2025-07-14 18:15:46][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:15:46][info] Route added: [GET] /login
[2025-07-14 18:15:46][info] Route added: [POST] /login
[2025-07-14 18:15:46][info] Route added: [GET] /admin
[2025-07-14 18:15:46][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:15:46][info] Route added: [GET] /logout
[2025-07-14 18:15:46][info] Route added: [GET] /admin/plugins
[2025-07-14 18:15:46][info] Route added: [POST] /admin/plugins
[2025-07-14 18:15:46][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:15:46][info] Route added: [GET] /admin/logs
[2025-07-14 18:15:46][info] Route added: [GET] /usuarios
[2025-07-14 18:15:46][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:15:46][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:15:46][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:15:46][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:15:46][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:15:46][info] Route added: [POST] /api/token
[2025-07-14 18:15:46][info] Route added: [GET] /api/users
[2025-07-14 18:15:46][info] Route added: [POST] /api/users
[2025-07-14 18:15:46][info] Route added: [PUT] /api/users
[2025-07-14 18:15:46][info] Route added: [DELETE] /api/users
[2025-07-14 18:15:46][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:15:46][info] Route added: [GET] /admin
[2025-07-14 18:15:46][info] Route added: [GET] /login
[2025-07-14 18:15:46][info] Route added: [GET] /logout
[2025-07-14 18:15:46][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:15:46][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:15:46][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:15:46][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:15:46][info] Route added: [GET] /webhook
[2025-07-14 18:15:46][info] Finished loading plugins.
[2025-07-14 18:15:46][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"dc25eea140cf77b0ff6e3582c8ca074f84992ee41ed64d61d4ecb30af087ffb7","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"fc98bbc4-fa4c-4f2f-be76-21d3926f18f3","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54235","REDIRECT_URL":"\/api\/users","REDIRECT_QUERY_STRING":"id=1","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"id=1","REQUEST_URI":"\/api\/users?id=1","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509746.01306,"REQUEST_TIME":1752509746}
[2025-07-14 18:15:46][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:15:46][debug] SQL Query: SELECT * FROM users WHERE id = ? Params: ["1"]
[2025-07-14 18:15:52][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:15:52][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:15:52][info] DatabaseHandler initialized.
[2025-07-14 18:15:52][info] AuthHandler initialized. Session started.
[2025-07-14 18:15:52][info] Route added: [GET] /
[2025-07-14 18:15:52][info] RoutesHandler initialized.
[2025-07-14 18:15:52][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:15:52][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:15:52][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:15:52][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:15:52][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:15:52][info] Route added: [GET] /clientes
[2025-07-14 18:15:52][info] Route added: [GET] /clientes/novo
[2025-07-14 18:15:52][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:15:52][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:15:52][info] Database table created/verified successfully.
[2025-07-14 18:15:52][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:15:52][info] Database table created/verified successfully.
[2025-07-14 18:15:52][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:15:52][info] Database table created/verified successfully.
[2025-07-14 18:15:52][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:15:52][info] Database table created/verified successfully.
[2025-07-14 18:15:52][info] Route added: [GET] /inventory
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/products
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:15:52][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:15:52][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/categories
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/stock
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/movements
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/reports
[2025-07-14 18:15:52][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:15:52][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:15:52][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:15:52][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:15:52][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:15:52][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:15:52][info] Route added: [GET] /inventory
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/products
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/categories
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/stock
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/movements
[2025-07-14 18:15:52][info] Route added: [GET] /inventory/reports
[2025-07-14 18:15:52][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:15:52][info] Route added: [GET] /login
[2025-07-14 18:15:52][info] Route added: [POST] /login
[2025-07-14 18:15:52][info] Route added: [GET] /admin
[2025-07-14 18:15:52][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:15:52][info] Route added: [GET] /logout
[2025-07-14 18:15:52][info] Route added: [GET] /admin/plugins
[2025-07-14 18:15:52][info] Route added: [POST] /admin/plugins
[2025-07-14 18:15:52][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:15:52][info] Route added: [GET] /admin/logs
[2025-07-14 18:15:52][info] Route added: [GET] /usuarios
[2025-07-14 18:15:52][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:15:52][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:15:52][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:15:52][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:15:52][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:15:52][info] Route added: [POST] /api/token
[2025-07-14 18:15:52][info] Route added: [GET] /api/users
[2025-07-14 18:15:52][info] Route added: [POST] /api/users
[2025-07-14 18:15:52][info] Route added: [PUT] /api/users
[2025-07-14 18:15:52][info] Route added: [DELETE] /api/users
[2025-07-14 18:15:52][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:15:52][info] Route added: [GET] /admin
[2025-07-14 18:15:52][info] Route added: [GET] /login
[2025-07-14 18:15:52][info] Route added: [GET] /logout
[2025-07-14 18:15:52][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:15:52][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:15:52][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:15:52][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:15:52][info] Route added: [GET] /webhook
[2025-07-14 18:15:52][info] Finished loading plugins.
[2025-07-14 18:15:52][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"d1d718e1353beda0468761280e652a3e160bf5cf13c0eac079f6f8f906d2cae6","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"6ad053da-f94c-488c-be03-53b1626c9788","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54244","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509752.553179,"REQUEST_TIME":1752509752}
[2025-07-14 18:15:52][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:15:52][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:16:42][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:16:42][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:16:42][info] DatabaseHandler initialized.
[2025-07-14 18:16:42][info] AuthHandler initialized. Session started.
[2025-07-14 18:16:42][info] Route added: [GET] /
[2025-07-14 18:16:42][info] RoutesHandler initialized.
[2025-07-14 18:16:42][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:16:42][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:16:42][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:16:42][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:16:42][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:16:42][info] Route added: [GET] /clientes
[2025-07-14 18:16:42][info] Route added: [GET] /clientes/novo
[2025-07-14 18:16:42][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:16:42][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:16:42][info] Database table created/verified successfully.
[2025-07-14 18:16:42][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:16:42][info] Database table created/verified successfully.
[2025-07-14 18:16:42][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:16:42][info] Database table created/verified successfully.
[2025-07-14 18:16:42][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:16:42][info] Database table created/verified successfully.
[2025-07-14 18:16:42][info] Route added: [GET] /inventory
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/products
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:16:42][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:16:42][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/categories
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/stock
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/movements
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/reports
[2025-07-14 18:16:42][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:16:42][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:16:42][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:16:42][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:16:42][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:16:42][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:16:42][info] Route added: [GET] /inventory
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/products
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/categories
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/stock
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/movements
[2025-07-14 18:16:42][info] Route added: [GET] /inventory/reports
[2025-07-14 18:16:42][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:16:42][info] Route added: [GET] /login
[2025-07-14 18:16:42][info] Route added: [POST] /login
[2025-07-14 18:16:42][info] Route added: [GET] /admin
[2025-07-14 18:16:42][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:16:42][info] Route added: [GET] /logout
[2025-07-14 18:16:42][info] Route added: [GET] /admin/plugins
[2025-07-14 18:16:42][info] Route added: [POST] /admin/plugins
[2025-07-14 18:16:42][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:16:42][info] Route added: [GET] /admin/logs
[2025-07-14 18:16:42][info] Route added: [GET] /usuarios
[2025-07-14 18:16:42][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:16:42][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:16:42][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:16:42][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:16:42][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:16:42][info] Route added: [POST] /api/token
[2025-07-14 18:16:42][info] Route added: [GET] /api/users
[2025-07-14 18:16:42][info] Route added: [POST] /api/users
[2025-07-14 18:16:42][info] Route added: [PUT] /api/users
[2025-07-14 18:16:42][info] Route added: [DELETE] /api/users
[2025-07-14 18:16:42][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:16:42][info] Route added: [GET] /admin
[2025-07-14 18:16:42][info] Route added: [GET] /login
[2025-07-14 18:16:42][info] Route added: [GET] /logout
[2025-07-14 18:16:42][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:16:42][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:16:42][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:16:42][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:16:42][info] Route added: [GET] /webhook
[2025-07-14 18:16:42][info] Finished loading plugins.
[2025-07-14 18:16:42][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"52416f89dd5259c7aeed55b54569fbf7e9c9fef43296a7945b835e508574686c","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"9a60a1bf-0218-433a-b988-c44d69ef3780","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","CONTENT_LENGTH":"0","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54321","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752509802.650191,"REQUEST_TIME":1752509802}
[2025-07-14 18:16:42][debug] SQL Query: SELECT id, username, senha, tipo, ativo FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 18:16:42][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at) VALUES (?, ?, ?) Params: [1,"90206b1a6263f8bbadea65ffd2a8ff510b192b95112df42ecd404297e1e44fe2","2025-07-14 18:16:42"]
[2025-07-14 18:17:07][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:17:07][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:17:07][info] DatabaseHandler initialized.
[2025-07-14 18:17:07][info] AuthHandler initialized. Session started.
[2025-07-14 18:17:07][info] Route added: [GET] /
[2025-07-14 18:17:07][info] RoutesHandler initialized.
[2025-07-14 18:17:07][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:17:07][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:17:07][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:17:07][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:17:07][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:17:07][info] Route added: [GET] /clientes
[2025-07-14 18:17:07][info] Route added: [GET] /clientes/novo
[2025-07-14 18:17:07][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:17:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:07][info] Database table created/verified successfully.
[2025-07-14 18:17:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:07][info] Database table created/verified successfully.
[2025-07-14 18:17:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:17:07][info] Database table created/verified successfully.
[2025-07-14 18:17:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:17:07][info] Database table created/verified successfully.
[2025-07-14 18:17:07][info] Route added: [GET] /inventory
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:07][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:07][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:07][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:17:07][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:17:07][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:17:07][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:17:07][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:17:07][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:17:07][info] Route added: [GET] /inventory
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:07][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:07][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:17:07][info] Route added: [GET] /login
[2025-07-14 18:17:07][info] Route added: [POST] /login
[2025-07-14 18:17:07][info] Route added: [GET] /admin
[2025-07-14 18:17:07][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:07][info] Route added: [GET] /logout
[2025-07-14 18:17:07][info] Route added: [GET] /admin/plugins
[2025-07-14 18:17:07][info] Route added: [POST] /admin/plugins
[2025-07-14 18:17:07][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:17:07][info] Route added: [GET] /admin/logs
[2025-07-14 18:17:07][info] Route added: [GET] /usuarios
[2025-07-14 18:17:07][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:17:07][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:17:07][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:17:07][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:17:07][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:17:07][info] Route added: [POST] /api/token
[2025-07-14 18:17:08][info] Route added: [GET] /api/users
[2025-07-14 18:17:08][info] Route added: [POST] /api/users
[2025-07-14 18:17:08][info] Route added: [PUT] /api/users
[2025-07-14 18:17:08][info] Route added: [DELETE] /api/users
[2025-07-14 18:17:08][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:17:08][info] Route added: [GET] /admin
[2025-07-14 18:17:08][info] Route added: [GET] /login
[2025-07-14 18:17:08][info] Route added: [GET] /logout
[2025-07-14 18:17:08][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:08][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:17:08][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:17:08][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:17:08][info] Route added: [GET] /webhook
[2025-07-14 18:17:08][info] Finished loading plugins.
[2025-07-14 18:17:08][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"b25caaa9ed641a884e6747fa4e59b7fd507d7ffe5788cf1c7314e9a5481b57d6","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"790b4cba-89ed-4190-95c7-9fbad3e5811f","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54332","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509827.704196,"REQUEST_TIME":1752509827}
[2025-07-14 18:17:08][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:17:08][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:17:10][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:17:10][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:17:10][info] DatabaseHandler initialized.
[2025-07-14 18:17:10][info] AuthHandler initialized. Session started.
[2025-07-14 18:17:10][info] Route added: [GET] /
[2025-07-14 18:17:10][info] RoutesHandler initialized.
[2025-07-14 18:17:10][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:17:10][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:17:10][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:17:10][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:17:10][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:17:10][info] Route added: [GET] /clientes
[2025-07-14 18:17:10][info] Route added: [GET] /clientes/novo
[2025-07-14 18:17:10][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:17:10][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:10][info] Database table created/verified successfully.
[2025-07-14 18:17:10][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:10][info] Database table created/verified successfully.
[2025-07-14 18:17:10][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:17:10][info] Database table created/verified successfully.
[2025-07-14 18:17:10][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:17:10][info] Database table created/verified successfully.
[2025-07-14 18:17:10][info] Route added: [GET] /inventory
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:10][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:10][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:10][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:17:10][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:17:10][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:17:10][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:17:10][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:17:10][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:17:10][info] Route added: [GET] /inventory
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:10][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:10][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:17:10][info] Route added: [GET] /login
[2025-07-14 18:17:10][info] Route added: [POST] /login
[2025-07-14 18:17:10][info] Route added: [GET] /admin
[2025-07-14 18:17:10][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:10][info] Route added: [GET] /logout
[2025-07-14 18:17:10][info] Route added: [GET] /admin/plugins
[2025-07-14 18:17:10][info] Route added: [POST] /admin/plugins
[2025-07-14 18:17:10][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:17:10][info] Route added: [GET] /admin/logs
[2025-07-14 18:17:10][info] Route added: [GET] /usuarios
[2025-07-14 18:17:10][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:17:10][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:17:10][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:17:10][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:17:10][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:17:10][info] Route added: [POST] /api/token
[2025-07-14 18:17:10][info] Route added: [GET] /api/users
[2025-07-14 18:17:10][info] Route added: [POST] /api/users
[2025-07-14 18:17:10][info] Route added: [PUT] /api/users
[2025-07-14 18:17:10][info] Route added: [DELETE] /api/users
[2025-07-14 18:17:10][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:17:10][info] Route added: [GET] /admin
[2025-07-14 18:17:10][info] Route added: [GET] /login
[2025-07-14 18:17:10][info] Route added: [GET] /logout
[2025-07-14 18:17:10][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:10][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:17:10][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:17:10][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:17:10][info] Route added: [GET] /webhook
[2025-07-14 18:17:10][info] Finished loading plugins.
[2025-07-14 18:17:10][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"b25caaa9ed641a884e6747fa4e59b7fd507d7ffe5788cf1c7314e9a5481b57d6","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"041565a6-3334-4550-ab83-42d7ac66b240","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54332","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509830.621346,"REQUEST_TIME":1752509830}
[2025-07-14 18:17:10][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:17:10][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:17:24][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:17:24][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:17:24][info] DatabaseHandler initialized.
[2025-07-14 18:17:24][info] AuthHandler initialized. Session started.
[2025-07-14 18:17:24][info] Route added: [GET] /
[2025-07-14 18:17:24][info] RoutesHandler initialized.
[2025-07-14 18:17:24][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:17:24][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:17:24][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:17:24][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:17:24][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:17:24][info] Route added: [GET] /clientes
[2025-07-14 18:17:24][info] Route added: [GET] /clientes/novo
[2025-07-14 18:17:24][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:17:24][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:24][info] Database table created/verified successfully.
[2025-07-14 18:17:24][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:24][info] Database table created/verified successfully.
[2025-07-14 18:17:24][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:17:24][info] Database table created/verified successfully.
[2025-07-14 18:17:24][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:17:24][info] Database table created/verified successfully.
[2025-07-14 18:17:24][info] Route added: [GET] /inventory
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:24][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:24][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:24][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:17:24][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:17:24][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:17:24][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:17:24][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:17:24][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:17:24][info] Route added: [GET] /inventory
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:24][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:24][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:17:24][info] Route added: [GET] /login
[2025-07-14 18:17:24][info] Route added: [POST] /login
[2025-07-14 18:17:24][info] Route added: [GET] /admin
[2025-07-14 18:17:24][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:24][info] Route added: [GET] /logout
[2025-07-14 18:17:24][info] Route added: [GET] /admin/plugins
[2025-07-14 18:17:24][info] Route added: [POST] /admin/plugins
[2025-07-14 18:17:24][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:17:24][info] Route added: [GET] /admin/logs
[2025-07-14 18:17:24][info] Route added: [GET] /usuarios
[2025-07-14 18:17:24][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:17:24][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:17:24][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:17:24][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:17:24][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:17:24][info] Route added: [POST] /api/token
[2025-07-14 18:17:24][info] Route added: [GET] /api/users
[2025-07-14 18:17:24][info] Route added: [POST] /api/users
[2025-07-14 18:17:24][info] Route added: [PUT] /api/users
[2025-07-14 18:17:24][info] Route added: [DELETE] /api/users
[2025-07-14 18:17:24][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:17:24][info] Route added: [GET] /admin
[2025-07-14 18:17:24][info] Route added: [GET] /login
[2025-07-14 18:17:24][info] Route added: [GET] /logout
[2025-07-14 18:17:24][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:24][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:17:24][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:17:24][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:17:24][info] Route added: [GET] /webhook
[2025-07-14 18:17:24][info] Finished loading plugins.
[2025-07-14 18:17:24][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"fefba711f2c9f2a172d738758d58fd4b42085110bac3a551dc7b9f7561afffb5","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"94aa26be-4449-4e7a-9fbd-338617c27e6a","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54347","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509844.122136,"REQUEST_TIME":1752509844}
[2025-07-14 18:17:24][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:17:24][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:17:25][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:17:25][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:17:25][info] DatabaseHandler initialized.
[2025-07-14 18:17:25][info] AuthHandler initialized. Session started.
[2025-07-14 18:17:25][info] Route added: [GET] /
[2025-07-14 18:17:25][info] RoutesHandler initialized.
[2025-07-14 18:17:25][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:17:25][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:17:25][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:17:25][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:17:25][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:17:25][info] Route added: [GET] /clientes
[2025-07-14 18:17:25][info] Route added: [GET] /clientes/novo
[2025-07-14 18:17:25][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:17:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:25][info] Database table created/verified successfully.
[2025-07-14 18:17:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:25][info] Database table created/verified successfully.
[2025-07-14 18:17:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:17:25][info] Database table created/verified successfully.
[2025-07-14 18:17:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:17:25][info] Database table created/verified successfully.
[2025-07-14 18:17:25][info] Route added: [GET] /inventory
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:25][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:25][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:25][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:17:25][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:17:25][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:17:25][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:17:25][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:17:25][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:17:25][info] Route added: [GET] /inventory
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:25][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:25][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:17:25][info] Route added: [GET] /login
[2025-07-14 18:17:25][info] Route added: [POST] /login
[2025-07-14 18:17:25][info] Route added: [GET] /admin
[2025-07-14 18:17:25][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:25][info] Route added: [GET] /logout
[2025-07-14 18:17:25][info] Route added: [GET] /admin/plugins
[2025-07-14 18:17:25][info] Route added: [POST] /admin/plugins
[2025-07-14 18:17:25][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:17:25][info] Route added: [GET] /admin/logs
[2025-07-14 18:17:25][info] Route added: [GET] /usuarios
[2025-07-14 18:17:25][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:17:25][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:17:25][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:17:25][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:17:25][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:17:25][info] Route added: [POST] /api/token
[2025-07-14 18:17:25][info] Route added: [GET] /api/users
[2025-07-14 18:17:25][info] Route added: [POST] /api/users
[2025-07-14 18:17:25][info] Route added: [PUT] /api/users
[2025-07-14 18:17:25][info] Route added: [DELETE] /api/users
[2025-07-14 18:17:25][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:17:25][info] Route added: [GET] /admin
[2025-07-14 18:17:25][info] Route added: [GET] /login
[2025-07-14 18:17:25][info] Route added: [GET] /logout
[2025-07-14 18:17:25][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:25][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:17:25][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:17:25][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:17:25][info] Route added: [GET] /webhook
[2025-07-14 18:17:25][info] Finished loading plugins.
[2025-07-14 18:17:25][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"fefba711f2c9f2a172d738758d58fd4b42085110bac3a551dc7b9f7561afffb5","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"4f407b6f-d735-4f05-ad80-fa570fb434b9","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54347","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509845.180252,"REQUEST_TIME":1752509845}
[2025-07-14 18:17:25][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:17:25][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:17:29][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:17:29][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:17:29][info] DatabaseHandler initialized.
[2025-07-14 18:17:29][info] AuthHandler initialized. Session started.
[2025-07-14 18:17:29][info] Route added: [GET] /
[2025-07-14 18:17:29][info] RoutesHandler initialized.
[2025-07-14 18:17:29][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:17:29][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:17:29][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:17:29][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:17:29][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:17:29][info] Route added: [GET] /clientes
[2025-07-14 18:17:29][info] Route added: [GET] /clientes/novo
[2025-07-14 18:17:29][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:17:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:29][info] Database table created/verified successfully.
[2025-07-14 18:17:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:29][info] Database table created/verified successfully.
[2025-07-14 18:17:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:17:29][info] Database table created/verified successfully.
[2025-07-14 18:17:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:17:29][info] Database table created/verified successfully.
[2025-07-14 18:17:29][info] Route added: [GET] /inventory
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:29][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:29][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:29][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:17:29][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:17:29][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:17:29][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:17:29][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:17:29][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:17:29][info] Route added: [GET] /inventory
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:29][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:29][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:17:29][info] Route added: [GET] /login
[2025-07-14 18:17:29][info] Route added: [POST] /login
[2025-07-14 18:17:29][info] Route added: [GET] /admin
[2025-07-14 18:17:29][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:29][info] Route added: [GET] /logout
[2025-07-14 18:17:29][info] Route added: [GET] /admin/plugins
[2025-07-14 18:17:29][info] Route added: [POST] /admin/plugins
[2025-07-14 18:17:29][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:17:29][info] Route added: [GET] /admin/logs
[2025-07-14 18:17:29][info] Route added: [GET] /usuarios
[2025-07-14 18:17:29][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:17:29][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:17:29][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:17:29][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:17:29][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:17:29][info] Route added: [POST] /api/token
[2025-07-14 18:17:29][info] Route added: [GET] /api/users
[2025-07-14 18:17:29][info] Route added: [POST] /api/users
[2025-07-14 18:17:29][info] Route added: [PUT] /api/users
[2025-07-14 18:17:29][info] Route added: [DELETE] /api/users
[2025-07-14 18:17:29][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:17:29][info] Route added: [GET] /admin
[2025-07-14 18:17:29][info] Route added: [GET] /login
[2025-07-14 18:17:29][info] Route added: [GET] /logout
[2025-07-14 18:17:29][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:29][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:17:29][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:17:29][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:17:29][info] Route added: [GET] /webhook
[2025-07-14 18:17:29][info] Finished loading plugins.
[2025-07-14 18:17:29][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"fefba711f2c9f2a172d738758d58fd4b42085110bac3a551dc7b9f7561afffb5","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"2a1b5a20-4c5d-4333-b451-cb6bc640f3ac","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54347","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509849.544009,"REQUEST_TIME":1752509849}
[2025-07-14 18:17:29][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:17:29][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:17:37][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:17:37][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:17:37][info] DatabaseHandler initialized.
[2025-07-14 18:17:37][info] AuthHandler initialized. Session started.
[2025-07-14 18:17:37][info] Route added: [GET] /
[2025-07-14 18:17:37][info] RoutesHandler initialized.
[2025-07-14 18:17:37][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:17:37][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:17:37][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:17:37][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:17:37][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:17:37][info] Route added: [GET] /clientes
[2025-07-14 18:17:37][info] Route added: [GET] /clientes/novo
[2025-07-14 18:17:37][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:17:37][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:37][info] Database table created/verified successfully.
[2025-07-14 18:17:37][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:37][info] Database table created/verified successfully.
[2025-07-14 18:17:37][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:17:37][info] Database table created/verified successfully.
[2025-07-14 18:17:37][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:17:37][info] Database table created/verified successfully.
[2025-07-14 18:17:37][info] Route added: [GET] /inventory
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:37][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:37][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:37][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:17:37][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:17:37][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:17:37][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:17:37][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:17:37][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:17:37][info] Route added: [GET] /inventory
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:37][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:37][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:17:37][info] Route added: [GET] /login
[2025-07-14 18:17:37][info] Route added: [POST] /login
[2025-07-14 18:17:37][info] Route added: [GET] /admin
[2025-07-14 18:17:37][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:37][info] Route added: [GET] /logout
[2025-07-14 18:17:37][info] Route added: [GET] /admin/plugins
[2025-07-14 18:17:37][info] Route added: [POST] /admin/plugins
[2025-07-14 18:17:37][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:17:37][info] Route added: [GET] /admin/logs
[2025-07-14 18:17:37][info] Route added: [GET] /usuarios
[2025-07-14 18:17:37][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:17:37][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:17:37][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:17:37][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:17:37][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:17:37][info] Route added: [POST] /api/token
[2025-07-14 18:17:37][info] Route added: [GET] /api/users
[2025-07-14 18:17:37][info] Route added: [POST] /api/users
[2025-07-14 18:17:37][info] Route added: [PUT] /api/users
[2025-07-14 18:17:37][info] Route added: [DELETE] /api/users
[2025-07-14 18:17:37][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:17:37][info] Route added: [GET] /admin
[2025-07-14 18:17:37][info] Route added: [GET] /login
[2025-07-14 18:17:37][info] Route added: [GET] /logout
[2025-07-14 18:17:37][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:37][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:17:37][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:17:37][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:17:37][info] Route added: [GET] /webhook
[2025-07-14 18:17:37][info] Finished loading plugins.
[2025-07-14 18:17:37][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"731e644b763349641daf6686661db19ad1d3c7eb3e3652b4931585cf2ab76736","SSL_SESSION_RESUMED":"Initial","HTTP_HOST":"localhost","HTTP_CONNECTION":"keep-alive","HTTP_SEC_CH_UA":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\", \"Google Chrome\";v=\"138\"","HTTP_SEC_CH_UA_MOBILE":"?0","HTTP_SEC_CH_UA_PLATFORM":"\"Windows\"","HTTP_UPGRADE_INSECURE_REQUESTS":"1","HTTP_USER_AGENT":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/138.0.0.0 Safari\/537.36","HTTP_ACCEPT":"text\/html,application\/xhtml+xml,application\/xml;q=0.9,image\/avif,image\/webp,image\/apng,*\/*;q=0.8,application\/signed-exchange;v=b3;q=0.7","HTTP_SEC_FETCH_SITE":"none","HTTP_SEC_FETCH_MODE":"navigate","HTTP_SEC_FETCH_USER":"?1","HTTP_SEC_FETCH_DEST":"document","HTTP_ACCEPT_ENCODING":"gzip, deflate, br, zstd","HTTP_ACCEPT_LANGUAGE":"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7","HTTP_COOKIE":"httpOnlyToken=14a816e2-ed0c-4bff-86c8-4033a9155148; accessToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjQwYTMwMmUwLTgxNzctNDBlYS05NTFjLTdlNzExMTE4N2FhYiJ9.eyJpYXQiOjE3NTA5NTgzNjQsImV4cCI6MTc4MjQ5NDM2NCwic3ViIjoiMTU0MTU0NjQ3MjA0NTAyMDE2MSJ9.EX3QSsrAjoDoK5oyYU-z0JSfAZY33gAXZN2oNR7CQno; accessTokenVersion=1; PHPSESSID=nd7edkhladefta3h9ndrm6kpuq","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54367","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509857.39956,"REQUEST_TIME":1752509857}
[2025-07-14 18:17:40][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:17:40][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:17:40][info] DatabaseHandler initialized.
[2025-07-14 18:17:40][info] AuthHandler initialized. Session started.
[2025-07-14 18:17:40][info] Route added: [GET] /
[2025-07-14 18:17:40][info] RoutesHandler initialized.
[2025-07-14 18:17:40][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:17:40][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:17:40][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:17:40][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:17:40][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:17:40][info] Route added: [GET] /clientes
[2025-07-14 18:17:40][info] Route added: [GET] /clientes/novo
[2025-07-14 18:17:40][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:17:40][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:40][info] Database table created/verified successfully.
[2025-07-14 18:17:40][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:40][info] Database table created/verified successfully.
[2025-07-14 18:17:40][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:17:40][info] Database table created/verified successfully.
[2025-07-14 18:17:40][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:17:40][info] Database table created/verified successfully.
[2025-07-14 18:17:40][info] Route added: [GET] /inventory
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:40][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:40][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:40][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:17:40][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:17:40][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:17:40][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:17:40][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:17:40][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:17:40][info] Route added: [GET] /inventory
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:40][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:40][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:17:40][info] Route added: [GET] /login
[2025-07-14 18:17:40][info] Route added: [POST] /login
[2025-07-14 18:17:40][info] Route added: [GET] /admin
[2025-07-14 18:17:40][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:40][info] Route added: [GET] /logout
[2025-07-14 18:17:40][info] Route added: [GET] /admin/plugins
[2025-07-14 18:17:40][info] Route added: [POST] /admin/plugins
[2025-07-14 18:17:40][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:17:40][info] Route added: [GET] /admin/logs
[2025-07-14 18:17:40][info] Route added: [GET] /usuarios
[2025-07-14 18:17:40][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:17:40][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:17:40][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:17:40][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:17:40][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:17:40][info] Route added: [POST] /api/token
[2025-07-14 18:17:40][info] Route added: [GET] /api/users
[2025-07-14 18:17:40][info] Route added: [POST] /api/users
[2025-07-14 18:17:40][info] Route added: [PUT] /api/users
[2025-07-14 18:17:40][info] Route added: [DELETE] /api/users
[2025-07-14 18:17:40][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:17:40][info] Route added: [GET] /admin
[2025-07-14 18:17:40][info] Route added: [GET] /login
[2025-07-14 18:17:40][info] Route added: [GET] /logout
[2025-07-14 18:17:40][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:40][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:17:40][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:17:40][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:17:40][info] Route added: [GET] /webhook
[2025-07-14 18:17:40][info] Finished loading plugins.
[2025-07-14 18:17:40][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"41c573049e995211f5d2dcb1afbd84fbb1c2c58244d5211f80bebefbf0256e10","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"fd750ce5-4b58-4949-8db4-76ab9ec4d1d0","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54371","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509860.544424,"REQUEST_TIME":1752509860}
[2025-07-14 18:17:40][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:17:40][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:17:51][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:17:51][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:17:51][info] DatabaseHandler initialized.
[2025-07-14 18:17:51][info] AuthHandler initialized. Session started.
[2025-07-14 18:17:51][info] Route added: [GET] /
[2025-07-14 18:17:51][info] RoutesHandler initialized.
[2025-07-14 18:17:51][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:17:51][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:17:51][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:17:51][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:17:51][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:17:51][info] Route added: [GET] /clientes
[2025-07-14 18:17:51][info] Route added: [GET] /clientes/novo
[2025-07-14 18:17:51][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:17:51][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:51][info] Database table created/verified successfully.
[2025-07-14 18:17:51][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:17:51][info] Database table created/verified successfully.
[2025-07-14 18:17:51][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:17:51][info] Database table created/verified successfully.
[2025-07-14 18:17:51][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:17:51][info] Database table created/verified successfully.
[2025-07-14 18:17:51][info] Route added: [GET] /inventory
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:51][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:51][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:51][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:17:51][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:17:51][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:17:51][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:17:51][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:17:51][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:17:51][info] Route added: [GET] /inventory
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/products
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/categories
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/stock
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/movements
[2025-07-14 18:17:51][info] Route added: [GET] /inventory/reports
[2025-07-14 18:17:52][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:17:52][info] Route added: [GET] /login
[2025-07-14 18:17:52][info] Route added: [POST] /login
[2025-07-14 18:17:52][info] Route added: [GET] /admin
[2025-07-14 18:17:52][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:52][info] Route added: [GET] /logout
[2025-07-14 18:17:52][info] Route added: [GET] /admin/plugins
[2025-07-14 18:17:52][info] Route added: [POST] /admin/plugins
[2025-07-14 18:17:52][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:17:52][info] Route added: [GET] /admin/logs
[2025-07-14 18:17:52][info] Route added: [GET] /usuarios
[2025-07-14 18:17:52][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:17:52][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:17:52][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:17:52][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:17:52][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:17:52][info] Route added: [POST] /api/token
[2025-07-14 18:17:52][info] Route added: [GET] /api/users
[2025-07-14 18:17:52][info] Route added: [POST] /api/users
[2025-07-14 18:17:52][info] Route added: [PUT] /api/users
[2025-07-14 18:17:52][info] Route added: [DELETE] /api/users
[2025-07-14 18:17:52][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:17:52][info] Route added: [GET] /admin
[2025-07-14 18:17:52][info] Route added: [GET] /login
[2025-07-14 18:17:52][info] Route added: [GET] /logout
[2025-07-14 18:17:52][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:17:52][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:17:52][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:17:52][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:17:52][info] Route added: [GET] /webhook
[2025-07-14 18:17:52][info] Finished loading plugins.
[2025-07-14 18:17:52][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"b5902f5b3f55a7c53e731b9820713985456b707cf9e36a96adf49bf47f6f9145","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"6a08c9d7-d9a5-4220-b3d0-59be7a48a35e","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","CONTENT_LENGTH":"0","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54376","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752509871.871992,"REQUEST_TIME":1752509871}
[2025-07-14 18:17:52][debug] SQL Query: SELECT id, username, senha, tipo, ativo FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 18:17:52][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at) VALUES (?, ?, ?) Params: [1,"9b200df12193862896e98ca168d94fd5c91064c170baa5468883f200a3c94dfd","2025-07-14 18:17:52"]
[2025-07-14 18:19:02][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:19:02][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:19:02][info] DatabaseHandler initialized.
[2025-07-14 18:19:02][info] AuthHandler initialized. Session started.
[2025-07-14 18:19:02][info] Route added: [GET] /
[2025-07-14 18:19:02][info] RoutesHandler initialized.
[2025-07-14 18:19:02][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:19:02][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:19:02][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:19:02][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:19:02][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:19:02][info] Route added: [GET] /clientes
[2025-07-14 18:19:02][info] Route added: [GET] /clientes/novo
[2025-07-14 18:19:02][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:19:02][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:19:02][info] Database table created/verified successfully.
[2025-07-14 18:19:02][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:19:02][info] Database table created/verified successfully.
[2025-07-14 18:19:02][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:19:02][info] Database table created/verified successfully.
[2025-07-14 18:19:02][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:19:02][info] Database table created/verified successfully.
[2025-07-14 18:19:02][info] Route added: [GET] /inventory
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/products
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:19:02][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:19:02][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/categories
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/stock
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/movements
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/reports
[2025-07-14 18:19:02][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:19:02][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:19:02][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:19:02][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:19:02][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:19:02][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:19:02][info] Route added: [GET] /inventory
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/products
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/categories
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/stock
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/movements
[2025-07-14 18:19:02][info] Route added: [GET] /inventory/reports
[2025-07-14 18:19:02][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:19:02][info] Route added: [GET] /login
[2025-07-14 18:19:02][info] Route added: [POST] /login
[2025-07-14 18:19:02][info] Route added: [GET] /admin
[2025-07-14 18:19:02][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:19:02][info] Route added: [GET] /logout
[2025-07-14 18:19:02][info] Route added: [GET] /admin/plugins
[2025-07-14 18:19:02][info] Route added: [POST] /admin/plugins
[2025-07-14 18:19:02][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:19:02][info] Route added: [GET] /admin/logs
[2025-07-14 18:19:02][info] Route added: [GET] /usuarios
[2025-07-14 18:19:02][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:19:02][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:19:02][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:19:02][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:19:02][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:19:02][info] Route added: [POST] /api/token
[2025-07-14 18:19:02][info] Route added: [GET] /api/users
[2025-07-14 18:19:02][info] Route added: [POST] /api/users
[2025-07-14 18:19:02][info] Route added: [PUT] /api/users
[2025-07-14 18:19:02][info] Route added: [DELETE] /api/users
[2025-07-14 18:19:02][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:19:02][info] Route added: [GET] /admin
[2025-07-14 18:19:02][info] Route added: [GET] /login
[2025-07-14 18:19:02][info] Route added: [GET] /logout
[2025-07-14 18:19:02][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:19:02][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:19:02][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:19:02][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:19:02][info] Route added: [GET] /webhook
[2025-07-14 18:19:02][info] Finished loading plugins.
[2025-07-14 18:19:02][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"fac57744c6086f5fba15995a48e96949b5760791af344ed4c47eaba6efba559b","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"d4af20e8-f227-427b-8931-b82b2b4469a3","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54433","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752509942.216264,"REQUEST_TIME":1752509942}
[2025-07-14 18:19:02][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:19:02][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:21:23][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:21:23][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:21:23][info] DatabaseHandler initialized.
[2025-07-14 18:21:23][info] AuthHandler initialized. Session started.
[2025-07-14 18:21:23][info] Route added: [GET] /
[2025-07-14 18:21:23][info] RoutesHandler initialized.
[2025-07-14 18:21:23][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:21:23][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:21:23][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:21:23][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:21:23][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:21:23][info] Route added: [GET] /clientes
[2025-07-14 18:21:23][info] Route added: [GET] /clientes/novo
[2025-07-14 18:21:23][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:21:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:21:23][info] Database table created/verified successfully.
[2025-07-14 18:21:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:21:23][info] Database table created/verified successfully.
[2025-07-14 18:21:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:21:23][info] Database table created/verified successfully.
[2025-07-14 18:21:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:21:23][info] Database table created/verified successfully.
[2025-07-14 18:21:23][info] Route added: [GET] /inventory
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/products
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:21:23][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:21:23][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/categories
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/stock
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/movements
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/reports
[2025-07-14 18:21:23][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:21:23][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:21:23][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:21:23][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:21:23][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:21:23][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:21:23][info] Route added: [GET] /inventory
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/products
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/categories
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/stock
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/movements
[2025-07-14 18:21:23][info] Route added: [GET] /inventory/reports
[2025-07-14 18:21:23][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:21:23][info] Route added: [GET] /login
[2025-07-14 18:21:23][info] Route added: [POST] /login
[2025-07-14 18:21:23][info] Route added: [GET] /admin
[2025-07-14 18:21:23][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:21:23][info] Route added: [GET] /logout
[2025-07-14 18:21:23][info] Route added: [GET] /admin/plugins
[2025-07-14 18:21:23][info] Route added: [POST] /admin/plugins
[2025-07-14 18:21:23][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:21:23][info] Route added: [GET] /admin/logs
[2025-07-14 18:21:23][info] Route added: [GET] /usuarios
[2025-07-14 18:21:23][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:21:23][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:21:23][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:21:23][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:21:23][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:21:23][info] Route added: [POST] /api/token
[2025-07-14 18:21:23][info] Route added: [GET] /api/users
[2025-07-14 18:21:23][info] Route added: [POST] /api/users
[2025-07-14 18:21:23][info] Route added: [PUT] /api/users
[2025-07-14 18:21:23][info] Route added: [DELETE] /api/users
[2025-07-14 18:21:23][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:21:23][info] Route added: [GET] /admin
[2025-07-14 18:21:23][info] Route added: [GET] /login
[2025-07-14 18:21:23][info] Route added: [GET] /logout
[2025-07-14 18:21:23][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:21:23][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:21:23][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:21:23][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:21:23][info] Route added: [GET] /webhook
[2025-07-14 18:21:23][info] Finished loading plugins.
[2025-07-14 18:21:23][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"961f8dcffc1e6362456c2ede88830f8546fbd3f891ea74cad2aff55ef3a95af6","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"026c2f1a-4393-4f71-8ace-4c19f4cb4f01","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54475","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752510083.097977,"REQUEST_TIME":1752510083}
[2025-07-14 18:21:23][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:21:23][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:22:29][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:22:29][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:22:29][info] DatabaseHandler initialized.
[2025-07-14 18:22:29][info] AuthHandler initialized. Session started.
[2025-07-14 18:22:29][info] Route added: [GET] /
[2025-07-14 18:22:29][info] RoutesHandler initialized.
[2025-07-14 18:22:29][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:22:29][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:22:29][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:22:29][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:22:29][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:22:29][info] Route added: [GET] /clientes
[2025-07-14 18:22:29][info] Route added: [GET] /clientes/novo
[2025-07-14 18:22:29][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:22:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:22:29][info] Database table created/verified successfully.
[2025-07-14 18:22:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:22:29][info] Database table created/verified successfully.
[2025-07-14 18:22:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:22:29][info] Database table created/verified successfully.
[2025-07-14 18:22:29][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:22:29][info] Database table created/verified successfully.
[2025-07-14 18:22:29][info] Route added: [GET] /inventory
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/products
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:22:29][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:22:29][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/categories
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/stock
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/movements
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/reports
[2025-07-14 18:22:29][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:22:29][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:22:29][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:22:29][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:22:29][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:22:29][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:22:29][info] Route added: [GET] /inventory
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/products
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/categories
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/stock
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/movements
[2025-07-14 18:22:29][info] Route added: [GET] /inventory/reports
[2025-07-14 18:22:29][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:22:29][info] Route added: [GET] /login
[2025-07-14 18:22:29][info] Route added: [POST] /login
[2025-07-14 18:22:29][info] Route added: [GET] /admin
[2025-07-14 18:22:29][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:22:29][info] Route added: [GET] /logout
[2025-07-14 18:22:29][info] Route added: [GET] /admin/plugins
[2025-07-14 18:22:29][info] Route added: [POST] /admin/plugins
[2025-07-14 18:22:29][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:22:29][info] Route added: [GET] /admin/logs
[2025-07-14 18:22:29][info] Route added: [GET] /usuarios
[2025-07-14 18:22:29][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:22:29][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:22:29][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:22:29][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:22:29][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:22:29][info] Route added: [POST] /api/token
[2025-07-14 18:22:29][info] Route added: [GET] /api/users
[2025-07-14 18:22:29][info] Route added: [POST] /api/users
[2025-07-14 18:22:29][info] Route added: [PUT] /api/users
[2025-07-14 18:22:29][info] Route added: [DELETE] /api/users
[2025-07-14 18:22:29][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:22:29][info] Route added: [GET] /admin
[2025-07-14 18:22:29][info] Route added: [GET] /login
[2025-07-14 18:22:29][info] Route added: [GET] /logout
[2025-07-14 18:22:29][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:22:29][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:22:29][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:22:29][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:22:29][info] Route added: [GET] /webhook
[2025-07-14 18:22:29][info] Finished loading plugins.
[2025-07-14 18:22:29][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"85b9fef8ef0a8340a98bbc1d8c4ed88fbd2ab6b80fa21361a13d6ee6978239b0","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"9adad1e2-9131-4c41-a87d-36997eee12c7","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54648","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752510149.436268,"REQUEST_TIME":1752510149}
[2025-07-14 18:22:29][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:22:29][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 18:22:35][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:22:35][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:22:35][info] DatabaseHandler initialized.
[2025-07-14 18:22:35][info] AuthHandler initialized. Session started.
[2025-07-14 18:22:35][info] Route added: [GET] /
[2025-07-14 18:22:35][info] RoutesHandler initialized.
[2025-07-14 18:22:35][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:22:35][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:22:35][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:22:35][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:22:35][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:22:35][info] Route added: [GET] /clientes
[2025-07-14 18:22:35][info] Route added: [GET] /clientes/novo
[2025-07-14 18:22:35][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:22:35][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:22:35][info] Database table created/verified successfully.
[2025-07-14 18:22:35][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:22:35][info] Database table created/verified successfully.
[2025-07-14 18:22:35][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:22:35][info] Database table created/verified successfully.
[2025-07-14 18:22:35][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:22:35][info] Database table created/verified successfully.
[2025-07-14 18:22:35][info] Route added: [GET] /inventory
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/products
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:22:35][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:22:35][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/categories
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/stock
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/movements
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/reports
[2025-07-14 18:22:35][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:22:35][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:22:35][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:22:35][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:22:35][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:22:35][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:22:35][info] Route added: [GET] /inventory
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/products
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/categories
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/stock
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/movements
[2025-07-14 18:22:35][info] Route added: [GET] /inventory/reports
[2025-07-14 18:22:35][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:22:35][info] Route added: [GET] /login
[2025-07-14 18:22:35][info] Route added: [POST] /login
[2025-07-14 18:22:35][info] Route added: [GET] /admin
[2025-07-14 18:22:35][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:22:35][info] Route added: [GET] /logout
[2025-07-14 18:22:35][info] Route added: [GET] /admin/plugins
[2025-07-14 18:22:35][info] Route added: [POST] /admin/plugins
[2025-07-14 18:22:35][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:22:35][info] Route added: [GET] /admin/logs
[2025-07-14 18:22:35][info] Route added: [GET] /usuarios
[2025-07-14 18:22:35][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:22:35][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:22:35][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:22:35][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:22:35][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:22:35][info] Route added: [POST] /api/token
[2025-07-14 18:22:35][info] Route added: [GET] /api/users
[2025-07-14 18:22:35][info] Route added: [POST] /api/users
[2025-07-14 18:22:35][info] Route added: [PUT] /api/users
[2025-07-14 18:22:35][info] Route added: [DELETE] /api/users
[2025-07-14 18:22:35][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:22:35][info] Route added: [GET] /admin
[2025-07-14 18:22:35][info] Route added: [GET] /login
[2025-07-14 18:22:35][info] Route added: [GET] /logout
[2025-07-14 18:22:35][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:22:35][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:22:35][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:22:35][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:22:35][info] Route added: [GET] /webhook
[2025-07-14 18:22:35][info] Finished loading plugins.
[2025-07-14 18:22:35][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"b37f4dcdbed176a2e826add09468b65986b8989580e6a76bc111ef4cefd77904","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"64dd6eaa-617f-4936-ae6b-a286adee0365","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","CONTENT_LENGTH":"0","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54667","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752510155.436627,"REQUEST_TIME":1752510155}
[2025-07-14 18:22:35][debug] SQL Query: SELECT id, username, senha, tipo, ativo FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 18:22:35][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at) VALUES (?, ?, ?) Params: [1,"fd5acd883e6de54b2d3eb50491803f239f1b2a1dca4a29773aaaf4b3e29e88f5","2025-07-14 18:22:35"]
[2025-07-14 18:22:48][info] ThemeHandler initialized. Active theme: default
[2025-07-14 18:22:48][info] Database connection established successfully with driver: mysql.
[2025-07-14 18:22:48][info] DatabaseHandler initialized.
[2025-07-14 18:22:48][info] AuthHandler initialized. Session started.
[2025-07-14 18:22:48][info] Route added: [GET] /
[2025-07-14 18:22:48][info] RoutesHandler initialized.
[2025-07-14 18:22:48][info] PluginHandler initialized. Loading plugins...
[2025-07-14 18:22:48][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 18:22:48][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 18:22:48][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 18:22:48][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 18:22:48][info] Route added: [GET] /clientes
[2025-07-14 18:22:48][info] Route added: [GET] /clientes/novo
[2025-07-14 18:22:48][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 18:22:48][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:22:48][info] Database table created/verified successfully.
[2025-07-14 18:22:48][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 18:22:48][info] Database table created/verified successfully.
[2025-07-14 18:22:48][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 18:22:48][info] Database table created/verified successfully.
[2025-07-14 18:22:48][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 18:22:48][info] Database table created/verified successfully.
[2025-07-14 18:22:48][info] Route added: [GET] /inventory
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/products
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:22:48][info] Route added: [POST] /inventory/products/new
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:22:48][info] Route added: [POST] /inventory/products/edit
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/categories
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/stock
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/movements
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/reports
[2025-07-14 18:22:48][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 18:22:48][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 18:22:48][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 18:22:48][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 18:22:48][info] InventoryCore plugin initialized successfully.
[2025-07-14 18:22:48][info] InventoryCore plugin loaded successfully.
[2025-07-14 18:22:48][info] Route added: [GET] /inventory
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/products
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/products/new
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/products/edit
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/categories
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/stock
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/movements
[2025-07-14 18:22:48][info] Route added: [GET] /inventory/reports
[2025-07-14 18:22:48][info] Loading plugin: System Manager (system_manager)
[2025-07-14 18:22:48][info] Route added: [GET] /login
[2025-07-14 18:22:48][info] Route added: [POST] /login
[2025-07-14 18:22:48][info] Route added: [GET] /admin
[2025-07-14 18:22:48][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:22:48][info] Route added: [GET] /logout
[2025-07-14 18:22:48][info] Route added: [GET] /admin/plugins
[2025-07-14 18:22:48][info] Route added: [POST] /admin/plugins
[2025-07-14 18:22:48][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 18:22:48][info] Route added: [GET] /admin/logs
[2025-07-14 18:22:48][info] Route added: [GET] /usuarios
[2025-07-14 18:22:48][info] Route added: [GET] /usuarios/novo
[2025-07-14 18:22:48][info] Route added: [POST] /usuarios/novo
[2025-07-14 18:22:48][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 18:22:48][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 18:22:48][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 18:22:48][info] Route added: [POST] /api/token
[2025-07-14 18:22:48][info] Route added: [GET] /api/users
[2025-07-14 18:22:48][info] Route added: [POST] /api/users
[2025-07-14 18:22:48][info] Route added: [PUT] /api/users
[2025-07-14 18:22:48][info] Route added: [DELETE] /api/users
[2025-07-14 18:22:48][info] Plugin system_manager carregado com sucesso.
[2025-07-14 18:22:48][info] Route added: [GET] /admin
[2025-07-14 18:22:48][info] Route added: [GET] /login
[2025-07-14 18:22:48][info] Route added: [GET] /logout
[2025-07-14 18:22:48][info] Route added: [GET] /admin/usuarios
[2025-07-14 18:22:48][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 18:22:48][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 18:22:48][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 18:22:48][info] Route added: [GET] /webhook
[2025-07-14 18:22:48][info] Finished loading plugins.
[2025-07-14 18:22:48][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"8d8de883aaf4b86ecf11ee3946a9d181eb39f944ef4fd6418b8ea774f6b2296a","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"cf420e38-d533-4ced-85f0-9606a1a9d087","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"54680","REDIRECT_URL":"\/api\/users","REDIRECT_QUERY_STRING":"id=1","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"id=1","REQUEST_URI":"\/api\/users?id=1","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752510168.053474,"REQUEST_TIME":1752510168}
[2025-07-14 18:22:48][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 18:22:48][debug] SQL Query: SELECT * FROM users WHERE id = ? Params: ["1"]
[2025-07-14 19:39:27][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:39:27][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:39:27][info] DatabaseHandler initialized.
[2025-07-14 19:39:27][info] AuthHandler initialized. Session started.
[2025-07-14 19:39:27][info] Route added: [GET] /
[2025-07-14 19:39:27][info] RoutesHandler initialized.
[2025-07-14 19:39:27][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:39:27][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:39:27][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:39:27][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:39:27][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:39:27][info] Route added: [GET] /clientes
[2025-07-14 19:39:27][info] Route added: [GET] /clientes/novo
[2025-07-14 19:39:27][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:39:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:39:27][info] Database table created/verified successfully.
[2025-07-14 19:39:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:39:27][info] Database table created/verified successfully.
[2025-07-14 19:39:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:39:27][info] Database table created/verified successfully.
[2025-07-14 19:39:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:39:27][info] Database table created/verified successfully.
[2025-07-14 19:39:27][info] Route added: [GET] /inventory
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:39:27][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:39:27][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/categories
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/stock
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/movements
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/reports
[2025-07-14 19:39:27][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:39:27][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:39:27][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:39:27][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:39:27][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:39:27][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:39:27][info] Route added: [GET] /inventory
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/categories
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/stock
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/movements
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/reports
[2025-07-14 19:39:27][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:39:27][info] Route added: [GET] /login
[2025-07-14 19:39:27][info] Route added: [POST] /login
[2025-07-14 19:39:27][info] Route added: [GET] /admin
[2025-07-14 19:39:27][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:39:27][info] Route added: [GET] /logout
[2025-07-14 19:39:27][info] Route added: [GET] /admin/plugins
[2025-07-14 19:39:27][info] Route added: [POST] /admin/plugins
[2025-07-14 19:39:27][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:39:27][info] Route added: [GET] /admin/logs
[2025-07-14 19:39:27][info] Route added: [GET] /usuarios
[2025-07-14 19:39:27][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:39:27][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:39:27][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:39:27][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:39:27][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:39:27][info] Route added: [POST] /api/token
[2025-07-14 19:39:27][info] Route added: [GET] /api/users
[2025-07-14 19:39:27][info] Route added: [POST] /api/users
[2025-07-14 19:39:27][info] Route added: [PUT] /api/users
[2025-07-14 19:39:27][info] Route added: [DELETE] /api/users
[2025-07-14 19:39:27][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:39:27][info] Route added: [GET] /admin
[2025-07-14 19:39:27][info] Route added: [GET] /login
[2025-07-14 19:39:27][info] Route added: [GET] /logout
[2025-07-14 19:39:27][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:39:27][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:39:27][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:39:27][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:39:27][info] Route added: [GET] /webhook
[2025-07-14 19:39:27][info] Finished loading plugins.
[2025-07-14 19:39:27][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:39:27][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:39:27][info] DatabaseHandler initialized.
[2025-07-14 19:39:27][info] AuthHandler initialized. Session started.
[2025-07-14 19:39:27][info] Route added: [GET] /
[2025-07-14 19:39:27][info] RoutesHandler initialized.
[2025-07-14 19:39:27][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:39:27][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:39:27][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:39:27][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:39:27][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:39:27][info] Route added: [GET] /clientes
[2025-07-14 19:39:27][info] Route added: [GET] /clientes/novo
[2025-07-14 19:39:27][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:39:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:39:27][info] Database table created/verified successfully.
[2025-07-14 19:39:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:39:27][info] Database table created/verified successfully.
[2025-07-14 19:39:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:39:27][info] Database table created/verified successfully.
[2025-07-14 19:39:27][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:39:27][info] Database table created/verified successfully.
[2025-07-14 19:39:27][info] Route added: [GET] /inventory
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:39:27][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:39:27][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/categories
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/stock
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/movements
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/reports
[2025-07-14 19:39:27][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:39:27][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:39:27][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:39:27][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:39:27][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:39:27][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:39:27][info] Route added: [GET] /inventory
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/categories
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/stock
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/movements
[2025-07-14 19:39:27][info] Route added: [GET] /inventory/reports
[2025-07-14 19:39:27][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:39:27][info] Route added: [GET] /login
[2025-07-14 19:39:27][info] Route added: [POST] /login
[2025-07-14 19:39:27][info] Route added: [GET] /admin
[2025-07-14 19:39:27][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:39:27][info] Route added: [GET] /logout
[2025-07-14 19:39:27][info] Route added: [GET] /admin/plugins
[2025-07-14 19:39:27][info] Route added: [POST] /admin/plugins
[2025-07-14 19:39:27][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:39:27][info] Route added: [GET] /admin/logs
[2025-07-14 19:39:27][info] Route added: [GET] /usuarios
[2025-07-14 19:39:27][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:39:27][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:39:27][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:39:27][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:39:27][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:39:27][info] Route added: [POST] /api/token
[2025-07-14 19:39:27][info] Route added: [GET] /api/users
[2025-07-14 19:39:27][info] Route added: [POST] /api/users
[2025-07-14 19:39:27][info] Route added: [PUT] /api/users
[2025-07-14 19:39:27][info] Route added: [DELETE] /api/users
[2025-07-14 19:39:27][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:39:27][info] Route added: [GET] /admin
[2025-07-14 19:39:27][info] Route added: [GET] /login
[2025-07-14 19:39:27][info] Route added: [GET] /logout
[2025-07-14 19:39:27][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:39:27][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:39:27][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:39:27][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:39:27][info] Route added: [GET] /webhook
[2025-07-14 19:39:27][info] Finished loading plugins.
[2025-07-14 19:39:36][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:39:36][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:39:36][info] DatabaseHandler initialized.
[2025-07-14 19:39:36][info] AuthHandler initialized. Session started.
[2025-07-14 19:39:36][info] Route added: [GET] /
[2025-07-14 19:39:36][info] RoutesHandler initialized.
[2025-07-14 19:39:36][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:39:36][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:39:36][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:39:36][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:39:36][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:39:36][info] Route added: [GET] /clientes
[2025-07-14 19:39:36][info] Route added: [GET] /clientes/novo
[2025-07-14 19:39:36][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:39:36][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:39:36][info] Database table created/verified successfully.
[2025-07-14 19:39:36][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:39:36][info] Database table created/verified successfully.
[2025-07-14 19:39:36][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:39:36][info] Database table created/verified successfully.
[2025-07-14 19:39:36][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:39:36][info] Database table created/verified successfully.
[2025-07-14 19:39:36][info] Route added: [GET] /inventory
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/products
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:39:36][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:39:36][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/categories
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/stock
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/movements
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/reports
[2025-07-14 19:39:36][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:39:36][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:39:36][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:39:36][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:39:36][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:39:36][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:39:36][info] Route added: [GET] /inventory
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/products
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/categories
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/stock
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/movements
[2025-07-14 19:39:36][info] Route added: [GET] /inventory/reports
[2025-07-14 19:39:36][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:39:36][info] Route added: [GET] /login
[2025-07-14 19:39:36][info] Route added: [POST] /login
[2025-07-14 19:39:36][info] Route added: [GET] /admin
[2025-07-14 19:39:36][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:39:36][info] Route added: [GET] /logout
[2025-07-14 19:39:36][info] Route added: [GET] /admin/plugins
[2025-07-14 19:39:36][info] Route added: [POST] /admin/plugins
[2025-07-14 19:39:36][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:39:36][info] Route added: [GET] /admin/logs
[2025-07-14 19:39:36][info] Route added: [GET] /usuarios
[2025-07-14 19:39:36][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:39:36][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:39:36][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:39:36][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:39:36][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:39:36][info] Route added: [POST] /api/token
[2025-07-14 19:39:36][info] Route added: [GET] /api/users
[2025-07-14 19:39:36][info] Route added: [POST] /api/users
[2025-07-14 19:39:36][info] Route added: [PUT] /api/users
[2025-07-14 19:39:36][info] Route added: [DELETE] /api/users
[2025-07-14 19:39:36][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:39:36][info] Route added: [GET] /admin
[2025-07-14 19:39:36][info] Route added: [GET] /login
[2025-07-14 19:39:36][info] Route added: [GET] /logout
[2025-07-14 19:39:36][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:39:36][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:39:36][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:39:36][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:39:36][info] Route added: [GET] /webhook
[2025-07-14 19:39:36][info] Finished loading plugins.
[2025-07-14 19:46:09][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:46:09][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:46:09][info] DatabaseHandler initialized.
[2025-07-14 19:46:09][info] AuthHandler initialized. Session started.
[2025-07-14 19:46:09][info] Route added: [GET] /
[2025-07-14 19:46:09][info] RoutesHandler initialized.
[2025-07-14 19:46:09][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:46:09][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:46:09][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:46:09][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:46:09][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:46:09][info] Route added: [GET] /clientes
[2025-07-14 19:46:09][info] Route added: [GET] /clientes/novo
[2025-07-14 19:46:09][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][info] Route added: [GET] /inventory
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:09][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:46:09][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:46:09][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:46:09][info] Route added: [GET] /inventory
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:09][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:46:09][info] Route added: [GET] /login
[2025-07-14 19:46:09][info] Route added: [POST] /login
[2025-07-14 19:46:09][info] Route added: [GET] /admin
[2025-07-14 19:46:09][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:09][info] Route added: [GET] /logout
[2025-07-14 19:46:09][info] Route added: [GET] /admin/plugins
[2025-07-14 19:46:09][info] Route added: [POST] /admin/plugins
[2025-07-14 19:46:09][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:46:09][info] Route added: [GET] /admin/logs
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /api/token
[2025-07-14 19:46:09][info] Route added: [GET] /api/users
[2025-07-14 19:46:09][info] Route added: [POST] /api/users
[2025-07-14 19:46:09][info] Route added: [PUT] /api/users
[2025-07-14 19:46:09][info] Route added: [DELETE] /api/users
[2025-07-14 19:46:09][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:46:09][info] Route added: [GET] /admin
[2025-07-14 19:46:09][info] Route added: [GET] /login
[2025-07-14 19:46:09][info] Route added: [GET] /logout
[2025-07-14 19:46:09][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:09][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:46:09][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:46:09][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:46:09][info] Route added: [GET] /webhook
[2025-07-14 19:46:09][info] Finished loading plugins.
[2025-07-14 19:46:09][info] User admin logged in with role admin.
[2025-07-14 19:46:09][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:46:09][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:46:09][info] DatabaseHandler initialized.
[2025-07-14 19:46:09][info] AuthHandler initialized. Session started.
[2025-07-14 19:46:09][info] Route added: [GET] /
[2025-07-14 19:46:09][info] RoutesHandler initialized.
[2025-07-14 19:46:09][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:46:09][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:46:09][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:46:09][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:46:09][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:46:09][info] Route added: [GET] /clientes
[2025-07-14 19:46:09][info] Route added: [GET] /clientes/novo
[2025-07-14 19:46:09][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][info] Route added: [GET] /inventory
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:09][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:46:09][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:46:09][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:46:09][info] Route added: [GET] /inventory
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:09][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:46:09][info] Route added: [GET] /login
[2025-07-14 19:46:09][info] Route added: [POST] /login
[2025-07-14 19:46:09][info] Route added: [GET] /admin
[2025-07-14 19:46:09][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:09][info] Route added: [GET] /logout
[2025-07-14 19:46:09][info] Route added: [GET] /admin/plugins
[2025-07-14 19:46:09][info] Route added: [POST] /admin/plugins
[2025-07-14 19:46:09][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:46:09][info] Route added: [GET] /admin/logs
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /api/token
[2025-07-14 19:46:09][info] Route added: [GET] /api/users
[2025-07-14 19:46:09][info] Route added: [POST] /api/users
[2025-07-14 19:46:09][info] Route added: [PUT] /api/users
[2025-07-14 19:46:09][info] Route added: [DELETE] /api/users
[2025-07-14 19:46:09][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:46:09][info] Route added: [GET] /admin
[2025-07-14 19:46:09][info] Route added: [GET] /login
[2025-07-14 19:46:09][info] Route added: [GET] /logout
[2025-07-14 19:46:09][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:09][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:46:09][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:46:09][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:46:09][info] Route added: [GET] /webhook
[2025-07-14 19:46:09][info] Finished loading plugins.
[2025-07-14 19:46:09][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:46:09][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:46:09][info] DatabaseHandler initialized.
[2025-07-14 19:46:09][info] AuthHandler initialized. Session started.
[2025-07-14 19:46:09][info] Route added: [GET] /
[2025-07-14 19:46:09][info] RoutesHandler initialized.
[2025-07-14 19:46:09][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:46:09][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:46:09][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:46:09][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:46:09][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:46:09][info] Route added: [GET] /clientes
[2025-07-14 19:46:09][info] Route added: [GET] /clientes/novo
[2025-07-14 19:46:09][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:46:09][info] Database table created/verified successfully.
[2025-07-14 19:46:09][info] Route added: [GET] /inventory
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:09][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:46:09][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:46:09][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:46:09][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:46:09][info] Route added: [GET] /inventory
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:09][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:09][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:46:09][info] Route added: [GET] /login
[2025-07-14 19:46:09][info] Route added: [POST] /login
[2025-07-14 19:46:09][info] Route added: [GET] /admin
[2025-07-14 19:46:09][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:09][info] Route added: [GET] /logout
[2025-07-14 19:46:09][info] Route added: [GET] /admin/plugins
[2025-07-14 19:46:09][info] Route added: [POST] /admin/plugins
[2025-07-14 19:46:09][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:46:09][info] Route added: [GET] /admin/logs
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:46:09][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:46:09][info] Route added: [POST] /api/token
[2025-07-14 19:46:09][info] Route added: [GET] /api/users
[2025-07-14 19:46:09][info] Route added: [POST] /api/users
[2025-07-14 19:46:09][info] Route added: [PUT] /api/users
[2025-07-14 19:46:09][info] Route added: [DELETE] /api/users
[2025-07-14 19:46:09][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:46:09][info] Route added: [GET] /admin
[2025-07-14 19:46:09][info] Route added: [GET] /login
[2025-07-14 19:46:09][info] Route added: [GET] /logout
[2025-07-14 19:46:09][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:09][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:46:09][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:46:09][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:46:09][info] Route added: [GET] /webhook
[2025-07-14 19:46:09][info] Finished loading plugins.
[2025-07-14 19:46:17][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:46:17][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:46:17][info] DatabaseHandler initialized.
[2025-07-14 19:46:17][info] AuthHandler initialized. Session started.
[2025-07-14 19:46:17][info] Route added: [GET] /
[2025-07-14 19:46:17][info] RoutesHandler initialized.
[2025-07-14 19:46:17][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:46:17][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:46:17][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:46:17][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:46:17][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:46:17][info] Route added: [GET] /clientes
[2025-07-14 19:46:17][info] Route added: [GET] /clientes/novo
[2025-07-14 19:46:17][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:46:17][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:17][info] Database table created/verified successfully.
[2025-07-14 19:46:17][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:17][info] Database table created/verified successfully.
[2025-07-14 19:46:17][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:46:17][info] Database table created/verified successfully.
[2025-07-14 19:46:17][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:46:17][info] Database table created/verified successfully.
[2025-07-14 19:46:17][info] Route added: [GET] /inventory
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:17][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:17][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:17][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:46:17][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:46:17][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:46:17][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:46:17][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:46:17][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:46:17][info] Route added: [GET] /inventory
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:17][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:46:17][info] Route added: [GET] /login
[2025-07-14 19:46:17][info] Route added: [POST] /login
[2025-07-14 19:46:17][info] Route added: [GET] /admin
[2025-07-14 19:46:17][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:17][info] Route added: [GET] /logout
[2025-07-14 19:46:17][info] Route added: [GET] /admin/plugins
[2025-07-14 19:46:17][info] Route added: [POST] /admin/plugins
[2025-07-14 19:46:17][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:46:17][info] Route added: [GET] /admin/logs
[2025-07-14 19:46:17][info] Route added: [GET] /usuarios
[2025-07-14 19:46:17][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:46:17][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:46:17][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:46:17][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:46:17][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:46:17][info] Route added: [POST] /api/token
[2025-07-14 19:46:17][info] Route added: [GET] /api/users
[2025-07-14 19:46:17][info] Route added: [POST] /api/users
[2025-07-14 19:46:17][info] Route added: [PUT] /api/users
[2025-07-14 19:46:17][info] Route added: [DELETE] /api/users
[2025-07-14 19:46:17][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:46:17][info] Route added: [GET] /admin
[2025-07-14 19:46:17][info] Route added: [GET] /login
[2025-07-14 19:46:17][info] Route added: [GET] /logout
[2025-07-14 19:46:17][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:17][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:46:17][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:46:17][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:46:17][info] Route added: [GET] /webhook
[2025-07-14 19:46:17][info] Finished loading plugins.
[2025-07-14 19:46:17][info] User admin logged in with role admin.
[2025-07-14 19:46:17][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:46:17][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:46:17][info] DatabaseHandler initialized.
[2025-07-14 19:46:17][info] AuthHandler initialized. Session started.
[2025-07-14 19:46:17][info] Route added: [GET] /
[2025-07-14 19:46:17][info] RoutesHandler initialized.
[2025-07-14 19:46:17][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:46:17][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:46:17][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:46:17][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:46:17][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:46:17][info] Route added: [GET] /clientes
[2025-07-14 19:46:17][info] Route added: [GET] /clientes/novo
[2025-07-14 19:46:17][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:46:17][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:17][info] Database table created/verified successfully.
[2025-07-14 19:46:17][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:17][info] Database table created/verified successfully.
[2025-07-14 19:46:17][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:46:17][info] Database table created/verified successfully.
[2025-07-14 19:46:17][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:46:17][info] Database table created/verified successfully.
[2025-07-14 19:46:17][info] Route added: [GET] /inventory
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:17][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:17][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:17][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:46:17][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:46:17][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:46:17][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:46:17][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:46:17][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:46:17][info] Route added: [GET] /inventory
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:17][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:17][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:46:17][info] Route added: [GET] /login
[2025-07-14 19:46:17][info] Route added: [POST] /login
[2025-07-14 19:46:17][info] Route added: [GET] /admin
[2025-07-14 19:46:17][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:17][info] Route added: [GET] /logout
[2025-07-14 19:46:17][info] Route added: [GET] /admin/plugins
[2025-07-14 19:46:17][info] Route added: [POST] /admin/plugins
[2025-07-14 19:46:17][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:46:17][info] Route added: [GET] /admin/logs
[2025-07-14 19:46:17][info] Route added: [GET] /usuarios
[2025-07-14 19:46:17][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:46:17][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:46:17][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:46:17][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:46:17][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:46:17][info] Route added: [POST] /api/token
[2025-07-14 19:46:17][info] Route added: [GET] /api/users
[2025-07-14 19:46:17][info] Route added: [POST] /api/users
[2025-07-14 19:46:17][info] Route added: [PUT] /api/users
[2025-07-14 19:46:17][info] Route added: [DELETE] /api/users
[2025-07-14 19:46:17][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:46:17][info] Route added: [GET] /admin
[2025-07-14 19:46:17][info] Route added: [GET] /login
[2025-07-14 19:46:17][info] Route added: [GET] /logout
[2025-07-14 19:46:17][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:17][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:46:17][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:46:17][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:46:17][info] Route added: [GET] /webhook
[2025-07-14 19:46:17][info] Finished loading plugins.
[2025-07-14 19:46:17][debug] Checking permission: admin
[2025-07-14 19:46:17][debug] Checking permission: admin
[2025-07-14 19:46:25][info] ThemeHandler initialized. Active theme: default
[2025-07-14 19:46:25][info] Database connection established successfully with driver: mysql.
[2025-07-14 19:46:25][info] DatabaseHandler initialized.
[2025-07-14 19:46:25][info] AuthHandler initialized. Session started.
[2025-07-14 19:46:25][info] Route added: [GET] /
[2025-07-14 19:46:25][info] RoutesHandler initialized.
[2025-07-14 19:46:25][info] PluginHandler initialized. Loading plugins...
[2025-07-14 19:46:25][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 19:46:25][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 19:46:25][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 19:46:25][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 19:46:25][info] Route added: [GET] /clientes
[2025-07-14 19:46:25][info] Route added: [GET] /clientes/novo
[2025-07-14 19:46:25][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 19:46:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:25][info] Database table created/verified successfully.
[2025-07-14 19:46:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 19:46:25][info] Database table created/verified successfully.
[2025-07-14 19:46:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 19:46:25][info] Database table created/verified successfully.
[2025-07-14 19:46:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 19:46:25][info] Database table created/verified successfully.
[2025-07-14 19:46:25][info] Route added: [GET] /inventory
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:25][info] Route added: [POST] /inventory/products/new
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:25][info] Route added: [POST] /inventory/products/edit
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:25][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 19:46:25][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 19:46:25][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 19:46:25][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 19:46:25][info] InventoryCore plugin initialized successfully.
[2025-07-14 19:46:25][info] InventoryCore plugin loaded successfully.
[2025-07-14 19:46:25][info] Route added: [GET] /inventory
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/products
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/products/new
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/products/edit
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/categories
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/stock
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/movements
[2025-07-14 19:46:25][info] Route added: [GET] /inventory/reports
[2025-07-14 19:46:25][info] Loading plugin: System Manager (system_manager)
[2025-07-14 19:46:25][info] Route added: [GET] /login
[2025-07-14 19:46:25][info] Route added: [POST] /login
[2025-07-14 19:46:25][info] Route added: [GET] /admin
[2025-07-14 19:46:25][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:25][info] Route added: [GET] /logout
[2025-07-14 19:46:25][info] Route added: [GET] /admin/plugins
[2025-07-14 19:46:25][info] Route added: [POST] /admin/plugins
[2025-07-14 19:46:25][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 19:46:25][info] Route added: [GET] /admin/logs
[2025-07-14 19:46:25][info] Route added: [GET] /usuarios
[2025-07-14 19:46:25][info] Route added: [GET] /usuarios/novo
[2025-07-14 19:46:25][info] Route added: [POST] /usuarios/novo
[2025-07-14 19:46:25][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 19:46:25][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 19:46:25][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 19:46:25][info] Route added: [POST] /api/token
[2025-07-14 19:46:25][info] Route added: [GET] /api/users
[2025-07-14 19:46:25][info] Route added: [POST] /api/users
[2025-07-14 19:46:25][info] Route added: [PUT] /api/users
[2025-07-14 19:46:25][info] Route added: [DELETE] /api/users
[2025-07-14 19:46:25][info] Plugin system_manager carregado com sucesso.
[2025-07-14 19:46:25][info] Route added: [GET] /admin
[2025-07-14 19:46:25][info] Route added: [GET] /login
[2025-07-14 19:46:25][info] Route added: [GET] /logout
[2025-07-14 19:46:25][info] Route added: [GET] /admin/usuarios
[2025-07-14 19:46:25][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 19:46:25][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 19:46:25][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 19:46:25][info] Route added: [GET] /webhook
[2025-07-14 19:46:25][info] Finished loading plugins.
[2025-07-14 19:46:25][debug] Checking permission: admin
[2025-07-14 19:46:25][debug] Checking permission: admin
[2025-07-14 20:44:15][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:44:15][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:44:15][info] DatabaseHandler initialized.
[2025-07-14 20:44:15][info] AuthHandler initialized. Session started.
[2025-07-14 20:44:15][info] Route added: [GET] /
[2025-07-14 20:44:15][info] RoutesHandler initialized.
[2025-07-14 20:44:15][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:44:15][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:44:15][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:44:15][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:44:15][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:44:15][info] Route added: [GET] /clientes
[2025-07-14 20:44:15][info] Route added: [GET] /clientes/novo
[2025-07-14 20:44:15][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:44:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:44:15][info] Database table created/verified successfully.
[2025-07-14 20:44:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:44:15][info] Database table created/verified successfully.
[2025-07-14 20:44:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:44:15][info] Database table created/verified successfully.
[2025-07-14 20:44:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:44:15][info] Database table created/verified successfully.
[2025-07-14 20:44:15][info] Route added: [GET] /inventory
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/products
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:44:15][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:44:15][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/categories
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/stock
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/movements
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/reports
[2025-07-14 20:44:15][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:44:15][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:44:15][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:44:15][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:44:15][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:44:15][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:44:15][info] Route added: [GET] /inventory
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/products
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/categories
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/stock
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/movements
[2025-07-14 20:44:15][info] Route added: [GET] /inventory/reports
[2025-07-14 20:44:15][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:44:15][info] Route added: [GET] /login
[2025-07-14 20:44:15][info] Route added: [POST] /login
[2025-07-14 20:44:15][info] Route added: [GET] /admin
[2025-07-14 20:44:15][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:44:15][info] Route added: [GET] /logout
[2025-07-14 20:44:15][info] Route added: [GET] /admin/plugins
[2025-07-14 20:44:15][info] Route added: [POST] /admin/plugins
[2025-07-14 20:44:15][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:44:15][info] Route added: [GET] /admin/logs
[2025-07-14 20:44:15][info] Route added: [GET] /usuarios
[2025-07-14 20:44:15][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:44:15][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:44:15][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:44:15][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:44:15][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:44:15][info] Route added: [POST] /api/token
[2025-07-14 20:44:15][info] Route added: [GET] /api/users
[2025-07-14 20:44:15][info] Route added: [POST] /api/users
[2025-07-14 20:44:15][info] Route added: [PUT] /api/users
[2025-07-14 20:44:15][info] Route added: [DELETE] /api/users
[2025-07-14 20:44:15][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:44:15][info] Route added: [GET] /admin
[2025-07-14 20:44:15][info] Route added: [GET] /login
[2025-07-14 20:44:15][info] Route added: [GET] /logout
[2025-07-14 20:44:15][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:44:15][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:44:15][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:44:15][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:44:15][info] Route added: [GET] /webhook
[2025-07-14 20:44:15][info] Finished loading plugins.
[2025-07-14 20:44:15][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"3e8ca639399347c965c8516a810ca18d67ccc57b6026787dd5c7962740f8c59c","SSL_SESSION_RESUMED":"Initial","CONTENT_TYPE":"application\/json","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"e2c2d210-0624-4ebb-b8d7-5f0da298b1b4","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","CONTENT_LENGTH":"155","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"62505","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752518655.689844,"REQUEST_TIME":1752518655}
[2025-07-14 20:44:15][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:44:15][debug] SQL Query: INSERT INTO users (username, password, name, email, role, active) VALUES (?, ?, ?, ?, ?, ?) Params: ["johndoe","$argon2id$v=19$m=65536,t=4,p=1$ZmYydUVCclY4cE1xelEzMw$s1imcVp9xkdyw\/YrNOPFUE8Nk7dWp85+IspFvPTqA4w","John Doe","john.doe@email.com","admin",1]
[2025-07-14 20:44:34][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:44:34][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:44:34][info] DatabaseHandler initialized.
[2025-07-14 20:44:34][info] AuthHandler initialized. Session started.
[2025-07-14 20:44:34][info] Route added: [GET] /
[2025-07-14 20:44:34][info] RoutesHandler initialized.
[2025-07-14 20:44:34][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:44:34][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:44:34][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:44:34][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:44:34][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:44:34][info] Route added: [GET] /clientes
[2025-07-14 20:44:34][info] Route added: [GET] /clientes/novo
[2025-07-14 20:44:34][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:44:34][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:44:34][info] Database table created/verified successfully.
[2025-07-14 20:44:34][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:44:34][info] Database table created/verified successfully.
[2025-07-14 20:44:34][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:44:34][info] Database table created/verified successfully.
[2025-07-14 20:44:34][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:44:34][info] Database table created/verified successfully.
[2025-07-14 20:44:34][info] Route added: [GET] /inventory
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/products
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:44:34][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:44:34][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/categories
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/stock
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/movements
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/reports
[2025-07-14 20:44:34][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:44:34][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:44:34][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:44:34][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:44:34][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:44:34][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:44:34][info] Route added: [GET] /inventory
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/products
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/categories
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/stock
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/movements
[2025-07-14 20:44:34][info] Route added: [GET] /inventory/reports
[2025-07-14 20:44:34][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:44:34][info] Route added: [GET] /login
[2025-07-14 20:44:34][info] Route added: [POST] /login
[2025-07-14 20:44:34][info] Route added: [GET] /admin
[2025-07-14 20:44:34][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:44:34][info] Route added: [GET] /logout
[2025-07-14 20:44:34][info] Route added: [GET] /admin/plugins
[2025-07-14 20:44:34][info] Route added: [POST] /admin/plugins
[2025-07-14 20:44:34][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:44:34][info] Route added: [GET] /admin/logs
[2025-07-14 20:44:34][info] Route added: [GET] /usuarios
[2025-07-14 20:44:34][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:44:34][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:44:34][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:44:34][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:44:34][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:44:34][info] Route added: [POST] /api/token
[2025-07-14 20:44:34][info] Route added: [GET] /api/users
[2025-07-14 20:44:34][info] Route added: [POST] /api/users
[2025-07-14 20:44:34][info] Route added: [PUT] /api/users
[2025-07-14 20:44:34][info] Route added: [DELETE] /api/users
[2025-07-14 20:44:34][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:44:34][info] Route added: [GET] /admin
[2025-07-14 20:44:34][info] Route added: [GET] /login
[2025-07-14 20:44:34][info] Route added: [GET] /logout
[2025-07-14 20:44:34][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:44:34][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:44:34][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:44:34][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:44:34][info] Route added: [GET] /webhook
[2025-07-14 20:44:34][info] Finished loading plugins.
[2025-07-14 20:44:34][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"5c9218b8194367b26380f9f7cbe61031ec4a94c1cbc5e4ab22e1f80f17ba68db","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"3909e459-6d9d-454c-8594-c8492d949692","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"62536","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752518674.449196,"REQUEST_TIME":1752518674}
[2025-07-14 20:44:34][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:44:34][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 20:47:22][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:47:22][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:47:22][info] DatabaseHandler initialized.
[2025-07-14 20:47:22][info] AuthHandler initialized. Session started.
[2025-07-14 20:47:22][info] Route added: [GET] /
[2025-07-14 20:47:22][info] RoutesHandler initialized.
[2025-07-14 20:47:22][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:47:22][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:47:22][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:47:22][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:47:22][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:47:22][info] Route added: [GET] /clientes
[2025-07-14 20:47:22][info] Route added: [GET] /clientes/novo
[2025-07-14 20:47:22][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:47:22][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:47:22][info] Database table created/verified successfully.
[2025-07-14 20:47:22][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:47:22][info] Database table created/verified successfully.
[2025-07-14 20:47:22][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:47:22][info] Database table created/verified successfully.
[2025-07-14 20:47:22][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:47:22][info] Database table created/verified successfully.
[2025-07-14 20:47:22][info] Route added: [GET] /inventory
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/products
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:47:22][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:47:22][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/categories
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/stock
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/movements
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/reports
[2025-07-14 20:47:22][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:47:22][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:47:22][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:47:22][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:47:22][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:47:22][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:47:22][info] Route added: [GET] /inventory
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/products
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/categories
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/stock
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/movements
[2025-07-14 20:47:22][info] Route added: [GET] /inventory/reports
[2025-07-14 20:47:22][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:47:22][info] Route added: [GET] /login
[2025-07-14 20:47:22][info] Route added: [POST] /login
[2025-07-14 20:47:22][info] Route added: [GET] /admin
[2025-07-14 20:47:22][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:47:22][info] Route added: [GET] /logout
[2025-07-14 20:47:22][info] Route added: [GET] /admin/plugins
[2025-07-14 20:47:22][info] Route added: [POST] /admin/plugins
[2025-07-14 20:47:22][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:47:22][info] Route added: [GET] /admin/logs
[2025-07-14 20:47:22][info] Route added: [GET] /usuarios
[2025-07-14 20:47:22][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:47:22][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:47:22][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:47:22][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:47:22][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:47:22][info] Route added: [POST] /api/token
[2025-07-14 20:47:22][info] Route added: [GET] /api/users
[2025-07-14 20:47:22][info] Route added: [POST] /api/users
[2025-07-14 20:47:22][info] Route added: [PUT] /api/users
[2025-07-14 20:47:22][info] Route added: [DELETE] /api/users
[2025-07-14 20:47:22][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:47:22][info] Route added: [GET] /admin
[2025-07-14 20:47:22][info] Route added: [GET] /login
[2025-07-14 20:47:22][info] Route added: [GET] /logout
[2025-07-14 20:47:22][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:47:22][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:47:22][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:47:22][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:47:22][info] Route added: [GET] /webhook
[2025-07-14 20:47:22][info] Finished loading plugins.
[2025-07-14 20:47:22][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"94a164165a9aff382bae1d9a3826a31a83866af2bccccb79ef29889850063c55","SSL_SESSION_RESUMED":"Resumed","CONTENT_TYPE":"application\/json","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"67fa8e05-c619-40f1-8476-efd481300c10","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","CONTENT_LENGTH":"155","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"62727","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752518842.66705,"REQUEST_TIME":1752518842}
[2025-07-14 20:47:22][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:47:23][debug] SQL Query: INSERT INTO users (username, password, name, email, role, active) VALUES (?, ?, ?, ?, ?, ?) Params: ["johndoe","$argon2id$v=19$m=65536,t=4,p=1$bmNJdzA1NjNlTDJPMllwUg$+co+cqAkyZgkHts4zjAPE64EvpUgoXxS+mfLuBAexIc","John Doe","john.doe@email.com","admin",1]
[2025-07-14 20:47:36][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:47:36][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:47:36][info] DatabaseHandler initialized.
[2025-07-14 20:47:36][info] AuthHandler initialized. Session started.
[2025-07-14 20:47:36][info] Route added: [GET] /
[2025-07-14 20:47:36][info] RoutesHandler initialized.
[2025-07-14 20:47:36][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:47:36][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:47:36][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:47:36][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:47:36][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:47:36][info] Route added: [GET] /clientes
[2025-07-14 20:47:36][info] Route added: [GET] /clientes/novo
[2025-07-14 20:47:36][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:47:36][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:47:36][info] Database table created/verified successfully.
[2025-07-14 20:47:36][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:47:36][info] Database table created/verified successfully.
[2025-07-14 20:47:36][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:47:36][info] Database table created/verified successfully.
[2025-07-14 20:47:36][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:47:36][info] Database table created/verified successfully.
[2025-07-14 20:47:36][info] Route added: [GET] /inventory
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/products
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:47:36][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:47:36][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/categories
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/stock
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/movements
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/reports
[2025-07-14 20:47:36][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:47:36][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:47:36][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:47:36][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:47:36][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:47:36][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:47:36][info] Route added: [GET] /inventory
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/products
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/categories
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/stock
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/movements
[2025-07-14 20:47:36][info] Route added: [GET] /inventory/reports
[2025-07-14 20:47:36][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:47:36][info] Route added: [GET] /login
[2025-07-14 20:47:36][info] Route added: [POST] /login
[2025-07-14 20:47:36][info] Route added: [GET] /admin
[2025-07-14 20:47:36][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:47:36][info] Route added: [GET] /logout
[2025-07-14 20:47:36][info] Route added: [GET] /admin/plugins
[2025-07-14 20:47:36][info] Route added: [POST] /admin/plugins
[2025-07-14 20:47:36][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:47:36][info] Route added: [GET] /admin/logs
[2025-07-14 20:47:36][info] Route added: [GET] /usuarios
[2025-07-14 20:47:36][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:47:36][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:47:36][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:47:36][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:47:36][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:47:36][info] Route added: [POST] /api/token
[2025-07-14 20:47:36][info] Route added: [GET] /api/users
[2025-07-14 20:47:36][info] Route added: [POST] /api/users
[2025-07-14 20:47:36][info] Route added: [PUT] /api/users
[2025-07-14 20:47:36][info] Route added: [DELETE] /api/users
[2025-07-14 20:47:36][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:47:36][info] Route added: [GET] /admin
[2025-07-14 20:47:36][info] Route added: [GET] /login
[2025-07-14 20:47:36][info] Route added: [GET] /logout
[2025-07-14 20:47:36][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:47:36][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:47:36][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:47:36][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:47:36][info] Route added: [GET] /webhook
[2025-07-14 20:47:36][info] Finished loading plugins.
[2025-07-14 20:47:36][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"6ba67c646e50aafa9d53f7fe3261e24d28c0b2a1e9b48d260c152f15f96ff3e1","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"7af89abe-d94a-4ebc-aad6-a78509b3de46","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"62752","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752518856.460081,"REQUEST_TIME":1752518856}
[2025-07-14 20:47:36][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:47:36][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 20:47:46][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:47:46][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:47:46][info] DatabaseHandler initialized.
[2025-07-14 20:47:46][info] AuthHandler initialized. Session started.
[2025-07-14 20:47:46][info] Route added: [GET] /
[2025-07-14 20:47:46][info] RoutesHandler initialized.
[2025-07-14 20:47:46][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:47:46][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:47:46][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:47:46][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:47:46][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:47:46][info] Route added: [GET] /clientes
[2025-07-14 20:47:46][info] Route added: [GET] /clientes/novo
[2025-07-14 20:47:46][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:47:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:47:46][info] Database table created/verified successfully.
[2025-07-14 20:47:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:47:46][info] Database table created/verified successfully.
[2025-07-14 20:47:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:47:46][info] Database table created/verified successfully.
[2025-07-14 20:47:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:47:46][info] Database table created/verified successfully.
[2025-07-14 20:47:46][info] Route added: [GET] /inventory
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/products
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:47:46][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:47:46][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/categories
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/stock
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/movements
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/reports
[2025-07-14 20:47:46][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:47:46][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:47:46][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:47:46][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:47:46][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:47:46][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:47:46][info] Route added: [GET] /inventory
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/products
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/categories
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/stock
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/movements
[2025-07-14 20:47:46][info] Route added: [GET] /inventory/reports
[2025-07-14 20:47:46][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:47:46][info] Route added: [GET] /login
[2025-07-14 20:47:46][info] Route added: [POST] /login
[2025-07-14 20:47:46][info] Route added: [GET] /admin
[2025-07-14 20:47:46][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:47:46][info] Route added: [GET] /logout
[2025-07-14 20:47:46][info] Route added: [GET] /admin/plugins
[2025-07-14 20:47:46][info] Route added: [POST] /admin/plugins
[2025-07-14 20:47:46][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:47:46][info] Route added: [GET] /admin/logs
[2025-07-14 20:47:46][info] Route added: [GET] /usuarios
[2025-07-14 20:47:46][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:47:46][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:47:46][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:47:46][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:47:46][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:47:46][info] Route added: [POST] /api/token
[2025-07-14 20:47:46][info] Route added: [GET] /api/users
[2025-07-14 20:47:46][info] Route added: [POST] /api/users
[2025-07-14 20:47:46][info] Route added: [PUT] /api/users
[2025-07-14 20:47:46][info] Route added: [DELETE] /api/users
[2025-07-14 20:47:46][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:47:46][info] Route added: [GET] /admin
[2025-07-14 20:47:46][info] Route added: [GET] /login
[2025-07-14 20:47:46][info] Route added: [GET] /logout
[2025-07-14 20:47:46][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:47:46][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:47:46][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:47:46][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:47:46][info] Route added: [GET] /webhook
[2025-07-14 20:47:46][info] Finished loading plugins.
[2025-07-14 20:47:46][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"6d7fd6070f0b4414babad3122e8b44f69600a6ace08330ab8f83c596d59f1022","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"0bff3e3c-7cc6-431d-a923-d1e21684f145","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"62762","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752518866.504618,"REQUEST_TIME":1752518866}
[2025-07-14 20:47:46][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:47:46][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 20:49:31][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:49:31][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:49:31][info] DatabaseHandler initialized.
[2025-07-14 20:49:31][info] AuthHandler initialized. Session started.
[2025-07-14 20:49:31][info] Route added: [GET] /
[2025-07-14 20:49:31][info] RoutesHandler initialized.
[2025-07-14 20:49:31][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:49:31][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:49:31][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:49:31][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:49:31][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:49:31][info] Route added: [GET] /clientes
[2025-07-14 20:49:31][info] Route added: [GET] /clientes/novo
[2025-07-14 20:49:31][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:49:31][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:49:31][info] Database table created/verified successfully.
[2025-07-14 20:49:31][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:49:31][info] Database table created/verified successfully.
[2025-07-14 20:49:31][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:49:31][info] Database table created/verified successfully.
[2025-07-14 20:49:31][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:49:31][info] Database table created/verified successfully.
[2025-07-14 20:49:31][info] Route added: [GET] /inventory
[2025-07-14 20:49:31][info] Route added: [GET] /inventory/products
[2025-07-14 20:49:31][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:49:31][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:49:31][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:49:32][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/categories
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/stock
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/movements
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/reports
[2025-07-14 20:49:32][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:49:32][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:49:32][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:49:32][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:49:32][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:49:32][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:49:32][info] Route added: [GET] /inventory
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/products
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/categories
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/stock
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/movements
[2025-07-14 20:49:32][info] Route added: [GET] /inventory/reports
[2025-07-14 20:49:32][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:49:32][info] Route added: [GET] /login
[2025-07-14 20:49:32][info] Route added: [POST] /login
[2025-07-14 20:49:32][info] Route added: [GET] /admin
[2025-07-14 20:49:32][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:49:32][info] Route added: [GET] /logout
[2025-07-14 20:49:32][info] Route added: [GET] /admin/plugins
[2025-07-14 20:49:32][info] Route added: [POST] /admin/plugins
[2025-07-14 20:49:32][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:49:32][info] Route added: [GET] /admin/logs
[2025-07-14 20:49:32][info] Route added: [GET] /usuarios
[2025-07-14 20:49:32][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:49:32][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:49:32][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:49:32][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:49:32][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:49:32][info] Route added: [POST] /api/token
[2025-07-14 20:49:32][info] Route added: [GET] /api/users
[2025-07-14 20:49:32][info] Route added: [POST] /api/users
[2025-07-14 20:49:32][info] Route added: [PUT] /api/users
[2025-07-14 20:49:32][info] Route added: [DELETE] /api/users
[2025-07-14 20:49:32][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:49:32][info] Route added: [GET] /admin
[2025-07-14 20:49:32][info] Route added: [GET] /login
[2025-07-14 20:49:32][info] Route added: [GET] /logout
[2025-07-14 20:49:32][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:49:32][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:49:32][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:49:32][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:49:32][info] Route added: [GET] /webhook
[2025-07-14 20:49:32][info] Finished loading plugins.
[2025-07-14 20:49:32][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"bc9cb3d5841b1f736ae4901989840b8c4f73b9bffbe7676ae97bd03c4f5266f7","SSL_SESSION_RESUMED":"Resumed","CONTENT_TYPE":"application\/json","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"6603f919-7ee7-4063-afe1-01cafd99de66","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","CONTENT_LENGTH":"35","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"62866","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"PUT","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752518971.902367,"REQUEST_TIME":1752518971}
[2025-07-14 20:49:32][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:50:09][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:50:09][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:50:09][info] DatabaseHandler initialized.
[2025-07-14 20:50:09][info] AuthHandler initialized. Session started.
[2025-07-14 20:50:09][info] Route added: [GET] /
[2025-07-14 20:50:09][info] RoutesHandler initialized.
[2025-07-14 20:50:09][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:50:09][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:50:09][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:50:09][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:50:09][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:50:09][info] Route added: [GET] /clientes
[2025-07-14 20:50:09][info] Route added: [GET] /clientes/novo
[2025-07-14 20:50:09][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:50:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:50:09][info] Database table created/verified successfully.
[2025-07-14 20:50:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:50:09][info] Database table created/verified successfully.
[2025-07-14 20:50:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:50:09][info] Database table created/verified successfully.
[2025-07-14 20:50:09][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:50:09][info] Database table created/verified successfully.
[2025-07-14 20:50:09][info] Route added: [GET] /inventory
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/products
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:50:09][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:50:09][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/categories
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/stock
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/movements
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/reports
[2025-07-14 20:50:09][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:50:09][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:50:09][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:50:09][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:50:09][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:50:09][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:50:09][info] Route added: [GET] /inventory
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/products
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/categories
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/stock
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/movements
[2025-07-14 20:50:09][info] Route added: [GET] /inventory/reports
[2025-07-14 20:50:09][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:50:09][info] Route added: [GET] /login
[2025-07-14 20:50:09][info] Route added: [POST] /login
[2025-07-14 20:50:09][info] Route added: [GET] /admin
[2025-07-14 20:50:09][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:50:09][info] Route added: [GET] /logout
[2025-07-14 20:50:09][info] Route added: [GET] /admin/plugins
[2025-07-14 20:50:09][info] Route added: [POST] /admin/plugins
[2025-07-14 20:50:09][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:50:09][info] Route added: [GET] /admin/logs
[2025-07-14 20:50:09][info] Route added: [GET] /usuarios
[2025-07-14 20:50:09][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:50:09][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:50:09][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:50:09][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:50:09][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:50:09][info] Route added: [POST] /api/token
[2025-07-14 20:50:09][info] Route added: [GET] /api/users
[2025-07-14 20:50:09][info] Route added: [POST] /api/users
[2025-07-14 20:50:09][info] Route added: [PUT] /api/users
[2025-07-14 20:50:09][info] Route added: [DELETE] /api/users
[2025-07-14 20:50:09][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:50:09][info] Route added: [GET] /admin
[2025-07-14 20:50:09][info] Route added: [GET] /login
[2025-07-14 20:50:09][info] Route added: [GET] /logout
[2025-07-14 20:50:09][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:50:09][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:50:09][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:50:09][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:50:09][info] Route added: [GET] /webhook
[2025-07-14 20:50:09][info] Finished loading plugins.
[2025-07-14 20:50:09][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"70995424945479605e3bd83da14a939f677c162c179281bef1772baeb7d858ba","SSL_SESSION_RESUMED":"Resumed","CONTENT_TYPE":"application\/json","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"ce7c2128-4db7-49c8-8183-d55d8bdda159","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","CONTENT_LENGTH":"62","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"62891","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"PUT","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752519009.069459,"REQUEST_TIME":1752519009}
[2025-07-14 20:50:09][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:50:09][debug] SQL Query: UPDATE users SET username = ?, name = ? WHERE username = ? Params: ["johndoe","John Doe Silva","johndoe"]
[2025-07-14 20:51:23][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:51:23][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:51:23][info] DatabaseHandler initialized.
[2025-07-14 20:51:23][info] AuthHandler initialized. Session started.
[2025-07-14 20:51:23][info] Route added: [GET] /
[2025-07-14 20:51:23][info] RoutesHandler initialized.
[2025-07-14 20:51:23][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:51:23][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:51:23][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:51:23][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:51:23][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:51:23][info] Route added: [GET] /clientes
[2025-07-14 20:51:23][info] Route added: [GET] /clientes/novo
[2025-07-14 20:51:23][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:51:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:51:23][info] Database table created/verified successfully.
[2025-07-14 20:51:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:51:23][info] Database table created/verified successfully.
[2025-07-14 20:51:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:51:23][info] Database table created/verified successfully.
[2025-07-14 20:51:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:51:23][info] Database table created/verified successfully.
[2025-07-14 20:51:23][info] Route added: [GET] /inventory
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/products
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:51:23][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:51:23][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/categories
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/stock
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/movements
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/reports
[2025-07-14 20:51:23][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:51:23][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:51:23][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:51:23][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:51:23][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:51:23][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:51:23][info] Route added: [GET] /inventory
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/products
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/categories
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/stock
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/movements
[2025-07-14 20:51:23][info] Route added: [GET] /inventory/reports
[2025-07-14 20:51:23][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:51:23][info] Route added: [GET] /login
[2025-07-14 20:51:23][info] Route added: [POST] /login
[2025-07-14 20:51:23][info] Route added: [GET] /admin
[2025-07-14 20:51:23][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:51:23][info] Route added: [GET] /logout
[2025-07-14 20:51:23][info] Route added: [GET] /admin/plugins
[2025-07-14 20:51:23][info] Route added: [POST] /admin/plugins
[2025-07-14 20:51:23][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:51:23][info] Route added: [GET] /admin/logs
[2025-07-14 20:51:23][info] Route added: [GET] /usuarios
[2025-07-14 20:51:23][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:51:23][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:51:23][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:51:23][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:51:23][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:51:23][info] Route added: [POST] /api/token
[2025-07-14 20:51:23][info] Route added: [GET] /api/users
[2025-07-14 20:51:23][info] Route added: [POST] /api/users
[2025-07-14 20:51:23][info] Route added: [PUT] /api/users
[2025-07-14 20:51:23][info] Route added: [DELETE] /api/users
[2025-07-14 20:51:23][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:51:23][info] Route added: [GET] /admin
[2025-07-14 20:51:23][info] Route added: [GET] /login
[2025-07-14 20:51:23][info] Route added: [GET] /logout
[2025-07-14 20:51:23][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:51:23][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:51:23][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:51:23][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:51:23][info] Route added: [GET] /webhook
[2025-07-14 20:51:23][info] Finished loading plugins.
[2025-07-14 20:51:23][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"1dcfa6bb90cc06b869e199b2ad51d3d61a962afe53ad2878df1d7d3ecc5a2154","SSL_SESSION_RESUMED":"Resumed","CONTENT_TYPE":"application\/json","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"f3d31cdf-4f3f-4d15-b88e-6820171f3440","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","CONTENT_LENGTH":"62","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"62957","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"PUT","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752519083.314008,"REQUEST_TIME":1752519083}
[2025-07-14 20:51:23][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:51:23][debug] SQL Query: UPDATE users SET username = ?, name = ? WHERE username = ? Params: ["johndoe","John Doe Silva","johndoe"]
[2025-07-14 20:59:23][info] ThemeHandler initialized. Active theme: default
[2025-07-14 20:59:23][info] Database connection established successfully with driver: mysql.
[2025-07-14 20:59:23][info] DatabaseHandler initialized.
[2025-07-14 20:59:23][info] AuthHandler initialized. Session started.
[2025-07-14 20:59:23][info] Route added: [GET] /
[2025-07-14 20:59:23][info] RoutesHandler initialized.
[2025-07-14 20:59:23][info] PluginHandler initialized. Loading plugins...
[2025-07-14 20:59:23][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 20:59:23][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 20:59:23][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 20:59:23][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 20:59:23][info] Route added: [GET] /clientes
[2025-07-14 20:59:23][info] Route added: [GET] /clientes/novo
[2025-07-14 20:59:23][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 20:59:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:59:23][info] Database table created/verified successfully.
[2025-07-14 20:59:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 20:59:23][info] Database table created/verified successfully.
[2025-07-14 20:59:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 20:59:23][info] Database table created/verified successfully.
[2025-07-14 20:59:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 20:59:23][info] Database table created/verified successfully.
[2025-07-14 20:59:23][info] Route added: [GET] /inventory
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/products
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:59:23][info] Route added: [POST] /inventory/products/new
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:59:23][info] Route added: [POST] /inventory/products/edit
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/categories
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/stock
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/movements
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/reports
[2025-07-14 20:59:23][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 20:59:23][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 20:59:23][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 20:59:23][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 20:59:23][info] InventoryCore plugin initialized successfully.
[2025-07-14 20:59:23][info] InventoryCore plugin loaded successfully.
[2025-07-14 20:59:23][info] Route added: [GET] /inventory
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/products
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/products/new
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/products/edit
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/categories
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/stock
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/movements
[2025-07-14 20:59:23][info] Route added: [GET] /inventory/reports
[2025-07-14 20:59:23][info] Loading plugin: System Manager (system_manager)
[2025-07-14 20:59:23][info] Route added: [GET] /login
[2025-07-14 20:59:23][info] Route added: [POST] /login
[2025-07-14 20:59:23][info] Route added: [GET] /admin
[2025-07-14 20:59:23][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:59:23][info] Route added: [GET] /logout
[2025-07-14 20:59:23][info] Route added: [GET] /admin/plugins
[2025-07-14 20:59:23][info] Route added: [POST] /admin/plugins
[2025-07-14 20:59:23][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 20:59:23][info] Route added: [GET] /admin/logs
[2025-07-14 20:59:23][info] Route added: [GET] /usuarios
[2025-07-14 20:59:23][info] Route added: [GET] /usuarios/novo
[2025-07-14 20:59:23][info] Route added: [POST] /usuarios/novo
[2025-07-14 20:59:23][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 20:59:23][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 20:59:23][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 20:59:23][info] Route added: [POST] /api/token
[2025-07-14 20:59:23][info] Route added: [GET] /api/users
[2025-07-14 20:59:23][info] Route added: [POST] /api/users
[2025-07-14 20:59:23][info] Route added: [PUT] /api/users
[2025-07-14 20:59:23][info] Route added: [DELETE] /api/users
[2025-07-14 20:59:23][info] Plugin system_manager carregado com sucesso.
[2025-07-14 20:59:23][info] Route added: [GET] /admin
[2025-07-14 20:59:23][info] Route added: [GET] /login
[2025-07-14 20:59:23][info] Route added: [GET] /logout
[2025-07-14 20:59:23][info] Route added: [GET] /admin/usuarios
[2025-07-14 20:59:23][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 20:59:23][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 20:59:23][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 20:59:23][info] Route added: [GET] /webhook
[2025-07-14 20:59:23][info] Finished loading plugins.
[2025-07-14 20:59:23][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"714abb6fedde6e383a175a2ea9d603a89f0419e0e694bd2f442e79277588df7d","SSL_SESSION_RESUMED":"Initial","CONTENT_TYPE":"application\/json","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"ba7d9a6e-6415-490a-aee1-288906907c57","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","CONTENT_LENGTH":"56","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"63535","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"PUT","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752519563.124688,"REQUEST_TIME":1752519563}
[2025-07-14 20:59:23][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 20:59:23][debug] SQL Query: UPDATE users SET username = ?, name = ? WHERE username = ? Params: ["johndoe","Teste Update","johndoe"]
[2025-07-14 21:00:15][info] ThemeHandler initialized. Active theme: default
[2025-07-14 21:00:15][info] Database connection established successfully with driver: mysql.
[2025-07-14 21:00:15][info] DatabaseHandler initialized.
[2025-07-14 21:00:15][info] AuthHandler initialized. Session started.
[2025-07-14 21:00:15][info] Route added: [GET] /
[2025-07-14 21:00:15][info] RoutesHandler initialized.
[2025-07-14 21:00:15][info] PluginHandler initialized. Loading plugins...
[2025-07-14 21:00:15][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 21:00:15][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 21:00:15][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 21:00:15][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 21:00:15][info] Route added: [GET] /clientes
[2025-07-14 21:00:15][info] Route added: [GET] /clientes/novo
[2025-07-14 21:00:15][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 21:00:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:00:15][info] Database table created/verified successfully.
[2025-07-14 21:00:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:00:15][info] Database table created/verified successfully.
[2025-07-14 21:00:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 21:00:15][info] Database table created/verified successfully.
[2025-07-14 21:00:15][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 21:00:15][info] Database table created/verified successfully.
[2025-07-14 21:00:15][info] Route added: [GET] /inventory
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/products
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:00:15][info] Route added: [POST] /inventory/products/new
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:00:15][info] Route added: [POST] /inventory/products/edit
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/categories
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/stock
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/movements
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/reports
[2025-07-14 21:00:15][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 21:00:15][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 21:00:15][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 21:00:15][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 21:00:15][info] InventoryCore plugin initialized successfully.
[2025-07-14 21:00:15][info] InventoryCore plugin loaded successfully.
[2025-07-14 21:00:15][info] Route added: [GET] /inventory
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/products
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/categories
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/stock
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/movements
[2025-07-14 21:00:15][info] Route added: [GET] /inventory/reports
[2025-07-14 21:00:15][info] Loading plugin: System Manager (system_manager)
[2025-07-14 21:00:15][info] Route added: [GET] /login
[2025-07-14 21:00:15][info] Route added: [POST] /login
[2025-07-14 21:00:15][info] Route added: [GET] /admin
[2025-07-14 21:00:15][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:00:15][info] Route added: [GET] /logout
[2025-07-14 21:00:15][info] Route added: [GET] /admin/plugins
[2025-07-14 21:00:15][info] Route added: [POST] /admin/plugins
[2025-07-14 21:00:15][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 21:00:15][info] Route added: [GET] /admin/logs
[2025-07-14 21:00:15][info] Route added: [GET] /usuarios
[2025-07-14 21:00:15][info] Route added: [GET] /usuarios/novo
[2025-07-14 21:00:15][info] Route added: [POST] /usuarios/novo
[2025-07-14 21:00:15][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 21:00:15][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 21:00:15][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 21:00:15][info] Route added: [POST] /api/token
[2025-07-14 21:00:15][info] Route added: [GET] /api/users
[2025-07-14 21:00:15][info] Route added: [POST] /api/users
[2025-07-14 21:00:15][info] Route added: [PUT] /api/users
[2025-07-14 21:00:15][info] Route added: [DELETE] /api/users
[2025-07-14 21:00:15][info] Plugin system_manager carregado com sucesso.
[2025-07-14 21:00:15][info] Route added: [GET] /admin
[2025-07-14 21:00:15][info] Route added: [GET] /login
[2025-07-14 21:00:15][info] Route added: [GET] /logout
[2025-07-14 21:00:15][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:00:15][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 21:00:15][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 21:00:15][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 21:00:15][info] Route added: [GET] /webhook
[2025-07-14 21:00:15][info] Finished loading plugins.
[2025-07-14 21:00:15][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"2713f49b8e9be4c437442499d5aa0beac9b7410ed5e53104ce10189793e44ce3","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"0eb0b544-04df-48cc-8486-cb5e62ac999b","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"63570","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752519615.769006,"REQUEST_TIME":1752519615}
[2025-07-14 21:00:15][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 21:00:15][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 21:00:25][info] ThemeHandler initialized. Active theme: default
[2025-07-14 21:00:25][info] Database connection established successfully with driver: mysql.
[2025-07-14 21:00:25][info] DatabaseHandler initialized.
[2025-07-14 21:00:25][info] AuthHandler initialized. Session started.
[2025-07-14 21:00:25][info] Route added: [GET] /
[2025-07-14 21:00:25][info] RoutesHandler initialized.
[2025-07-14 21:00:25][info] PluginHandler initialized. Loading plugins...
[2025-07-14 21:00:25][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 21:00:25][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 21:00:25][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 21:00:25][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 21:00:25][info] Route added: [GET] /clientes
[2025-07-14 21:00:25][info] Route added: [GET] /clientes/novo
[2025-07-14 21:00:25][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 21:00:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:00:25][info] Database table created/verified successfully.
[2025-07-14 21:00:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:00:25][info] Database table created/verified successfully.
[2025-07-14 21:00:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 21:00:25][info] Database table created/verified successfully.
[2025-07-14 21:00:25][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 21:00:25][info] Database table created/verified successfully.
[2025-07-14 21:00:25][info] Route added: [GET] /inventory
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/products
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:00:25][info] Route added: [POST] /inventory/products/new
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:00:25][info] Route added: [POST] /inventory/products/edit
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/categories
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/stock
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/movements
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/reports
[2025-07-14 21:00:25][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 21:00:25][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 21:00:25][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 21:00:25][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 21:00:25][info] InventoryCore plugin initialized successfully.
[2025-07-14 21:00:25][info] InventoryCore plugin loaded successfully.
[2025-07-14 21:00:25][info] Route added: [GET] /inventory
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/products
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/categories
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/stock
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/movements
[2025-07-14 21:00:25][info] Route added: [GET] /inventory/reports
[2025-07-14 21:00:25][info] Loading plugin: System Manager (system_manager)
[2025-07-14 21:00:25][info] Route added: [GET] /login
[2025-07-14 21:00:25][info] Route added: [POST] /login
[2025-07-14 21:00:25][info] Route added: [GET] /admin
[2025-07-14 21:00:25][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:00:25][info] Route added: [GET] /logout
[2025-07-14 21:00:25][info] Route added: [GET] /admin/plugins
[2025-07-14 21:00:25][info] Route added: [POST] /admin/plugins
[2025-07-14 21:00:25][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 21:00:25][info] Route added: [GET] /admin/logs
[2025-07-14 21:00:25][info] Route added: [GET] /usuarios
[2025-07-14 21:00:25][info] Route added: [GET] /usuarios/novo
[2025-07-14 21:00:25][info] Route added: [POST] /usuarios/novo
[2025-07-14 21:00:25][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 21:00:25][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 21:00:25][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 21:00:25][info] Route added: [POST] /api/token
[2025-07-14 21:00:25][info] Route added: [GET] /api/users
[2025-07-14 21:00:25][info] Route added: [POST] /api/users
[2025-07-14 21:00:25][info] Route added: [PUT] /api/users
[2025-07-14 21:00:25][info] Route added: [DELETE] /api/users
[2025-07-14 21:00:25][info] Plugin system_manager carregado com sucesso.
[2025-07-14 21:00:25][info] Route added: [GET] /admin
[2025-07-14 21:00:25][info] Route added: [GET] /login
[2025-07-14 21:00:25][info] Route added: [GET] /logout
[2025-07-14 21:00:25][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:00:25][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 21:00:25][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 21:00:25][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 21:00:25][info] Route added: [GET] /webhook
[2025-07-14 21:00:25][info] Finished loading plugins.
[2025-07-14 21:00:25][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"6514397ba40f6d182f374415c58afc3b75291e7ebd4152b936a51fe576d86c0a","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"b9852f3c-b7a6-4984-8eb7-cff73a94139f","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"63604","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752519625.190399,"REQUEST_TIME":1752519625}
[2025-07-14 21:00:25][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 21:00:25][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 21:01:46][info] ThemeHandler initialized. Active theme: default
[2025-07-14 21:01:46][info] Database connection established successfully with driver: mysql.
[2025-07-14 21:01:46][info] DatabaseHandler initialized.
[2025-07-14 21:01:46][info] AuthHandler initialized. Session started.
[2025-07-14 21:01:46][info] Route added: [GET] /
[2025-07-14 21:01:46][info] RoutesHandler initialized.
[2025-07-14 21:01:46][info] PluginHandler initialized. Loading plugins...
[2025-07-14 21:01:46][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 21:01:46][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 21:01:46][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 21:01:46][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 21:01:46][info] Route added: [GET] /clientes
[2025-07-14 21:01:46][info] Route added: [GET] /clientes/novo
[2025-07-14 21:01:46][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 21:01:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:01:46][info] Database table created/verified successfully.
[2025-07-14 21:01:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:01:46][info] Database table created/verified successfully.
[2025-07-14 21:01:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 21:01:46][info] Database table created/verified successfully.
[2025-07-14 21:01:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 21:01:46][info] Database table created/verified successfully.
[2025-07-14 21:01:46][info] Route added: [GET] /inventory
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/products
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:01:46][info] Route added: [POST] /inventory/products/new
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:01:46][info] Route added: [POST] /inventory/products/edit
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/categories
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/stock
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/movements
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/reports
[2025-07-14 21:01:46][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 21:01:46][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 21:01:46][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 21:01:46][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 21:01:46][info] InventoryCore plugin initialized successfully.
[2025-07-14 21:01:46][info] InventoryCore plugin loaded successfully.
[2025-07-14 21:01:46][info] Route added: [GET] /inventory
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/products
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/categories
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/stock
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/movements
[2025-07-14 21:01:46][info] Route added: [GET] /inventory/reports
[2025-07-14 21:01:46][info] Loading plugin: System Manager (system_manager)
[2025-07-14 21:01:46][info] Route added: [GET] /login
[2025-07-14 21:01:46][info] Route added: [POST] /login
[2025-07-14 21:01:46][info] Route added: [GET] /admin
[2025-07-14 21:01:46][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:01:46][info] Route added: [GET] /logout
[2025-07-14 21:01:46][info] Route added: [GET] /admin/plugins
[2025-07-14 21:01:46][info] Route added: [POST] /admin/plugins
[2025-07-14 21:01:46][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 21:01:46][info] Route added: [GET] /admin/logs
[2025-07-14 21:01:46][info] Route added: [GET] /usuarios
[2025-07-14 21:01:46][info] Route added: [GET] /usuarios/novo
[2025-07-14 21:01:46][info] Route added: [POST] /usuarios/novo
[2025-07-14 21:01:46][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 21:01:46][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 21:01:46][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 21:01:46][info] Route added: [POST] /api/token
[2025-07-14 21:01:46][info] Route added: [GET] /api/users
[2025-07-14 21:01:46][info] Route added: [POST] /api/users
[2025-07-14 21:01:46][info] Route added: [PUT] /api/users
[2025-07-14 21:01:46][info] Route added: [DELETE] /api/users
[2025-07-14 21:01:46][info] Plugin system_manager carregado com sucesso.
[2025-07-14 21:01:46][info] Route added: [GET] /admin
[2025-07-14 21:01:46][info] Route added: [GET] /login
[2025-07-14 21:01:46][info] Route added: [GET] /logout
[2025-07-14 21:01:46][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:01:46][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 21:01:46][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 21:01:46][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 21:01:46][info] Route added: [GET] /webhook
[2025-07-14 21:01:46][info] Finished loading plugins.
[2025-07-14 21:01:46][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"2d94cbb58b20c45e0fd078a92be8d28822d9bf93836dc9fdf29f0c4b828a8fa4","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"e1cd1f91-1001-40e4-8375-be039ffe8b30","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"63706","REDIRECT_URL":"\/api\/users","REDIRECT_QUERY_STRING":"id=3","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"DELETE","QUERY_STRING":"id=3","REQUEST_URI":"\/api\/users?id=3","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752519706.724885,"REQUEST_TIME":1752519706}
[2025-07-14 21:01:46][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 21:01:46][debug] SQL Query: DELETE FROM users WHERE id = ? Params: ["3"]
[2025-07-14 21:01:50][info] ThemeHandler initialized. Active theme: default
[2025-07-14 21:01:50][info] Database connection established successfully with driver: mysql.
[2025-07-14 21:01:50][info] DatabaseHandler initialized.
[2025-07-14 21:01:50][info] AuthHandler initialized. Session started.
[2025-07-14 21:01:50][info] Route added: [GET] /
[2025-07-14 21:01:50][info] RoutesHandler initialized.
[2025-07-14 21:01:50][info] PluginHandler initialized. Loading plugins...
[2025-07-14 21:01:50][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 21:01:50][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 21:01:50][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 21:01:50][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 21:01:50][info] Route added: [GET] /clientes
[2025-07-14 21:01:50][info] Route added: [GET] /clientes/novo
[2025-07-14 21:01:50][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 21:01:50][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:01:50][info] Database table created/verified successfully.
[2025-07-14 21:01:50][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:01:50][info] Database table created/verified successfully.
[2025-07-14 21:01:50][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 21:01:50][info] Database table created/verified successfully.
[2025-07-14 21:01:50][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 21:01:50][info] Database table created/verified successfully.
[2025-07-14 21:01:50][info] Route added: [GET] /inventory
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/products
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:01:50][info] Route added: [POST] /inventory/products/new
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:01:50][info] Route added: [POST] /inventory/products/edit
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/categories
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/stock
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/movements
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/reports
[2025-07-14 21:01:50][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 21:01:50][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 21:01:50][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 21:01:50][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 21:01:50][info] InventoryCore plugin initialized successfully.
[2025-07-14 21:01:50][info] InventoryCore plugin loaded successfully.
[2025-07-14 21:01:50][info] Route added: [GET] /inventory
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/products
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/categories
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/stock
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/movements
[2025-07-14 21:01:50][info] Route added: [GET] /inventory/reports
[2025-07-14 21:01:50][info] Loading plugin: System Manager (system_manager)
[2025-07-14 21:01:50][info] Route added: [GET] /login
[2025-07-14 21:01:50][info] Route added: [POST] /login
[2025-07-14 21:01:50][info] Route added: [GET] /admin
[2025-07-14 21:01:50][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:01:50][info] Route added: [GET] /logout
[2025-07-14 21:01:50][info] Route added: [GET] /admin/plugins
[2025-07-14 21:01:50][info] Route added: [POST] /admin/plugins
[2025-07-14 21:01:50][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 21:01:50][info] Route added: [GET] /admin/logs
[2025-07-14 21:01:50][info] Route added: [GET] /usuarios
[2025-07-14 21:01:50][info] Route added: [GET] /usuarios/novo
[2025-07-14 21:01:50][info] Route added: [POST] /usuarios/novo
[2025-07-14 21:01:50][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 21:01:50][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 21:01:50][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 21:01:50][info] Route added: [POST] /api/token
[2025-07-14 21:01:50][info] Route added: [GET] /api/users
[2025-07-14 21:01:50][info] Route added: [POST] /api/users
[2025-07-14 21:01:50][info] Route added: [PUT] /api/users
[2025-07-14 21:01:50][info] Route added: [DELETE] /api/users
[2025-07-14 21:01:50][info] Plugin system_manager carregado com sucesso.
[2025-07-14 21:01:50][info] Route added: [GET] /admin
[2025-07-14 21:01:50][info] Route added: [GET] /login
[2025-07-14 21:01:50][info] Route added: [GET] /logout
[2025-07-14 21:01:50][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:01:50][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 21:01:50][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 21:01:50][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 21:01:50][info] Route added: [GET] /webhook
[2025-07-14 21:01:50][info] Finished loading plugins.
[2025-07-14 21:01:50][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"2d94cbb58b20c45e0fd078a92be8d28822d9bf93836dc9fdf29f0c4b828a8fa4","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"0929ac0b-8d99-406d-a117-6d325a6fcefd","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"63706","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752519710.743909,"REQUEST_TIME":1752519710}
[2025-07-14 21:01:50][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 21:01:50][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 21:45:07][info] ThemeHandler initialized. Active theme: default
[2025-07-14 21:45:07][info] Database connection established successfully with driver: mysql.
[2025-07-14 21:45:07][info] DatabaseHandler initialized.
[2025-07-14 21:45:07][info] AuthHandler initialized. Session started.
[2025-07-14 21:45:07][info] Route added: [GET] /
[2025-07-14 21:45:07][info] RoutesHandler initialized.
[2025-07-14 21:45:07][info] PluginHandler initialized. Loading plugins...
[2025-07-14 21:45:07][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 21:45:07][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 21:45:07][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 21:45:07][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 21:45:07][info] Route added: [GET] /clientes
[2025-07-14 21:45:07][info] Route added: [GET] /clientes/novo
[2025-07-14 21:45:07][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 21:45:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:45:07][info] Database table created/verified successfully.
[2025-07-14 21:45:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 21:45:07][info] Database table created/verified successfully.
[2025-07-14 21:45:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 21:45:07][info] Database table created/verified successfully.
[2025-07-14 21:45:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 21:45:07][info] Database table created/verified successfully.
[2025-07-14 21:45:07][info] Route added: [GET] /inventory
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/products
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:45:07][info] Route added: [POST] /inventory/products/new
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:45:07][info] Route added: [POST] /inventory/products/edit
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/categories
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/stock
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/movements
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/reports
[2025-07-14 21:45:07][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 21:45:07][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 21:45:07][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 21:45:07][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 21:45:07][info] InventoryCore plugin initialized successfully.
[2025-07-14 21:45:07][info] InventoryCore plugin loaded successfully.
[2025-07-14 21:45:07][info] Route added: [GET] /inventory
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/products
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/products/new
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/products/edit
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/categories
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/stock
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/movements
[2025-07-14 21:45:07][info] Route added: [GET] /inventory/reports
[2025-07-14 21:45:07][info] Loading plugin: System Manager (system_manager)
[2025-07-14 21:45:07][info] Route added: [GET] /login
[2025-07-14 21:45:07][info] Route added: [POST] /login
[2025-07-14 21:45:07][info] Route added: [GET] /admin
[2025-07-14 21:45:07][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:45:07][info] Route added: [GET] /logout
[2025-07-14 21:45:07][info] Route added: [GET] /admin/plugins
[2025-07-14 21:45:07][info] Route added: [POST] /admin/plugins
[2025-07-14 21:45:07][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 21:45:07][info] Route added: [GET] /admin/logs
[2025-07-14 21:45:07][info] Route added: [GET] /usuarios
[2025-07-14 21:45:07][info] Route added: [GET] /usuarios/novo
[2025-07-14 21:45:07][info] Route added: [POST] /usuarios/novo
[2025-07-14 21:45:07][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 21:45:07][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 21:45:07][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 21:45:07][info] Route added: [POST] /api/token
[2025-07-14 21:45:07][info] Route added: [GET] /api/users
[2025-07-14 21:45:07][info] Route added: [POST] /api/users
[2025-07-14 21:45:07][info] Route added: [PUT] /api/users
[2025-07-14 21:45:07][info] Route added: [DELETE] /api/users
[2025-07-14 21:45:07][info] Plugin system_manager carregado com sucesso.
[2025-07-14 21:45:07][info] Route added: [GET] /admin
[2025-07-14 21:45:07][info] Route added: [GET] /login
[2025-07-14 21:45:07][info] Route added: [GET] /logout
[2025-07-14 21:45:07][info] Route added: [GET] /admin/usuarios
[2025-07-14 21:45:07][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 21:45:07][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 21:45:07][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 21:45:07][info] Route added: [GET] /webhook
[2025-07-14 21:45:07][info] Finished loading plugins.
[2025-07-14 21:45:07][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"87059eba4fd5d0381ec997c161c7e56691d5a65302ee98b3413313774215590b","SSL_SESSION_RESUMED":"Initial","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"a259b478-92d0-4ebd-82ed-c99ca2d96dc7","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","CONTENT_LENGTH":"0","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"49990","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752522307.173123,"REQUEST_TIME":1752522307}
[2025-07-14 21:45:07][debug] SQL Query: SELECT id, username, password, role, active FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 21:45:07][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at, expires_at) VALUES (?, ?, ?, ?) Params: [1,"eb896c9c63d1d29208522e649543a36e027c78bceb443df07fedfa2810f746e5","2025-07-14 21:45:07","2025-07-14 22:45:07"]
[2025-07-14 22:15:32][info] ThemeHandler initialized. Active theme: default
[2025-07-14 22:15:32][info] Database connection established successfully with driver: mysql.
[2025-07-14 22:15:32][info] DatabaseHandler initialized.
[2025-07-14 22:15:32][info] AuthHandler initialized. Session started.
[2025-07-14 22:15:32][info] Route added: [GET] /
[2025-07-14 22:15:32][info] RoutesHandler initialized.
[2025-07-14 22:15:32][info] PluginHandler initialized. Loading plugins...
[2025-07-14 22:15:32][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 22:15:32][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 22:15:32][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 22:15:32][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 22:15:32][info] Route added: [GET] /clientes
[2025-07-14 22:15:32][info] Route added: [GET] /clientes/novo
[2025-07-14 22:15:32][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 22:15:32][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:15:32][info] Database table created/verified successfully.
[2025-07-14 22:15:32][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:15:32][info] Database table created/verified successfully.
[2025-07-14 22:15:32][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 22:15:32][info] Database table created/verified successfully.
[2025-07-14 22:15:32][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 22:15:32][info] Database table created/verified successfully.
[2025-07-14 22:15:32][info] Route added: [GET] /inventory
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/products
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:15:32][info] Route added: [POST] /inventory/products/new
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:15:32][info] Route added: [POST] /inventory/products/edit
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/categories
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/stock
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/movements
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/reports
[2025-07-14 22:15:32][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 22:15:32][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 22:15:32][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 22:15:32][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 22:15:32][info] InventoryCore plugin initialized successfully.
[2025-07-14 22:15:32][info] InventoryCore plugin loaded successfully.
[2025-07-14 22:15:32][info] Route added: [GET] /inventory
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/products
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/categories
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/stock
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/movements
[2025-07-14 22:15:32][info] Route added: [GET] /inventory/reports
[2025-07-14 22:15:32][info] Loading plugin: System Manager (system_manager)
[2025-07-14 22:15:32][info] Route added: [GET] /login
[2025-07-14 22:15:32][info] Route added: [POST] /login
[2025-07-14 22:15:32][info] Route added: [GET] /admin
[2025-07-14 22:15:32][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:15:32][info] Route added: [GET] /logout
[2025-07-14 22:15:32][info] Route added: [GET] /admin/plugins
[2025-07-14 22:15:32][info] Route added: [POST] /admin/plugins
[2025-07-14 22:15:32][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 22:15:32][info] Route added: [GET] /admin/logs
[2025-07-14 22:15:32][info] Route added: [GET] /usuarios
[2025-07-14 22:15:32][info] Route added: [GET] /usuarios/novo
[2025-07-14 22:15:32][info] Route added: [POST] /usuarios/novo
[2025-07-14 22:15:32][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 22:15:32][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 22:15:32][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 22:15:32][info] Route added: [POST] /api/token
[2025-07-14 22:15:32][info] Route added: [GET] /api/users
[2025-07-14 22:15:32][info] Route added: [POST] /api/users
[2025-07-14 22:15:32][info] Route added: [PUT] /api/users
[2025-07-14 22:15:32][info] Route added: [DELETE] /api/users
[2025-07-14 22:15:32][info] Plugin system_manager carregado com sucesso.
[2025-07-14 22:15:32][info] Route added: [GET] /admin
[2025-07-14 22:15:32][info] Route added: [GET] /login
[2025-07-14 22:15:32][info] Route added: [GET] /logout
[2025-07-14 22:15:32][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:15:32][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 22:15:32][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 22:15:32][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 22:15:32][info] Route added: [GET] /webhook
[2025-07-14 22:15:32][info] Finished loading plugins.
[2025-07-14 22:15:32][debug] Checking permission: admin
[2025-07-14 22:15:32][debug] Checking permission: admin
[2025-07-14 22:15:45][info] ThemeHandler initialized. Active theme: default
[2025-07-14 22:15:45][info] Database connection established successfully with driver: mysql.
[2025-07-14 22:15:45][info] DatabaseHandler initialized.
[2025-07-14 22:15:45][info] AuthHandler initialized. Session started.
[2025-07-14 22:15:45][info] Route added: [GET] /
[2025-07-14 22:15:45][info] RoutesHandler initialized.
[2025-07-14 22:15:45][info] PluginHandler initialized. Loading plugins...
[2025-07-14 22:15:45][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 22:15:45][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 22:15:45][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 22:15:45][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 22:15:45][info] Route added: [GET] /clientes
[2025-07-14 22:15:45][info] Route added: [GET] /clientes/novo
[2025-07-14 22:15:45][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 22:15:45][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:15:45][info] Database table created/verified successfully.
[2025-07-14 22:15:45][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:15:45][info] Database table created/verified successfully.
[2025-07-14 22:15:45][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 22:15:45][info] Database table created/verified successfully.
[2025-07-14 22:15:45][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 22:15:45][info] Database table created/verified successfully.
[2025-07-14 22:15:45][info] Route added: [GET] /inventory
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/products
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:15:45][info] Route added: [POST] /inventory/products/new
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:15:45][info] Route added: [POST] /inventory/products/edit
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/categories
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/stock
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/movements
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/reports
[2025-07-14 22:15:45][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 22:15:45][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 22:15:45][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 22:15:45][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 22:15:45][info] InventoryCore plugin initialized successfully.
[2025-07-14 22:15:45][info] InventoryCore plugin loaded successfully.
[2025-07-14 22:15:45][info] Route added: [GET] /inventory
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/products
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/categories
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/stock
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/movements
[2025-07-14 22:15:45][info] Route added: [GET] /inventory/reports
[2025-07-14 22:15:45][info] Loading plugin: System Manager (system_manager)
[2025-07-14 22:15:45][info] Route added: [GET] /login
[2025-07-14 22:15:45][info] Route added: [POST] /login
[2025-07-14 22:15:45][info] Route added: [GET] /admin
[2025-07-14 22:15:45][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:15:45][info] Route added: [GET] /logout
[2025-07-14 22:15:45][info] Route added: [GET] /admin/plugins
[2025-07-14 22:15:45][info] Route added: [POST] /admin/plugins
[2025-07-14 22:15:45][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 22:15:45][info] Route added: [GET] /admin/logs
[2025-07-14 22:15:45][info] Route added: [GET] /usuarios
[2025-07-14 22:15:45][info] Route added: [GET] /usuarios/novo
[2025-07-14 22:15:45][info] Route added: [POST] /usuarios/novo
[2025-07-14 22:15:45][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 22:15:45][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 22:15:45][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 22:15:45][info] Route added: [POST] /api/token
[2025-07-14 22:15:45][info] Route added: [GET] /api/users
[2025-07-14 22:15:45][info] Route added: [POST] /api/users
[2025-07-14 22:15:45][info] Route added: [PUT] /api/users
[2025-07-14 22:15:45][info] Route added: [DELETE] /api/users
[2025-07-14 22:15:45][info] Plugin system_manager carregado com sucesso.
[2025-07-14 22:15:45][info] Route added: [GET] /admin
[2025-07-14 22:15:45][info] Route added: [GET] /login
[2025-07-14 22:15:45][info] Route added: [GET] /logout
[2025-07-14 22:15:45][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:15:45][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 22:15:45][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 22:15:45][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 22:15:45][info] Route added: [GET] /webhook
[2025-07-14 22:15:45][info] Finished loading plugins.
[2025-07-14 22:15:45][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"adca31f0b49632b926fae4f40577110b6b1b8f6fd617e5b5bc6b6c62405578a3","SSL_SESSION_RESUMED":"Initial","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"a89111ce-526c-4033-93af-99d9f7f45e1e","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","CONTENT_LENGTH":"0","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51696","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752524145.625983,"REQUEST_TIME":1752524145}
[2025-07-14 22:15:45][debug] SQL Query: SELECT id, username, password, role, active FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 22:15:45][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at, expires_at) VALUES (?, ?, ?, ?) Params: [1,"e2dd7f9e6450731905ef4cbeac4c6e5be389749286b48e200ec09f888906cb38","2025-07-14 22:15:45","2025-07-14 23:15:45"]
[2025-07-14 22:18:07][info] ThemeHandler initialized. Active theme: default
[2025-07-14 22:18:07][info] Database connection established successfully with driver: mysql.
[2025-07-14 22:18:07][info] DatabaseHandler initialized.
[2025-07-14 22:18:07][info] AuthHandler initialized. Session started.
[2025-07-14 22:18:07][info] Route added: [GET] /
[2025-07-14 22:18:07][info] RoutesHandler initialized.
[2025-07-14 22:18:07][info] PluginHandler initialized. Loading plugins...
[2025-07-14 22:18:07][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 22:18:07][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 22:18:07][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 22:18:07][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 22:18:07][info] Route added: [GET] /clientes
[2025-07-14 22:18:07][info] Route added: [GET] /clientes/novo
[2025-07-14 22:18:07][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 22:18:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:18:07][info] Database table created/verified successfully.
[2025-07-14 22:18:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:18:07][info] Database table created/verified successfully.
[2025-07-14 22:18:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 22:18:07][info] Database table created/verified successfully.
[2025-07-14 22:18:07][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 22:18:07][info] Database table created/verified successfully.
[2025-07-14 22:18:07][info] Route added: [GET] /inventory
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/products
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:18:07][info] Route added: [POST] /inventory/products/new
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:18:07][info] Route added: [POST] /inventory/products/edit
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/categories
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/stock
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/movements
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/reports
[2025-07-14 22:18:07][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 22:18:07][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 22:18:07][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 22:18:07][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 22:18:07][info] InventoryCore plugin initialized successfully.
[2025-07-14 22:18:07][info] InventoryCore plugin loaded successfully.
[2025-07-14 22:18:07][info] Route added: [GET] /inventory
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/products
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/categories
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/stock
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/movements
[2025-07-14 22:18:07][info] Route added: [GET] /inventory/reports
[2025-07-14 22:18:07][info] Loading plugin: System Manager (system_manager)
[2025-07-14 22:18:07][info] Route added: [GET] /login
[2025-07-14 22:18:07][info] Route added: [POST] /login
[2025-07-14 22:18:07][info] Route added: [GET] /admin
[2025-07-14 22:18:07][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:18:07][info] Route added: [GET] /logout
[2025-07-14 22:18:07][info] Route added: [GET] /admin/plugins
[2025-07-14 22:18:07][info] Route added: [POST] /admin/plugins
[2025-07-14 22:18:07][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 22:18:07][info] Route added: [GET] /admin/logs
[2025-07-14 22:18:07][info] Route added: [GET] /usuarios
[2025-07-14 22:18:07][info] Route added: [GET] /usuarios/novo
[2025-07-14 22:18:07][info] Route added: [POST] /usuarios/novo
[2025-07-14 22:18:07][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 22:18:07][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 22:18:07][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 22:18:07][info] Route added: [POST] /api/token
[2025-07-14 22:18:07][info] Route added: [GET] /api/users
[2025-07-14 22:18:07][info] Route added: [POST] /api/users
[2025-07-14 22:18:07][info] Route added: [PUT] /api/users
[2025-07-14 22:18:07][info] Route added: [DELETE] /api/users
[2025-07-14 22:18:07][info] Plugin system_manager carregado com sucesso.
[2025-07-14 22:18:07][info] Route added: [GET] /admin
[2025-07-14 22:18:07][info] Route added: [GET] /login
[2025-07-14 22:18:07][info] Route added: [GET] /logout
[2025-07-14 22:18:07][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:18:07][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 22:18:07][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 22:18:07][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 22:18:07][info] Route added: [GET] /webhook
[2025-07-14 22:18:07][info] Finished loading plugins.
[2025-07-14 22:18:07][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Basic YWRtaW46YWRtaW4xMjM=","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"676f40efca1a5e96c1dd1c81d3f1e1fc88ba686e22175a158a62487a055dc968","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"6ead25f4-41e3-4486-9392-21fa96c95b10","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","CONTENT_LENGTH":"0","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"51914","REDIRECT_URL":"\/api\/token","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"POST","QUERY_STRING":"","REQUEST_URI":"\/api\/token","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","PHP_AUTH_USER":"admin","PHP_AUTH_PW":"admin123","REQUEST_TIME_FLOAT":1752524287.63602,"REQUEST_TIME":1752524287}
[2025-07-14 22:18:07][debug] SQL Query: SELECT id, username, password, role, active FROM users WHERE username = ? Params: ["admin"]
[2025-07-14 22:18:07][debug] SQL Query: INSERT INTO api_tokens (user_id, token, created_at, expires_at) VALUES (?, ?, ?, ?) Params: [1,"e08deb6a53b2fbf654b819a762f6117ed57b142caf9a8c7fb1be33d9aab6ec82","2025-07-14 22:18:07","2025-07-14 23:18:07"]
[2025-07-14 22:20:16][info] ThemeHandler initialized. Active theme: default
[2025-07-14 22:20:16][info] Database connection established successfully with driver: mysql.
[2025-07-14 22:20:16][info] DatabaseHandler initialized.
[2025-07-14 22:20:16][info] AuthHandler initialized. Session started.
[2025-07-14 22:20:16][info] Route added: [GET] /
[2025-07-14 22:20:16][info] RoutesHandler initialized.
[2025-07-14 22:20:16][info] PluginHandler initialized. Loading plugins...
[2025-07-14 22:20:16][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 22:20:16][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 22:20:16][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 22:20:16][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 22:20:16][info] Route added: [GET] /clientes
[2025-07-14 22:20:16][info] Route added: [GET] /clientes/novo
[2025-07-14 22:20:16][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 22:20:16][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:20:16][info] Database table created/verified successfully.
[2025-07-14 22:20:16][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:20:16][info] Database table created/verified successfully.
[2025-07-14 22:20:16][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 22:20:16][info] Database table created/verified successfully.
[2025-07-14 22:20:16][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 22:20:16][info] Database table created/verified successfully.
[2025-07-14 22:20:16][info] Route added: [GET] /inventory
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/products
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:20:16][info] Route added: [POST] /inventory/products/new
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:20:16][info] Route added: [POST] /inventory/products/edit
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/categories
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/stock
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/movements
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/reports
[2025-07-14 22:20:16][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 22:20:16][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 22:20:16][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 22:20:16][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 22:20:16][info] InventoryCore plugin initialized successfully.
[2025-07-14 22:20:16][info] InventoryCore plugin loaded successfully.
[2025-07-14 22:20:16][info] Route added: [GET] /inventory
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/products
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/categories
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/stock
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/movements
[2025-07-14 22:20:16][info] Route added: [GET] /inventory/reports
[2025-07-14 22:20:16][info] Loading plugin: System Manager (system_manager)
[2025-07-14 22:20:16][info] Route added: [GET] /login
[2025-07-14 22:20:16][info] Route added: [POST] /login
[2025-07-14 22:20:16][info] Route added: [GET] /admin
[2025-07-14 22:20:16][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:20:16][info] Route added: [GET] /logout
[2025-07-14 22:20:16][info] Route added: [GET] /admin/plugins
[2025-07-14 22:20:16][info] Route added: [POST] /admin/plugins
[2025-07-14 22:20:16][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 22:20:16][info] Route added: [GET] /admin/logs
[2025-07-14 22:20:16][info] Route added: [GET] /usuarios
[2025-07-14 22:20:16][info] Route added: [GET] /usuarios/novo
[2025-07-14 22:20:16][info] Route added: [POST] /usuarios/novo
[2025-07-14 22:20:16][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 22:20:16][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 22:20:16][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 22:20:16][info] Route added: [POST] /api/token
[2025-07-14 22:20:16][info] Route added: [GET] /api/users
[2025-07-14 22:20:16][info] Route added: [POST] /api/users
[2025-07-14 22:20:16][info] Route added: [PUT] /api/users
[2025-07-14 22:20:16][info] Route added: [DELETE] /api/users
[2025-07-14 22:20:16][info] Plugin system_manager carregado com sucesso.
[2025-07-14 22:20:16][info] Route added: [GET] /admin
[2025-07-14 22:20:16][info] Route added: [GET] /login
[2025-07-14 22:20:16][info] Route added: [GET] /logout
[2025-07-14 22:20:16][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:20:16][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 22:20:16][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 22:20:16][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 22:20:16][info] Route added: [GET] /webhook
[2025-07-14 22:20:16][info] Finished loading plugins.
[2025-07-14 22:20:16][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"62a583de30efd9d3bf0b9a0e1ca572d9bfe71dc5bb520d0ca0eb276990dcb577","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"eda497a0-ee43-4f1b-b943-11a7ed18d1ae","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"52039","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752524416.081981,"REQUEST_TIME":1752524416}
[2025-07-14 22:20:16][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 22:20:23][info] ThemeHandler initialized. Active theme: default
[2025-07-14 22:20:23][info] Database connection established successfully with driver: mysql.
[2025-07-14 22:20:23][info] DatabaseHandler initialized.
[2025-07-14 22:20:23][info] AuthHandler initialized. Session started.
[2025-07-14 22:20:23][info] Route added: [GET] /
[2025-07-14 22:20:23][info] RoutesHandler initialized.
[2025-07-14 22:20:23][info] PluginHandler initialized. Loading plugins...
[2025-07-14 22:20:23][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 22:20:23][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 22:20:23][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 22:20:23][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 22:20:23][info] Route added: [GET] /clientes
[2025-07-14 22:20:23][info] Route added: [GET] /clientes/novo
[2025-07-14 22:20:23][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 22:20:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:20:23][info] Database table created/verified successfully.
[2025-07-14 22:20:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:20:23][info] Database table created/verified successfully.
[2025-07-14 22:20:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 22:20:23][info] Database table created/verified successfully.
[2025-07-14 22:20:23][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 22:20:23][info] Database table created/verified successfully.
[2025-07-14 22:20:23][info] Route added: [GET] /inventory
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/products
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:20:23][info] Route added: [POST] /inventory/products/new
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:20:23][info] Route added: [POST] /inventory/products/edit
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/categories
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/stock
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/movements
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/reports
[2025-07-14 22:20:23][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 22:20:23][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 22:20:23][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 22:20:23][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 22:20:23][info] InventoryCore plugin initialized successfully.
[2025-07-14 22:20:23][info] InventoryCore plugin loaded successfully.
[2025-07-14 22:20:23][info] Route added: [GET] /inventory
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/products
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/categories
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/stock
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/movements
[2025-07-14 22:20:23][info] Route added: [GET] /inventory/reports
[2025-07-14 22:20:23][info] Loading plugin: System Manager (system_manager)
[2025-07-14 22:20:23][info] Route added: [GET] /login
[2025-07-14 22:20:23][info] Route added: [POST] /login
[2025-07-14 22:20:23][info] Route added: [GET] /admin
[2025-07-14 22:20:23][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:20:23][info] Route added: [GET] /logout
[2025-07-14 22:20:23][info] Route added: [GET] /admin/plugins
[2025-07-14 22:20:23][info] Route added: [POST] /admin/plugins
[2025-07-14 22:20:23][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 22:20:23][info] Route added: [GET] /admin/logs
[2025-07-14 22:20:23][info] Route added: [GET] /usuarios
[2025-07-14 22:20:23][info] Route added: [GET] /usuarios/novo
[2025-07-14 22:20:23][info] Route added: [POST] /usuarios/novo
[2025-07-14 22:20:23][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 22:20:23][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 22:20:23][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 22:20:23][info] Route added: [POST] /api/token
[2025-07-14 22:20:23][info] Route added: [GET] /api/users
[2025-07-14 22:20:23][info] Route added: [POST] /api/users
[2025-07-14 22:20:23][info] Route added: [PUT] /api/users
[2025-07-14 22:20:23][info] Route added: [DELETE] /api/users
[2025-07-14 22:20:23][info] Plugin system_manager carregado com sucesso.
[2025-07-14 22:20:23][info] Route added: [GET] /admin
[2025-07-14 22:20:23][info] Route added: [GET] /login
[2025-07-14 22:20:23][info] Route added: [GET] /logout
[2025-07-14 22:20:23][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:20:23][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 22:20:23][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 22:20:23][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 22:20:23][info] Route added: [GET] /webhook
[2025-07-14 22:20:23][info] Finished loading plugins.
[2025-07-14 22:20:23][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer e2dd7f9e6450731905ef4cbeac4c6e5be389749286b48e200ec09f888906cb38","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer e2dd7f9e6450731905ef4cbeac4c6e5be389749286b48e200ec09f888906cb38","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"91972e4112aec9e215503d5d9b97def4e43bf9aee9da3001a048b5fdd1f28343","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"7fbb9d3d-bb4e-4ce4-9bda-31fcc9f92e4c","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"52053","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752524423.110135,"REQUEST_TIME":1752524423}
[2025-07-14 22:20:23][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["e2dd7f9e6450731905ef4cbeac4c6e5be389749286b48e200ec09f888906cb38"]
[2025-07-14 22:20:23][debug] SQL Query: SELECT * FROM users Params: []
[2025-07-14 22:20:40][info] ThemeHandler initialized. Active theme: default
[2025-07-14 22:20:40][info] Database connection established successfully with driver: mysql.
[2025-07-14 22:20:40][info] DatabaseHandler initialized.
[2025-07-14 22:20:40][info] AuthHandler initialized. Session started.
[2025-07-14 22:20:40][info] Route added: [GET] /
[2025-07-14 22:20:40][info] RoutesHandler initialized.
[2025-07-14 22:20:40][info] PluginHandler initialized. Loading plugins...
[2025-07-14 22:20:40][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 22:20:40][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 22:20:40][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 22:20:40][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 22:20:40][info] Route added: [GET] /clientes
[2025-07-14 22:20:40][info] Route added: [GET] /clientes/novo
[2025-07-14 22:20:40][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 22:20:40][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:20:40][info] Database table created/verified successfully.
[2025-07-14 22:20:40][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:20:40][info] Database table created/verified successfully.
[2025-07-14 22:20:40][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 22:20:40][info] Database table created/verified successfully.
[2025-07-14 22:20:40][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 22:20:40][info] Database table created/verified successfully.
[2025-07-14 22:20:40][info] Route added: [GET] /inventory
[2025-07-14 22:20:40][info] Route added: [GET] /inventory/products
[2025-07-14 22:20:40][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:20:40][info] Route added: [POST] /inventory/products/new
[2025-07-14 22:20:40][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:20:40][info] Route added: [POST] /inventory/products/edit
[2025-07-14 22:20:40][info] Route added: [GET] /inventory/categories
[2025-07-14 22:20:40][info] Route added: [GET] /inventory/stock
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/movements
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/reports
[2025-07-14 22:20:41][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 22:20:41][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 22:20:41][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 22:20:41][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 22:20:41][info] InventoryCore plugin initialized successfully.
[2025-07-14 22:20:41][info] InventoryCore plugin loaded successfully.
[2025-07-14 22:20:41][info] Route added: [GET] /inventory
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/products
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/categories
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/stock
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/movements
[2025-07-14 22:20:41][info] Route added: [GET] /inventory/reports
[2025-07-14 22:20:41][info] Loading plugin: System Manager (system_manager)
[2025-07-14 22:20:41][info] Route added: [GET] /login
[2025-07-14 22:20:41][info] Route added: [POST] /login
[2025-07-14 22:20:41][info] Route added: [GET] /admin
[2025-07-14 22:20:41][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:20:41][info] Route added: [GET] /logout
[2025-07-14 22:20:41][info] Route added: [GET] /admin/plugins
[2025-07-14 22:20:41][info] Route added: [POST] /admin/plugins
[2025-07-14 22:20:41][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 22:20:41][info] Route added: [GET] /admin/logs
[2025-07-14 22:20:41][info] Route added: [GET] /usuarios
[2025-07-14 22:20:41][info] Route added: [GET] /usuarios/novo
[2025-07-14 22:20:41][info] Route added: [POST] /usuarios/novo
[2025-07-14 22:20:41][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 22:20:41][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 22:20:41][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 22:20:41][info] Route added: [POST] /api/token
[2025-07-14 22:20:41][info] Route added: [GET] /api/users
[2025-07-14 22:20:41][info] Route added: [POST] /api/users
[2025-07-14 22:20:41][info] Route added: [PUT] /api/users
[2025-07-14 22:20:41][info] Route added: [DELETE] /api/users
[2025-07-14 22:20:41][info] Plugin system_manager carregado com sucesso.
[2025-07-14 22:20:41][info] Route added: [GET] /admin
[2025-07-14 22:20:41][info] Route added: [GET] /login
[2025-07-14 22:20:41][info] Route added: [GET] /logout
[2025-07-14 22:20:41][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:20:41][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 22:20:41][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 22:20:41][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 22:20:41][info] Route added: [GET] /webhook
[2025-07-14 22:20:41][info] Finished loading plugins.
[2025-07-14 22:20:41][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer 0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"c3059dff5c97dc282b39406f679266b4e3bea27d84f0c260171f705117dd69e3","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"12b3c59d-8675-4f4a-9bc8-5135bc6e9916","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"52111","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752524440.853667,"REQUEST_TIME":1752524440}
[2025-07-14 22:20:41][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["0ca571c471ce875574f4f4403775c7003d494eb7103a88fac4a942b6ec84aa03"]
[2025-07-14 22:20:46][info] ThemeHandler initialized. Active theme: default
[2025-07-14 22:20:46][info] Database connection established successfully with driver: mysql.
[2025-07-14 22:20:46][info] DatabaseHandler initialized.
[2025-07-14 22:20:46][info] AuthHandler initialized. Session started.
[2025-07-14 22:20:46][info] Route added: [GET] /
[2025-07-14 22:20:46][info] RoutesHandler initialized.
[2025-07-14 22:20:46][info] PluginHandler initialized. Loading plugins...
[2025-07-14 22:20:46][info] Loading plugin: Exemplo de Plugin (exemplo_plugin)
[2025-07-14 22:20:46][info] Route added: [GET] /exemplo-plugin/teste
[2025-07-14 22:20:46][info] Hook registered: after_gerar_relatorio (after, priority 10)
[2025-07-14 22:20:46][info] Plugin Exemplo de Plugin carregado com sucesso.
[2025-07-14 22:20:46][info] Route added: [GET] /clientes
[2025-07-14 22:20:46][info] Route added: [GET] /clientes/novo
[2025-07-14 22:20:46][info] Loading plugin: Inventory Core (inventory_core)
[2025-07-14 22:20:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_categories (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(100) NOT NULL,
                description TEXT,
                parent_id INT DEFAULT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (parent_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:20:46][info] Database table created/verified successfully.
[2025-07-14 22:20:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_products (
                id INT PRIMARY KEY AUTO_INCREMENT,
                name VARCHAR(255) NOT NULL,
                description TEXT,
                sku VARCHAR(50) UNIQUE NOT NULL,
                category_id INT,
                unit_price DECIMAL(10,2) DEFAULT 0.00,
                cost_price DECIMAL(10,2) DEFAULT 0.00,
                min_stock INT DEFAULT 0,
                max_stock INT DEFAULT 0,
                active BOOLEAN DEFAULT TRUE,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (category_id) REFERENCES inventory_categories(id) ON DELETE SET NULL
            ) Params: []
[2025-07-14 22:20:46][info] Database table created/verified successfully.
[2025-07-14 22:20:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_stock (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                quantity INT NOT NULL DEFAULT 0,
                reserved_quantity INT NOT NULL DEFAULT 0,
                location VARCHAR(100) DEFAULT 'default',
                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE,
                UNIQUE KEY unique_product_location (product_id, location)
            ) Params: []
[2025-07-14 22:20:46][info] Database table created/verified successfully.
[2025-07-14 22:20:46][debug] SQL Query: CREATE TABLE IF NOT EXISTS inventory_movements (
                id INT PRIMARY KEY AUTO_INCREMENT,
                product_id INT NOT NULL,
                movement_type ENUM('IN', 'OUT', 'ADJUSTMENT') NOT NULL,
                quantity INT NOT NULL,
                reason VARCHAR(255),
                reference_id INT DEFAULT NULL,
                reference_type VARCHAR(50) DEFAULT NULL,
                user_id VARCHAR(50),
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (product_id) REFERENCES inventory_products(id) ON DELETE CASCADE
            ) Params: []
[2025-07-14 22:20:46][info] Database table created/verified successfully.
[2025-07-14 22:20:46][info] Route added: [GET] /inventory
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/products
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:20:46][info] Route added: [POST] /inventory/products/new
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:20:46][info] Route added: [POST] /inventory/products/edit
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/categories
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/stock
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/movements
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/reports
[2025-07-14 22:20:46][info] Hook registered: after_product_created (after, priority 10)
[2025-07-14 22:20:46][info] Hook registered: after_stock_updated (after, priority 10)
[2025-07-14 22:20:46][info] Hook registered: api_inventory_products (after, priority 10)
[2025-07-14 22:20:46][info] Hook registered: api_inventory_stock (after, priority 10)
[2025-07-14 22:20:46][info] InventoryCore plugin initialized successfully.
[2025-07-14 22:20:46][info] InventoryCore plugin loaded successfully.
[2025-07-14 22:20:46][info] Route added: [GET] /inventory
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/products
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/products/new
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/products/edit
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/categories
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/stock
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/movements
[2025-07-14 22:20:46][info] Route added: [GET] /inventory/reports
[2025-07-14 22:20:46][info] Loading plugin: System Manager (system_manager)
[2025-07-14 22:20:46][info] Route added: [GET] /login
[2025-07-14 22:20:46][info] Route added: [POST] /login
[2025-07-14 22:20:46][info] Route added: [GET] /admin
[2025-07-14 22:20:46][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:20:46][info] Route added: [GET] /logout
[2025-07-14 22:20:46][info] Route added: [GET] /admin/plugins
[2025-07-14 22:20:46][info] Route added: [POST] /admin/plugins
[2025-07-14 22:20:46][info] Route added: [POST] /admin/plugins/toggle
[2025-07-14 22:20:46][info] Route added: [GET] /admin/logs
[2025-07-14 22:20:46][info] Route added: [GET] /usuarios
[2025-07-14 22:20:46][info] Route added: [GET] /usuarios/novo
[2025-07-14 22:20:46][info] Route added: [POST] /usuarios/novo
[2025-07-14 22:20:46][info] Route added: [GET] /usuarios/editar/(\d+)
[2025-07-14 22:20:46][info] Route added: [POST] /usuarios/editar/(\d+)
[2025-07-14 22:20:46][info] Route added: [POST] /usuarios/apagar/(\d+)
[2025-07-14 22:20:46][info] Route added: [POST] /api/token
[2025-07-14 22:20:46][info] Route added: [GET] /api/users
[2025-07-14 22:20:46][info] Route added: [POST] /api/users
[2025-07-14 22:20:46][info] Route added: [PUT] /api/users
[2025-07-14 22:20:46][info] Route added: [DELETE] /api/users
[2025-07-14 22:20:46][info] Plugin system_manager carregado com sucesso.
[2025-07-14 22:20:46][info] Route added: [GET] /admin
[2025-07-14 22:20:46][info] Route added: [GET] /login
[2025-07-14 22:20:46][info] Route added: [GET] /logout
[2025-07-14 22:20:46][info] Route added: [GET] /admin/usuarios
[2025-07-14 22:20:46][info] Loading plugin: Whatsapp integration (whatsapp_integration)
[2025-07-14 22:20:46][info] Route added: [POST] /whatsapp/webhook
[2025-07-14 22:20:46][info] Route added: [GET] /whatsapp/webhook
[2025-07-14 22:20:46][info] Route added: [GET] /webhook
[2025-07-14 22:20:46][info] Finished loading plugins.
[2025-07-14 22:20:46][debug] HEADERS: {"REDIRECT_HTTP_AUTHORIZATION":"Bearer e2dd7f9e6450731905ef4cbeac4c6e5be389749286b48e200ec09f888906cb38","REDIRECT_MIBDIRS":"C:\/xampp\/php\/extras\/mibs","REDIRECT_MYSQL_HOME":"\\xampp\\mysql\\bin","REDIRECT_OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","REDIRECT_PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","REDIRECT_PHPRC":"\\xampp\\php","REDIRECT_TMP":"\\xampp\\tmp","REDIRECT_HTTPS":"on","REDIRECT_SSL_TLS_SNI":"localhost","REDIRECT_STATUS":"200","HTTP_AUTHORIZATION":"Bearer e2dd7f9e6450731905ef4cbeac4c6e5be389749286b48e200ec09f888906cb38","MIBDIRS":"C:\/xampp\/php\/extras\/mibs","MYSQL_HOME":"\\xampp\\mysql\\bin","OPENSSL_CONF":"C:\/xampp\/apache\/bin\/openssl.cnf","PHP_PEAR_SYSCONF_DIR":"\\xampp\\php","PHPRC":"\\xampp\\php","TMP":"\\xampp\\tmp","HTTPS":"on","SSL_TLS_SNI":"localhost","SSL_SERVER_S_DN_CN":"localhost","SSL_SERVER_I_DN_CN":"localhost","SSL_VERSION_INTERFACE":"mod_ssl\/2.4.58","SSL_VERSION_LIBRARY":"OpenSSL\/3.1.3","SSL_PROTOCOL":"TLSv1.3","SSL_SECURE_RENEG":"false","SSL_COMPRESS_METHOD":"NULL","SSL_CIPHER":"TLS_AES_256_GCM_SHA384","SSL_CIPHER_EXPORT":"false","SSL_CIPHER_USEKEYSIZE":"256","SSL_CIPHER_ALGKEYSIZE":"256","SSL_CLIENT_VERIFY":"NONE","SSL_SERVER_M_VERSION":"1","SSL_SERVER_M_SERIAL":"B5C752C98781B503","SSL_SERVER_V_START":"Nov 10 23:48:47 2009 GMT","SSL_SERVER_V_END":"Nov  8 23:48:47 2019 GMT","SSL_SERVER_S_DN":"CN=localhost","SSL_SERVER_I_DN":"CN=localhost","SSL_SERVER_A_KEY":"rsaEncryption","SSL_SERVER_A_SIG":"sha1WithRSAEncryption","SSL_SESSION_ID":"043a14c095792316fb87c3d8619d54ad758df90dccadfe652feb2df32292bd5f","SSL_SESSION_RESUMED":"Resumed","HTTP_USER_AGENT":"PostmanRuntime\/7.39.1","HTTP_ACCEPT":"*\/*","HTTP_CACHE_CONTROL":"no-cache","HTTP_POSTMAN_TOKEN":"7add1f92-b6da-4ece-b624-50e0d67a71c2","HTTP_HOST":"localhost","HTTP_ACCEPT_ENCODING":"gzip, deflate, br","HTTP_CONNECTION":"keep-alive","HTTP_COOKIE":"PHPSESSID=jtlokg6emcp12ipm0l5o72684j","PATH":"C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\160\\DTS\\Binn\\;C:\\Program Files\\Git\\cmd;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;c:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Users\\lpulz\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\lpulz\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\lpulz\\AppData\\Roaming\\npm","SystemRoot":"C:\\WINDOWS","COMSPEC":"C:\\WINDOWS\\system32\\cmd.exe","PATHEXT":".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW","WINDIR":"C:\\WINDOWS","SERVER_SIGNATURE":"<address>Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12 Server at localhost Port 443<\/address>\n","SERVER_SOFTWARE":"Apache\/2.4.58 (Win64) OpenSSL\/3.1.3 PHP\/8.2.12","SERVER_NAME":"localhost","SERVER_ADDR":"::1","SERVER_PORT":"443","REMOTE_ADDR":"::1","DOCUMENT_ROOT":"C:\/xampp\/htdocs","REQUEST_SCHEME":"https","CONTEXT_PREFIX":"","CONTEXT_DOCUMENT_ROOT":"C:\/xampp\/htdocs","SERVER_ADMIN":"admin@example.com","SCRIPT_FILENAME":"C:\/xampp\/htdocs\/index.php","REMOTE_PORT":"52115","REDIRECT_URL":"\/api\/users","GATEWAY_INTERFACE":"CGI\/1.1","SERVER_PROTOCOL":"HTTP\/1.1","REQUEST_METHOD":"GET","QUERY_STRING":"","REQUEST_URI":"\/api\/users","SCRIPT_NAME":"\/index.php","PHP_SELF":"\/index.php","REQUEST_TIME_FLOAT":1752524446.528637,"REQUEST_TIME":1752524446}
[2025-07-14 22:20:46][debug] SQL Query: SELECT * FROM api_tokens WHERE token = ? Params: ["e2dd7f9e6450731905ef4cbeac4c6e5be389749286b48e200ec09f888906cb38"]
[2025-07-14 22:20:46][debug] SQL Query: SELECT * FROM users Params: []
